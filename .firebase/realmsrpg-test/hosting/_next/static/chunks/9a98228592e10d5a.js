(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55900,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>t],55900)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},98919,e=>{"use strict";let t=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],98919)},84004,44604,e=>{"use strict";e.i(45872);var t=e.i(43476),r=e.i(22016);function a(){return(0,t.jsx)("footer",{className:"w-full bg-gray-400 border-t border-[#707070] h-10 flex items-center justify-center mt-auto",children:(0,t.jsxs)("div",{className:"w-full max-w-[1440px] px-4 sm:px-6 lg:px-24 flex items-center justify-between",children:[(0,t.jsx)(r.default,{href:"/terms",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Terms of Service"}),(0,t.jsx)(r.default,{href:"/privacy",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Privacy Policy"}),(0,t.jsx)("a",{href:"mailto:RealmsRoleplayGame@gmail.com",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Contact"}),(0,t.jsx)("a",{href:"https://discord.gg/Dbd5X9FQFJ",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Discord"})]})})}e.s(["Footer",()=>a],44604),e.i(23495),e.s([],84004)},92006,81547,15324,e=>{"use strict";let t={TRUE_DAMAGE:1,ADDITIONAL_DAMAGE:6,SPLIT_DAMAGE_DICE:5,REACTION:2,LONG_ACTION:3,QUICK_OR_FREE_ACTION:4,POWER_REACTION:82,POWER_LONG_ACTION:81,POWER_QUICK_OR_FREE_ACTION:83,ADD_WEAPON_ATTACK:7,RECKLESS:8,PASS_THROUGH:9,SPIN:10,STUN:11,WIND_UP:12,KNOCKBACK:13,SLOW:14,DAZE:15,WIDE_SWING:16,ENEMY_STRENGTH_REDUCTION:17,REACH:18,EXPOSE:19,ENEMY_ATTACK_REDUCTION:20,BLEED:21,LINE_OF_EFFECT:88,CONE_OF_EFFECT:89,CYLINDER_OF_EFFECT:231,SPHERE_OF_EFFECT:232,TRAIL_OF_EFFECT:233,PIERCE_TARGETS_ON_PATH:234,ADD_MULTIPLE_TARGETS:235,EXPANDING_AREA_OF_EFFECT:236,TARGET_ONE_IN_AREA:237,EXCLUDE_AREA:238,POWER_RANGE:292,DURATION_ROUND:289,DURATION_MINUTE:290,DURATION_HOUR:291,DURATION_DAYS:293,DURATION_PERMANENT:294},r={DAMAGE_REDUCTION:1,ARMOR_STRENGTH_REQUIREMENT:2,ARMOR_AGILITY_REQUIREMENT:3,ARMOR_VITALITY_REQUIREMENT:4,AGILITY_REDUCTION:5,WEAPON_STRENGTH_REQUIREMENT:6,WEAPON_AGILITY_REQUIREMENT:7,WEAPON_VITALITY_REQUIREMENT:8,WEAPON_ACUITY_REQUIREMENT:9,WEAPON_INTELLIGENCE_REQUIREMENT:10,WEAPON_CHARISMA_REQUIREMENT:11,SPLIT_DAMAGE_DICE:12,RANGE:13,TWO_HANDED:14,SHIELD_BASE:15,ARMOR_BASE:16,WEAPON_DAMAGE:17,DAMAGE_TYPE_RESISTANCE:18,BLUDGEONING_VULNERABILITY:19,PIERCING_VULNERABILITY:20,SLASHING_VULNERABILITY:21,CRITICAL_RANGE_PLUS_1:22,CRITICAL_RANGE:23,CRITICAL_MULTIPLIER:24,THROWN:25,FINESSE:26,DAMAGED:27,GRAZE:28,LOADING:29,KNOCKBACK:30,WOUNDING:31,SLOW:32,TOPPLE:33,EXPOSE:34,CHARGING:35,HIDDEN:36,AMMUNITION:37,BLEED:38,SHIELD_AMOUNT:39,SHIELD_DAMAGE:40,REACH:41,MOUNTED:42,VERSATILE:43,CLEAVE:44,INTERCHANGEABLE:45,BLOCK:46,QUICK:47,PULL:48},a=new Set([r.SHIELD_BASE,r.ARMOR_BASE,r.RANGE,r.TWO_HANDED,r.SPLIT_DAMAGE_DICE,r.DAMAGE_REDUCTION,r.WEAPON_DAMAGE,r.AGILITY_REDUCTION,r.WEAPON_STRENGTH_REQUIREMENT,r.WEAPON_AGILITY_REQUIREMENT,r.WEAPON_VITALITY_REQUIREMENT,r.WEAPON_ACUITY_REQUIREMENT,r.WEAPON_INTELLIGENCE_REQUIREMENT,r.WEAPON_CHARISMA_REQUIREMENT,r.ARMOR_STRENGTH_REQUIREMENT,r.ARMOR_AGILITY_REQUIREMENT,r.ARMOR_VITALITY_REQUIREMENT]),s=new Set(["Shield Base","Armor Base","Range","Two-Handed","Split Damage Dice","Damage Reduction","Weapon Damage","Agility Reduction","Weapon Strength Requirement","Weapon Agility Requirement","Weapon Vitality Requirement","Weapon Acuity Requirement","Weapon Intelligence Requirement","Weapon Charisma Requirement","Armor Strength Requirement","Armor Agility Requirement","Armor Vitality Requirement"]);function i(e,t){if(Array.isArray(e)&&t){if(void 0!==t.id&&null!==t.id){let r=e.find(e=>("string"==typeof e.id?parseInt(e.id,10):e.id)===("string"==typeof t.id?parseInt(t.id,10):t.id));if(r)return r}if(t.name)return e.find(e=>e.name===t.name)}}function l(e,t){let r=void 0!==e.part;return 1===t?r?e.op_1_lvl??e.opt1Level??0:e.op_1_lvl??0:2===t?r?e.op_2_lvl??e.opt2Level??0:e.op_2_lvl??0:r?e.op_3_lvl??e.opt3Level??0:e.op_3_lvl??0}function n(e=[],t=[]){let r=0,a=0,s=1,o=1,d=1,c=!1,u=0,p=[];e.forEach(e=>{let n;if(!(n=void 0!==e.part?e.part:i(t,e)))return;let m=l(e,1),h=l(e,2),g=l(e,3),x=e.applyDuration||!1,f=(n.base_en||0)+(n.op_1_en||0)*m+(n.op_2_en||0)*h+(n.op_3_en||0)*g,y=n.duration,b=n.percentage;y?(d*=f,c=!0):b?(s*=f,x&&(o*=f)):(r+=f,x&&(a+=f));let v=Math.floor((n.base_tp||0)+(n.op_1_tp||0)*m+(n.op_2_tp||0)*h+(n.op_3_tp||0)*g);if(v>0){let e=`${v} TP: ${n.name}`;m>0&&(e+=` (Opt1 ${m})`),h>0&&(e+=` (Opt2 ${h})`),g>0&&(e+=` (Opt3 ${g})`),p.push(e)}u+=v}),c||(d=0);let m=r*s+(d+1)*a*o-a*o;return{totalEnergy:Math.ceil(m),totalTP:u,tpSources:p,energyRaw:m}}function o(e,t){let r="Basic";return"quick"===e?r="Quick":"free"===e?r="Free":"long3"===e?r="Long (3)":"long4"===e&&(r="Long (4)"),t?`${r} Reaction`:`${r} Action`}function d(e=[],r=[]){let a=e.find(e=>Number(e.part?.id??e.id)===t.POWER_RANGE||"Power Range"===(e.part?.name||e.name));if(!a)return"1 space";let s=3+3*l(a,1);return`${s} ${s>1?"spaces":"space"}`}function c(e=[],r=[]){let a=[t.SPHERE_OF_EFFECT,t.CYLINDER_OF_EFFECT,t.CONE_OF_EFFECT,t.LINE_OF_EFFECT,t.TRAIL_OF_EFFECT],s=["Sphere","Cylinder","Cone","Line","Trail"];for(let t=0;t<a.length;t++)if(e.find(e=>Number(e.part?.id??e.id)===a[t]||(e.part?.name||e.name)===`${s[t]} of Effect`))return s[t];return"1 target"}function u(e=[],r=[]){let a=(t,r)=>e.find(e=>Number(e.part?.id??e.id)===t||(e.part?.name||e.name)===r),s=e=>e?l(e,1):0;if(a(t.DURATION_PERMANENT,"Duration (Permanent)"))return"Permanent";let i=a(t.DURATION_ROUND,"Duration (Round)");if(i){let e=2+s(i);return`${e} ${e>1?"rounds":"round"}`}let n=a(t.DURATION_MINUTE,"Duration (Minute)");if(n){let e=[1,10,30][s(n)]||1;return`${e} minute${e>1?"s":""}`}let o=a(t.DURATION_HOUR,"Duration (Hour)");if(o){let e=[1,6,12][s(o)]||1;return`${e} hour${e>1?"s":""}`}let d=a(t.DURATION_DAYS,"Duration (Days)");if(d){let e=[1,10,20,30][s(d)]||1;return`${e} day${e>1?"s":""}`}return"1 round"}function p(e,r){let a=Array.isArray(e.parts)?e.parts.map(e=>({id:e.id,name:e.name,op_1_lvl:e.op_1_lvl||0,op_2_lvl:e.op_2_lvl||0,op_3_lvl:e.op_3_lvl||0,applyDuration:e.applyDuration||!1})):[],s=n(a,r),o=function(e=[],r=[]){let a="Basic",s=!1;return e.forEach(e=>{let n;if(e.part?.id!==void 0)n=Number(e.part.id);else if(void 0!==e.id)n=e.id;else if(e.part?.name||e.name){let t=i(r,{name:e.part?.name||e.name});n=t?Number(t.id):void 0}let o=l(e,1);n===t.POWER_REACTION?s=!0:n===t.POWER_QUICK_OR_FREE_ACTION?0===o?a="Quick":1===o&&(a="Free"):n===t.POWER_LONG_ACTION&&(0===o?a="Long (3)":1===o&&(a="Long (4)"))}),s?`${a} Reaction`:`${a} Action`}(a,r),p=d(a,r),m=c(a,r),h=u(a,r),g=a.map(e=>{let t,a,s,l,n,o=i(r,e);return o?(t=e.op_1_lvl||0,a=e.op_2_lvl||0,s=e.op_3_lvl||0,l=Math.floor((o.base_tp||0)+(o.op_1_tp||0)*t+(o.op_2_tp||0)*a+(o.op_3_tp||0)*s),n=o.name,t>0&&(n+=` (Opt1 ${t})`),a>0&&(n+=` (Opt2 ${a})`),s>0&&(n+=` (Opt3 ${s})`),l>0&&(n+=` | TP: ${l}`),{text:n,description:o.description||"",finalTP:l,hasTP:l>0}):null}).filter(e=>null!==e);return{name:e.name||"",description:e.description||"",actionType:o,range:p,area:m,duration:h,energy:s.totalEnergy,tp:s.totalTP,tpSources:s.tpSources,partChips:g}}function m(e){if(!Array.isArray(e))return"";let t=e.find(e=>e&&e.amount&&e.size&&e.type&&"none"!==e.type);return t?`${t.amount}d${t.size} ${t.type}`:""}function h(e){return e&&e.amount&&e.size&&"0"!==e.amount&&"0"!==e.size?`+${e.amount}d${e.size}`:""}function g(e,t){let r="Basic";return"quick"===e?r="Quick":"free"===e?r="Free":"long3"===e?r="Long (3)":"long4"===e&&(r="Long (4)"),t?`${r} Reaction`:`${r} Action`}function x(e=[],r=[]){let a=0,s=1,l=0,n=[];e.forEach(e=>{let o=i(r,{id:e.id??e.part?.id,name:e.name??e.part?.name});if(!o)return;let d=e.op_1_lvl||0,c=e.op_2_lvl||0,u=e.op_3_lvl||0,p=(o.base_en||0)+(o.op_1_en||0)*d+(o.op_2_en||0)*c+(o.op_3_en||0)*u;o.percentage?s*=p:a+=p;let m=(o.op_1_tp||0)*d;(("string"==typeof o.id?parseInt(o.id,10):o.id)===t.ADDITIONAL_DAMAGE||"Additional Damage"===o.name)&&(m=Math.floor(m));let h=Math.floor((o.base_tp||0)+m+(o.op_2_tp||0)*c+(o.op_3_tp||0)*u);if(h>0){let e=`${h} TP: ${o.name}`;d>0&&(e+=` (Opt1 ${d})`),c>0&&(e+=` (Opt2 ${c})`),u>0&&(e+=` (Opt3 ${u})`),n.push(e)}l+=h});let o=a*s;return{totalEnergy:Math.ceil(o),totalTP:l,tpSources:n,energyRaw:o}}function f(e,r){let a=Array.isArray(e.parts)?e.parts.map(e=>({id:e.id,name:e.name,op_1_lvl:e.op_1_lvl||0,op_2_lvl:e.op_2_lvl||0,op_3_lvl:e.op_3_lvl||0})):[],s=x(a,r),l=function(e=[],r=[]){let a="Basic",s=!1;return e.forEach(e=>{let l=e.id;if(void 0===l&&e.name){let t=i(r,{name:e.name});l=t?.id!==void 0?Number(t.id):void 0}let n=e.op_1_lvl||0;l===t.REACTION?s=!0:l===t.QUICK_OR_FREE_ACTION?0===n?a="Quick":1===n&&(a="Free"):l===t.LONG_ACTION?0===n?a="Long (3)":1===n&&(a="Long (4)"):"Reaction"===e.name?s=!0:"Quick or Free Action"===e.name?0===n?a="Quick":1===n&&(a="Free"):"Long Action"===e.name&&(0===n?a="Long (3)":1===n&&(a="Long (4)"))}),s?`${a} Reaction`:`${a} Action`}(a,r),n=h(e.damage),o=e.weapon&&(e.weapon.name||e.weapon.id)?e.weapon.name||`Weapon #${e.weapon.id}`:"Unarmed",d=a.map(e=>{let a,s,l,n,o,d,c=i(r,e);return c?(a=e.op_1_lvl||0,s=e.op_2_lvl||0,l=e.op_3_lvl||0,n=(c.op_1_tp||0)*a,(("string"==typeof c.id?parseInt(c.id,10):c.id)===t.ADDITIONAL_DAMAGE||"Additional Damage"===c.name)&&(n=Math.floor(n)),o=Math.floor((c.base_tp||0)+n+(c.op_2_tp||0)*s+(c.op_3_tp||0)*l),d=c.name||"",a>0&&(d+=` (Opt1 ${a})`),s>0&&(d+=` (Opt2 ${s})`),l>0&&(d+=` (Opt3 ${l})`),o>0&&(d+=` | TP: ${o}`),{text:d,description:c.description||"",finalTP:o,hasTP:o>0}):null}).filter(e=>null!==e);return{name:e.name||"",description:e.description||"",weaponName:o,actionType:l,damageStr:n,energy:s.totalEnergy,tp:s.totalTP,tpSources:s.tpSources,partChips:d}}e.s(["GENERAL_PROPERTY_IDS",0,a,"GENERAL_PROPERTY_NAMES",0,s,"PART_IDS",0,t,"PROPERTY_IDS",0,r,"findByIdOrName",()=>i],81547),e.s(["calculatePowerCosts",()=>n,"computeActionTypeFromSelection",()=>o,"deriveArea",()=>c,"deriveDuration",()=>u,"derivePowerDisplay",()=>p,"deriveRange",()=>d,"formatPowerDamage",()=>m],92006),e.s(["calculateTechniqueCosts",()=>x,"computeActionTypeFromSelection",()=>g,"deriveTechniqueDisplay",()=>f,"formatTechniqueDamage",()=>h],15324)},33060,e=>{"use strict";let t=(0,e.i(75254).default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);e.s(["Wand2",()=>t],33060)},36121,e=>{"use strict";let t=(0,e.i(75254).default)("swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);e.s(["Swords",()=>t],36121)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},91065,58620,29460,78689,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(64659),s=e.i(55900),i=e.i(43531),l=e.i(75254);let n=(0,l.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var o=e.i(27612);let d=(0,l.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),c=(0,l.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var u=e.i(63209);let p={default:"bg-muted text-muted-foreground",primary:"bg-primary/20 text-primary",success:"bg-green-500/20 text-green-400",warning:"bg-yellow-500/20 text-yellow-400",danger:"bg-red-500/20 text-red-400",info:"bg-blue-500/20 text-blue-400"};function m({item:e,mode:l="view",actions:m,showDetails:h=!1,compact:g=!1,className:x=""}){let[f,y]=(0,r.useState)(h),b=e.details&&e.details.length>0||e.description,v="select"===l,N="manage"===l,E=()=>{v&&!e.isDisabled?e.isSelected?m?.onDeselect?.(e):m?.onSelect?.(e):b&&y(!f)};return(0,t.jsxs)("div",{className:`
        rounded-lg border transition-all duration-200
        ${e.isSelected?"border-primary bg-primary/10 ring-1 ring-primary":"border-border bg-card hover:border-primary/50"}
        ${e.isDisabled?"opacity-50 cursor-not-allowed":v||b?"cursor-pointer":""}
        ${g?"p-2":"p-3"}
        ${x}
      `,onClick:E,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),E())},tabIndex:v&&!e.isDisabled?0:void 0,role:v?"button":void 0,"aria-pressed":v?e.isSelected:void 0,"aria-disabled":e.isDisabled,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[v&&(0,t.jsx)("div",{className:`
                mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 transition-colors
                ${e.isSelected?"bg-primary border-primary":"border-muted-foreground/40"}
                ${e.isDisabled?"opacity-50":""}
              `,children:e.isSelected&&(0,t.jsx)(i.Check,{className:"w-3 h-3 text-primary-foreground"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h3",{className:`font-medium text-foreground truncate ${g?"text-sm":""}`,children:e.name}),e.subtitle&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.subtitle})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!g&&e.stats&&e.stats.length>0&&(0,t.jsx)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:e.stats.slice(0,3).map((e,r)=>(0,t.jsxs)("span",{className:"whitespace-nowrap",children:[(0,t.jsxs)("span",{className:"text-xs opacity-70",children:[e.label,":"]})," ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:e.value})]},r))}),void 0!==e.cost&&(0,t.jsxs)("span",{className:"text-sm font-medium text-primary whitespace-nowrap",children:[e.cost," ",e.costLabel]}),N&&(0,t.jsxs)("div",{className:"flex items-center gap-1",onClick:e=>e.stopPropagation(),children:[m?.onView&&(0,t.jsx)("button",{onClick:()=>m.onView?.(e),className:"p-1.5 rounded hover:bg-muted transition-colors",title:"View",children:(0,t.jsx)(c,{className:"w-4 h-4 text-muted-foreground"})}),m?.onEdit&&(0,t.jsx)("button",{onClick:()=>m.onEdit?.(e),className:"p-1.5 rounded hover:bg-muted transition-colors",title:"Edit",children:(0,t.jsx)(n,{className:"w-4 h-4 text-muted-foreground"})}),m?.onDuplicate&&(0,t.jsx)("button",{onClick:()=>m.onDuplicate?.(e),className:"p-1.5 rounded hover:bg-muted transition-colors",title:"Duplicate",children:(0,t.jsx)(d,{className:"w-4 h-4 text-muted-foreground"})}),m?.onDelete&&(0,t.jsx)("button",{onClick:()=>m.onDelete?.(e),className:"p-1.5 rounded hover:bg-destructive/20 transition-colors",title:"Delete",children:(0,t.jsx)(o.Trash2,{className:"w-4 h-4 text-destructive"})})]}),b&&!N&&(0,t.jsx)("button",{className:"p-1 rounded hover:bg-muted transition-colors",onClick:e=>{e.stopPropagation(),y(!f)},children:f?(0,t.jsx)(s.ChevronUp,{className:"w-4 h-4 text-muted-foreground"}):(0,t.jsx)(a.ChevronDown,{className:"w-4 h-4 text-muted-foreground"})})]})]}),e.badges&&e.badges.length>0&&(0,t.jsx)("div",{className:`flex flex-wrap gap-1 ${g?"mt-1":"mt-2"}`,children:e.badges.map((e,r)=>(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${p[e.variant]}`,children:e.label},r))}),e.tags&&e.tags.length>0&&!g&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((e,r)=>(0,t.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:e},r))}),e.isDisabled&&e.disabledReason&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-destructive",children:[(0,t.jsx)(u.AlertCircle,{className:"w-3 h-3 flex-shrink-0"}),(0,t.jsx)("span",{children:e.disabledReason})]}),f&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-border space-y-2",children:[e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),e.details&&e.details.map((e,r)=>(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("span",{className:"font-medium text-foreground",children:[e.label,": "]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:Array.isArray(e.value)?e.value.join(", "):e.value})]},r)),e.requirements&&e.requirements.length>0&&(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Requirements: "}),(0,t.jsx)("span",{className:"text-muted-foreground",children:e.requirements.map((r,a)=>(0,t.jsxs)("span",{className:r.met?"text-green-400":"text-red-400",children:[r.name," ",r.value,a<e.requirements.length-1?", ":""]},a))})]})]})]})}var h=e.i(55436);let g=(0,l.default)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),x=(0,l.default)("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),f=(0,l.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),y=(0,l.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),b=(0,l.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var v=e.i(37727);function N({items:e,mode:a="view",actions:s,layout:i="list",columns:l=1,compact:n=!1,filterOptions:o=[],sortOptions:d=[],defaultSort:c={field:"name",direction:"asc"},searchable:u=!0,searchPlaceholder:p="Search items...",searchFields:N=["name","description","type","category"],selectedIds:E,onSelectionChange:_,maxSelections:A,showHeader:w=!0,showCount:j=!0,emptyMessage:R="No items found",loading:T=!1,className:I=""}){let[C,D]=(0,r.useState)(new Set),[O,S]=(0,r.useState)({search:""}),[k,M]=(0,r.useState)(c),[L,P]=(0,r.useState)(i),[U,$]=(0,r.useState)(!1),q=E??C,G=(0,r.useCallback)(e=>{let t=new Set(q);if(1===A)t.clear(),t.add(e.id);else{if(A&&t.size>=A)return;t.add(e.id)}_?_(t):D(t),s?.onSelect?.(e)},[q,A,_,s]),F=(0,r.useCallback)(e=>{let t=new Set(q);t.delete(e.id),_?_(t):D(t),s?.onDeselect?.(e)},[q,_,s]),W=(0,r.useMemo)(()=>e.filter(e=>{if(O.search){let t=O.search.toLowerCase();if(!N.some(r=>{let a=e[r];return"string"==typeof a?a.toLowerCase().includes(t):!!Array.isArray(a)&&a.some(e=>String(e).toLowerCase().includes(t))}))return!1}for(let t of o){let r=O[t.id];if(void 0===r||""===r||Array.isArray(r)&&0===r.length)continue;let a=e[t.id];if("select"===t.type||"text"===t.type){if("string"==typeof r&&""!==r&&String(a).toLowerCase()!==r.toLowerCase())return!1}else if("multiselect"===t.type){if(Array.isArray(r)&&r.length>0){let e=String(a).toLowerCase();if(!r.some(t=>String(t).toLowerCase()===e))return!1}}else if("checkbox"===t.type&&!0===r&&!a)return!1}return!0}),[e,O,o,N]),H=(0,r.useMemo)(()=>[...W].sort((e,t)=>{let r=e[k.field],a=t[k.field],s=0;return s="string"==typeof r&&"string"==typeof a?r.localeCompare(a):"number"==typeof r&&"number"==typeof a?r-a:String(r??"").localeCompare(String(a??"")),"desc"===k.direction?-s:s}),[W,k]),Q=(0,r.useMemo)(()=>H.map(e=>({...e,isSelected:q.has(e.id)})),[H,q]),Y=()=>{S({search:""})},z=""!==O.search||o.some(e=>{let t=O[e.id];return void 0!==t&&""!==t&&(!Array.isArray(t)||t.length>0)});return(0,t.jsxs)("div",{className:`space-y-4 ${I}`,children:[w&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[u&&(0,t.jsxs)("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[(0,t.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)("input",{type:"text",value:O.search,onChange:e=>S(t=>({...t,search:e.target.value})),placeholder:p,className:"w-full pl-9 pr-4 py-2 rounded-lg border border-border bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),O.search&&(0,t.jsx)("button",{onClick:()=>S(e=>({...e,search:""})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:(0,t.jsx)(v.X,{className:"w-4 h-4"})})]}),o.length>0&&(0,t.jsxs)("button",{onClick:()=>$(!U),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${U||z?"border-primary bg-primary/10 text-primary":"border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:[(0,t.jsx)(f,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Filters"}),z&&(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-primary"})]}),d.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("select",{value:k.field,onChange:e=>M(t=>({...t,field:e.target.value})),className:"px-3 py-2 rounded-lg border border-border bg-background text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:d.map(e=>(0,t.jsx)("option",{value:e.field,children:e.label},e.id))}),(0,t.jsx)("button",{onClick:()=>M(e=>({...e,direction:"asc"===e.direction?"desc":"asc"})),className:"p-2 rounded-lg border border-border text-muted-foreground hover:text-foreground hover:border-primary/50 transition-colors",title:"asc"===k.direction?"Sort Ascending":"Sort Descending",children:"asc"===k.direction?(0,t.jsx)(g,{className:"w-4 h-4"}):(0,t.jsx)(x,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center border border-border rounded-lg overflow-hidden",children:[(0,t.jsx)("button",{onClick:()=>P("list"),className:`p-2 transition-colors ${"list"===L?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,title:"List view",children:(0,t.jsx)(b,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>P("grid"),className:`p-2 transition-colors ${"grid"===L?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,title:"Grid view",children:(0,t.jsx)(y,{className:"w-4 h-4"})})]}),j&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground ml-auto",children:[Q.length," item",1!==Q.length?"s":"","select"===a&&q.size>0&&(0,t.jsxs)(t.Fragment,{children:[" (",q.size," selected",A?` / ${A}`:"",")"]})]})]}),U&&o.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-end gap-4 p-4 rounded-lg border border-border bg-muted/30",children:[o.map(e=>(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-muted-foreground",children:e.label}),"select"===e.type&&e.options&&(0,t.jsxs)("select",{value:O[e.id]||"",onChange:t=>S(r=>({...r,[e.id]:t.target.value})),className:"px-3 py-1.5 rounded border border-border bg-background text-sm min-w-[140px]",children:[(0,t.jsx)("option",{value:"",children:"All"}),e.options.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),"checkbox"===e.type&&(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!O[e.id],onChange:t=>S(r=>({...r,[e.id]:t.target.checked})),className:"rounded border-border"}),(0,t.jsx)("span",{className:"text-sm",children:e.placeholder||"Yes"})]})]},e.id)),z&&(0,t.jsxs)("button",{onClick:Y,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-destructive hover:text-destructive/80 transition-colors",children:[(0,t.jsx)(v.X,{className:"w-3 h-3"}),"Clear"]})]})]}),T&&(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),!T&&0===Q.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:R}),z&&(0,t.jsx)("button",{onClick:Y,className:"mt-2 text-sm text-primary hover:underline",children:"Clear filters"})]}),!T&&Q.length>0&&(0,t.jsx)("div",{className:"grid"===L?`grid ${({1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"})[l]} gap-3`:"space-y-2",children:Q.map(e=>(0,t.jsx)(m,{item:e,mode:a,compact:n,actions:{...s,onSelect:G,onDeselect:F}},e.id))})]})}function E({isOpen:e,onClose:a,onConfirm:s,items:l,title:n,description:o,maxSelections:d,initialSelectedIds:c=new Set,filterOptions:u=[],sortOptions:p=[],searchPlaceholder:m,validateSelection:h,loading:g=!1}){let[x,f]=(0,r.useState)(c),[y,b]=(0,r.useState)();(0,r.useEffect)(()=>{e&&(f(new Set(c)),b(void 0))},[e,c]);let E=(0,r.useCallback)(()=>l.filter(e=>x.has(e.id)),[l,x]);if((0,r.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&a()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,a]),(0,r.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e)return null;let _=x.size;return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),(0,t.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] m-4 flex flex-col bg-card rounded-xl shadow-xl border border-border overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 p-4 border-b border-border",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{id:"modal-title",className:"text-xl font-semibold text-foreground",children:n}),o&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:o})]}),(0,t.jsx)("button",{onClick:a,className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:(0,t.jsx)(v.X,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-4",children:(0,t.jsx)(N,{items:l,mode:"select",selectedIds:x,onSelectionChange:e=>{f(e),b(void 0)},maxSelections:d,filterOptions:u,sortOptions:p,searchPlaceholder:m,loading:g,emptyMessage:"No items available"})}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4 border-t border-border bg-muted/30",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[_," selected",d&&` / ${d} max`]}),y&&(0,t.jsx)("div",{className:"text-sm text-destructive",children:y}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 rounded-lg border border-border text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{onClick:()=>{let e=E();if(h){let t=h(e);if(!t.valid)return void b(t.message)}s(e),a()},disabled:0===_,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(i.Check,{className:"w-4 h-4"}),"Confirm Selection"]})]})]})]})]})}function _(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}function A(e,t){let r=[],a=[],s=[];return void 0!==e.cost&&r.push({label:"Cost",value:`${e.cost} PP`}),e.action&&r.push({label:"Action",value:_(e.action)}),e.range&&r.push({label:"Range",value:String(e.range)}),e.school&&s.push({label:_(e.school),variant:"info"}),e.area&&a.push({label:"Area",value:e.area}),e.duration&&a.push({label:"Duration",value:e.duration}),e.targets&&a.push({label:"Targets",value:e.targets}),e.damage&&a.push({label:"Damage",value:e.damage}),e.healing&&a.push({label:"Healing",value:e.healing}),e.effects?.length&&a.push({label:"Effects",value:e.effects}),{id:e.id||e.name,name:e.name,description:e.description,category:"power",type:e.school,cost:e.cost,costLabel:"PP",stats:r,details:a,badges:s,tags:e.tags,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function w(e,t){let r=[],a=[],s=[];return void 0!==e.cost&&r.push({label:"Cost",value:`${e.cost} TP`}),e.action&&r.push({label:"Action",value:_(e.action)}),e.range&&r.push({label:"Range",value:String(e.range)}),e.type&&s.push({label:_(e.type),variant:"primary"}),e.weaponType&&s.push({label:e.weaponType,variant:"default"}),e.damage&&a.push({label:"Damage",value:e.damage}),e.effects?.length&&a.push({label:"Effects",value:e.effects}),{id:e.id||e.name,name:e.name,description:e.description,category:"technique",type:e.type,cost:e.cost,costLabel:"TP",stats:r,details:a,badges:s,tags:e.tags,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function j(e,t){let r=[],a=[],s=[];return e.damage&&r.push({label:"Damage",value:e.damage}),e.damageType&&s.push({label:_(e.damageType),variant:"warning"}),e.type&&s.push({label:_(e.type),variant:"primary"}),e.range&&r.push({label:"Range",value:String(e.range)}),e.hands&&r.push({label:"Hands",value:e.hands}),e.properties?.length&&a.push({label:"Properties",value:e.properties}),e.weight&&a.push({label:"Weight",value:`${e.weight} lb`}),{id:e.id||e.name,name:e.name,description:e.description,category:"weapon",type:e.type,cost:e.cost,costLabel:"gp",stats:r,details:a,badges:s,tags:e.properties,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function R(e,t){var r;let a=[],s=[],i=[];return void 0!==e.defense&&a.push({label:"Defense",value:(r=e.defense)>=0?`+${r}`:`${r}`}),e.type&&i.push({label:_(e.type),variant:"primary"}),e.properties?.length&&s.push({label:"Properties",value:e.properties}),e.weight&&s.push({label:"Weight",value:`${e.weight} lb`}),e.strengthReq&&s.push({label:"Str Req",value:e.strengthReq}),{id:e.id||e.name,name:e.name,description:e.description,category:"armor",type:e.type,cost:e.cost,costLabel:"gp",stats:a,details:s,badges:i,tags:e.properties,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function T(e,t){var r;let a=[],s=[],i=[];return void 0!==e.cost&&a.push({label:"Cost",value:(r=e.cost)>=1?`${r} gp`:r>=.1?`${Math.round(10*r)} sp`:`${Math.round(100*r)} cp`}),e.type&&i.push({label:_(e.type),variant:"info"}),e.weight&&s.push({label:"Weight",value:`${e.weight} lb`}),{id:e.id||e.name,name:e.name,description:e.description,category:"equipment",type:e.type||e.category,cost:e.cost,costLabel:"gp",stats:a,details:s,badges:i,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function I(e,t){let r=[],a=[],s=[];if(void 0!==e.level&&r.push({label:"Level",value:e.level}),void 0!==e.hp&&r.push({label:"HP",value:e.hp}),void 0!==e.defense&&r.push({label:"Def",value:e.defense}),e.type&&a.push({label:_(e.type),variant:"primary"}),e.size&&a.push({label:_(e.size),variant:"info"}),e.abilities){let t=Object.entries(e.abilities).map(([e,t])=>`${e.slice(0,3).toUpperCase()} ${t}`).join(", ");s.push({label:"Abilities",value:t})}return e.traits?.length&&s.push({label:"Traits",value:e.traits}),{id:e.id||e.name,name:e.name,description:e.description,category:"creature",type:e.type,stats:r,badges:a,details:s,tags:e.traits,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}e.s(["ItemList",()=>N],58620),e.s(["ItemSelectionModal",()=>E],29460),e.s([],91065),e.s(["transformArmor",()=>R,"transformCreature",()=>I,"transformEquipment",()=>T,"transformPower",()=>A,"transformTechnique",()=>w,"transformWeapon",()=>j],78689)},40144,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016),s=e.i(7233),i=e.i(33060),l=e.i(36121),n=e.i(98919);let o=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.i(79121);var d=e.i(49838);e.i(84004);var c=e.i(23495);e.i(91065);var u=e.i(58620),p=e.i(78689),m=e.i(92006),h=e.i(15324);e.i(64485);var g=e.i(46775),x=e.i(66923);let f=[{id:"powers",label:"Powers",icon:(0,t.jsx)(i.Wand2,{className:"w-4 h-4"}),createHref:"/power-creator",createLabel:"Create Power"},{id:"techniques",label:"Techniques",icon:(0,t.jsx)(l.Swords,{className:"w-4 h-4"}),createHref:"/technique-creator",createLabel:"Create Technique"},{id:"items",label:"Items",icon:(0,t.jsx)(n.Shield,{className:"w-4 h-4"}),createHref:"/item-creator",createLabel:"Create Item"},{id:"creatures",label:"Creatures",icon:(0,t.jsx)(o,{className:"w-4 h-4"}),createHref:"/creature-creator",createLabel:"Create Creature"}];function y(){return(0,t.jsx)(c.ProtectedRoute,{children:(0,t.jsx)(b,{})})}function b(){let[e,i]=(0,r.useState)("powers"),[l,n]=(0,r.useState)(null),{data:o=[]}=(0,g.useUserPowers)(),{data:c=[]}=(0,g.useUserTechniques)(),{data:u=[]}=(0,g.useUserItems)(),{data:p=[]}=(0,g.useUserCreatures)(),m={powers:o.length,techniques:c.length,items:u.length,creatures:p.length},h=f.find(t=>t.id===e);return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"My Library"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Your custom powers, techniques, items, and creatures"})]}),(0,t.jsxs)(a.default,{href:h.createHref,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4"}),h.createLabel]})]}),(0,t.jsx)("div",{className:"border-b border-border mb-6",children:(0,t.jsx)("nav",{className:"flex gap-2 overflow-x-auto",children:f.map(r=>(0,t.jsxs)("button",{onClick:()=>i(r.id),className:(0,d.cn)("flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap",e===r.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"),children:[r.icon,r.label,(0,t.jsx)("span",{className:(0,d.cn)("px-1.5 py-0.5 text-xs rounded-full",e===r.id?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:m[r.id]})]},r.id))})}),"powers"===e&&(0,t.jsx)(N,{onDelete:e=>n({type:"powers",item:e})}),"techniques"===e&&(0,t.jsx)(_,{onDelete:e=>n({type:"techniques",item:e})}),"items"===e&&(0,t.jsx)(w,{onDelete:e=>n({type:"items",item:e})}),"creatures"===e&&(0,t.jsx)(R,{onDelete:e=>n({type:"creatures",item:e})}),l&&(0,t.jsx)(C,{type:l.type,item:l.item,onClose:()=>n(null)})]})}let v=[{id:"name",label:"Name",field:"name",type:"string"},{id:"cost",label:"Energy",field:"cost",type:"number"}];function N({onDelete:e}){let{data:a,isLoading:s,error:i}=(0,g.useUserPowers)(),{data:l=[]}=(0,x.usePowerParts)(),n=(0,r.useMemo)(()=>a&&l.length?a.map(e=>{let t=(0,m.derivePowerDisplay)({name:e.name,description:e.description,parts:e.parts||[],damage:e.damage},l),r=(0,m.formatPowerDamage)(e.damage),a=[{label:"Energy",value:String(t.energy)},{label:"Action",value:t.actionType},{label:"Duration",value:t.duration},{label:"Range",value:t.range},{label:"Area",value:t.area}];r&&a.push({label:"Damage",value:r});let s=[];return t.tp>0&&s.push({label:"Training Points",value:String(t.tp)}),t.tpSources.length>0&&s.push({label:"TP Breakdown",value:t.tpSources}),{id:e.docId,name:e.name,description:e.description,category:"power",cost:t.energy,costLabel:"EN",stats:a,details:s,badges:[],sourceData:e}}):[],[a,l]);return i?(0,t.jsx)(I,{message:"Failed to load powers"}):s||0!==n.length?(0,t.jsx)(u.ItemList,{items:n,mode:"manage",layout:"list",actions:{onEdit:e=>{window.location.href=`/power-creator?edit=${e.id}`},onDelete:e,onDuplicate:e=>{window.location.href=`/power-creator?copy=${e.id}`}},sortOptions:v,searchPlaceholder:"Search powers...",loading:s,emptyMessage:"No powers found"}):(0,t.jsx)(T,{type:"powers",href:"/power-creator"})}let E=[{id:"name",label:"Name",field:"name",type:"string"},{id:"cost",label:"TP",field:"cost",type:"number"}];function _({onDelete:e}){let{data:a,isLoading:s,error:i}=(0,g.useUserTechniques)(),{data:l=[]}=(0,x.useTechniqueParts)(),n=(0,r.useMemo)(()=>a&&l.length?a.map(e=>{let t=(0,h.deriveTechniqueDisplay)({name:e.name,description:e.description,parts:e.parts||[],damage:e.damage?.[0],weapon:e.weapon},l),r=[{label:"Energy",value:String(t.energy)},{label:"TP",value:String(t.tp)},{label:"Action",value:t.actionType},{label:"Weapon",value:t.weaponName}];t.damageStr&&r.push({label:"Damage",value:t.damageStr});let a=[];return t.tpSources.length>0&&a.push({label:"TP Breakdown",value:t.tpSources}),{id:e.docId,name:e.name,description:e.description,category:"technique",cost:t.tp,costLabel:"TP",stats:r,details:a,badges:"Unarmed"!==t.weaponName?[{label:t.weaponName,variant:"default"}]:[],sourceData:e}}):[],[a,l]);return i?(0,t.jsx)(I,{message:"Failed to load techniques"}):s||0!==n.length?(0,t.jsx)(u.ItemList,{items:n,mode:"manage",layout:"list",actions:{onEdit:e=>{window.location.href=`/technique-creator?edit=${e.id}`},onDelete:e,onDuplicate:e=>{window.location.href=`/technique-creator?copy=${e.id}`}},sortOptions:E,searchPlaceholder:"Search techniques...",loading:s,emptyMessage:"No techniques found"}):(0,t.jsx)(T,{type:"techniques",href:"/technique-creator"})}let A=[{id:"name",label:"Name",field:"name",type:"string"},{id:"type",label:"Type",field:"type",type:"string"}];function w({onDelete:e}){let{data:a,isLoading:s,error:i}=(0,g.useUserItems)(),{data:l}=(0,x.useItemProperties)(),n=(0,r.useMemo)(()=>a?a.map(e=>"weapon"===e.type?(0,p.transformWeapon)({id:e.docId,name:e.name,description:e.description,damage:e.damage,properties:e.properties,type:"weapon"}):"armor"===e.type?(0,p.transformArmor)({id:e.docId,name:e.name,description:e.description,defense:e.armorValue,properties:e.properties,type:"armor"}):(0,p.transformEquipment)({id:e.docId,name:e.name,description:e.description,type:e.type})):[],[a]);return i?(0,t.jsx)(I,{message:"Failed to load items"}):s||0!==n.length?(0,t.jsx)(u.ItemList,{items:n,mode:"manage",layout:"list",actions:{onEdit:e=>{window.location.href=`/item-creator?edit=${e.id}`},onDelete:e,onDuplicate:e=>{window.location.href=`/item-creator?copy=${e.id}`}},sortOptions:A,searchPlaceholder:"Search items...",loading:s,emptyMessage:"No items found"}):(0,t.jsx)(T,{type:"items",href:"/item-creator"})}let j=[{id:"name",label:"Name",field:"name",type:"string"},{id:"level",label:"Level",field:"cost",type:"number"}];function R({onDelete:e}){let{data:a,isLoading:s,error:i}=(0,g.useUserCreatures)(),l=(0,r.useMemo)(()=>a?a.map(e=>(0,p.transformCreature)({id:e.docId,name:e.name,description:e.description,level:e.level,type:e.type,size:e.size,hp:e.hp,abilities:e.abilities})):[],[a]);return i?(0,t.jsx)(I,{message:"Failed to load creatures"}):s||0!==l.length?(0,t.jsx)(u.ItemList,{items:l,mode:"manage",layout:"list",actions:{onEdit:e=>{window.location.href=`/creature-creator?edit=${e.id}`},onDelete:e,onDuplicate:e=>{window.location.href=`/creature-creator?copy=${e.id}`}},sortOptions:j,searchPlaceholder:"Search creatures...",loading:s,emptyMessage:"No creatures found"}):(0,t.jsx)(T,{type:"creatures",href:"/creature-creator"})}function T({type:e,href:r}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,t.jsxs)("div",{className:"w-16 h-16 mb-4 rounded-full bg-muted flex items-center justify-center",children:["powers"===e&&(0,t.jsx)(i.Wand2,{className:"w-8 h-8 text-muted-foreground"}),"techniques"===e&&(0,t.jsx)(l.Swords,{className:"w-8 h-8 text-muted-foreground"}),"items"===e&&(0,t.jsx)(n.Shield,{className:"w-8 h-8 text-muted-foreground"}),"creatures"===e&&(0,t.jsx)(o,{className:"w-8 h-8 text-muted-foreground"})]}),(0,t.jsxs)("h3",{className:"text-lg font-medium text-foreground mb-2",children:["No ",e," yet"]}),(0,t.jsxs)("p",{className:"text-muted-foreground mb-6 max-w-sm",children:["Create your first ",e.slice(0,-1)," to see it here in your library."]}),(0,t.jsxs)(a.default,{href:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4"}),"Create ",e.slice(0,-1)]})]})}function I({message:e}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("p",{className:"text-destructive font-medium",children:e}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm mt-1",children:"Please try again later"})]})}function C({type:e,item:r,onClose:a}){let s=(0,g.useDeletePower)(),i=(0,g.useDeleteTechnique)(),l=(0,g.useDeleteItem)(),n=(0,g.useDeleteCreature)(),o=s.isPending||i.isPending||l.isPending||n.isPending,d=async()=>{try{switch(e){case"powers":await s.mutateAsync(r.id);break;case"techniques":await i.mutateAsync(r.id);break;case"items":await l.mutateAsync(r.id);break;case"creatures":await n.mutateAsync(r.id)}a()}catch(e){console.error("Failed to delete:",e)}};return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60",onClick:a}),(0,t.jsxs)("div",{className:"relative bg-card rounded-xl shadow-xl border border-border p-6 max-w-md mx-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:["Delete ",r.name,"?"]}),(0,t.jsxs)("p",{className:"text-muted-foreground mb-6",children:["This action cannot be undone. This will permanently delete the ",e.slice(0,-1)," from your library."]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsx)("button",{onClick:a,disabled:o,className:"px-4 py-2 rounded-lg border border-border text-muted-foreground hover:text-foreground hover:bg-muted transition-colors disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:d,disabled:o,className:"px-4 py-2 rounded-lg bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors disabled:opacity-50",children:o?"Deleting...":"Delete"})]})]})]})}e.s(["default",()=>y],40144)}]);