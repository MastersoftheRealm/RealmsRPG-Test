{"version":3,"sources":["../../../../src/components/character-creator/creator-tab-bar.tsx","../../../../src/components/character-creator/steps/archetype-step.tsx","../../../../src/components/character-creator/steps/species-step.tsx","../../../../src/components/character-creator/steps/ancestry-step.tsx","../../../../src/components/character-creator/steps/abilities-step.tsx","../../../../src/components/character-creator/steps/skills-step.tsx","../../../../src/components/character-creator/steps/feats-step.tsx","../../../../src/components/character-creator/steps/equipment-step.tsx","../../../../src/components/character-creator/steps/powers-step.tsx","../../../../src/components/character-creator/steps/finalize-step.tsx","../../../../src/app/%28main%29/characters/new/page.tsx","../../../../node_modules/lucide-react/src/icons/external-link.ts","../../../../node_modules/lucide-react/src/icons/scale.ts","../../../../node_modules/lucide-react/src/icons/ruler.ts"],"sourcesContent":["/**\r\n * Creator Tab Bar\r\n * ===============\r\n * Navigation tabs for character creation wizard\r\n */\r\n\r\n'use client';\r\n\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore, STEP_ORDER, type CreatorStep } from '@/stores/character-creator-store';\r\n\r\nconst STEP_LABELS: Record<CreatorStep, string> = {\r\n  archetype: '1. Archetype',\r\n  species: '2. Species',\r\n  ancestry: '3. Ancestry',\r\n  abilities: '4. Abilities',\r\n  skills: '5. Skills',\r\n  feats: '6. Feats',\r\n  equipment: '7. Equipment',\r\n  powers: '8. Powers',\r\n  finalize: '9. Finalize',\r\n};\r\n\r\nexport function CreatorTabBar() {\r\n  const { currentStep, completedSteps, setStep, canNavigateToStep, resetCreator } = useCharacterCreatorStore();\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap items-center gap-1 p-2 bg-gray-100 rounded-lg mb-4\">\r\n      {STEP_ORDER.map((step) => {\r\n        const isActive = currentStep === step;\r\n        const isComplete = completedSteps.includes(step);\r\n        const canNavigate = canNavigateToStep(step);\r\n\r\n        return (\r\n          <button\r\n            key={step}\r\n            onClick={() => setStep(step)}\r\n            disabled={!canNavigate}\r\n            className={cn(\r\n              'px-3 py-2 rounded-lg text-sm font-medium transition-all',\r\n              isActive && 'bg-primary-600 text-white shadow-md',\r\n              !isActive && isComplete && 'bg-green-100 text-green-700 hover:bg-green-200',\r\n              !isActive && !isComplete && canNavigate && 'bg-white text-gray-600 hover:bg-gray-50',\r\n              !isActive && !isComplete && !canNavigate && 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n            )}\r\n          >\r\n            {isComplete && !isActive && '✓ '}\r\n            {STEP_LABELS[step]}\r\n          </button>\r\n        );\r\n      })}\r\n      \r\n      <button\r\n        onClick={() => {\r\n          if (confirm('Are you sure you want to restart? All progress will be lost.')) {\r\n            resetCreator();\r\n          }\r\n        }}\r\n        className=\"ml-auto px-3 py-2 rounded-lg text-sm font-medium bg-red-100 text-red-700 hover:bg-red-200 transition-colors\"\r\n      >\r\n        Restart\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Archetype Step\r\n * ==============\r\n * Choose character archetype (Power, Martial, or Powered-Martial)\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport type { ArchetypeCategory, AbilityName } from '@/types';\r\n\r\nconst ABILITIES: AbilityName[] = ['strength', 'vitality', 'agility', 'acuity', 'intelligence', 'charisma'];\r\n\r\nconst ARCHETYPE_INFO: Record<ArchetypeCategory, { title: string; description: string }> = {\r\n  power: {\r\n    title: 'Power',\r\n    description: 'Focus on supernatural, magical, or extraordinary abilities. You excel at manipulating energy and casting powerful effects.',\r\n  },\r\n  'powered-martial': {\r\n    title: 'Powered-Martial',\r\n    description: 'A balanced blend of martial prowess and supernatural abilities. You can fight effectively while also wielding power.',\r\n  },\r\n  martial: {\r\n    title: 'Martial',\r\n    description: 'Master of physical combat and martial techniques. You rely on skill, training, and physical prowess.',\r\n  },\r\n};\r\n\r\nexport function ArchetypeStep() {\r\n  const { draft, setArchetype, nextStep } = useCharacterCreatorStore();\r\n  \r\n  const [selectedType, setSelectedType] = useState<ArchetypeCategory | null>(\r\n    draft.archetype?.type || null\r\n  );\r\n  const [selectedAbility, setSelectedAbility] = useState<AbilityName | null>(\r\n    draft.pow_abil || draft.mart_abil || null\r\n  );\r\n  const [selectedMartialAbility, setSelectedMartialAbility] = useState<AbilityName | null>(\r\n    draft.mart_abil || null\r\n  );\r\n  \r\n  const isLocked = draft.archetype?.type !== undefined;\r\n\r\n  const handleConfirm = () => {\r\n    if (!selectedType || !selectedAbility) return;\r\n    \r\n    if (selectedType === 'powered-martial' && !selectedMartialAbility) return;\r\n    \r\n    setArchetype(\r\n      selectedType, \r\n      selectedAbility, \r\n      selectedType === 'powered-martial' ? selectedMartialAbility! : undefined\r\n    );\r\n    nextStep();\r\n  };\r\n\r\n  const canConfirm = selectedType && selectedAbility && \r\n    (selectedType !== 'powered-martial' || selectedMartialAbility);\r\n\r\n  if (isLocked) {\r\n    return (\r\n      <div className=\"max-w-2xl mx-auto\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Your Archetype</h1>\r\n        \r\n        <div className=\"bg-green-50 border border-green-200 rounded-xl p-6 mb-6\">\r\n          <h2 className=\"text-xl font-bold text-green-800 mb-2\">\r\n            {ARCHETYPE_INFO[draft.archetype!.type].title}\r\n          </h2>\r\n          <p className=\"text-green-700 mb-4\">\r\n            {ARCHETYPE_INFO[draft.archetype!.type].description}\r\n          </p>\r\n          \r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {draft.pow_abil && (\r\n              <span className=\"px-3 py-1 bg-purple-100 text-purple-700 rounded-full\">\r\n                Power Ability: {draft.pow_abil.charAt(0).toUpperCase() + draft.pow_abil.slice(1)}\r\n              </span>\r\n            )}\r\n            {draft.mart_abil && (\r\n              <span className=\"px-3 py-1 bg-red-100 text-red-700 rounded-full\">\r\n                Martial Ability: {draft.mart_abil.charAt(0).toUpperCase() + draft.mart_abil.slice(1)}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        <button\r\n          onClick={() => {\r\n            setSelectedType(null);\r\n            setSelectedAbility(null);\r\n            setSelectedMartialAbility(null);\r\n            useCharacterCreatorStore.setState({ \r\n              draft: { \r\n                ...draft, \r\n                archetype: undefined,\r\n                pow_abil: undefined,\r\n                mart_abil: undefined,\r\n              }\r\n            });\r\n          }}\r\n          className=\"text-gray-600 hover:text-gray-900 underline\"\r\n        >\r\n          Choose a different archetype\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Choose Your Archetype</h1>\r\n      <p className=\"text-gray-600 mb-6\">\r\n        Your archetype defines your character's approach to combat and supernatural abilities.\r\n      </p>\r\n      \r\n      {/* Archetype Selection */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\r\n        {(Object.entries(ARCHETYPE_INFO) as [ArchetypeCategory, typeof ARCHETYPE_INFO.power][]).map(\r\n          ([type, info]) => (\r\n            <button\r\n              key={type}\r\n              onClick={() => {\r\n                setSelectedType(type);\r\n                setSelectedAbility(null);\r\n                setSelectedMartialAbility(null);\r\n              }}\r\n              className={cn(\r\n                'p-6 rounded-xl border-2 text-left transition-all',\r\n                selectedType === type\r\n                  ? 'border-primary-600 bg-primary-50 shadow-lg'\r\n                  : 'border-gray-200 bg-white hover:border-gray-300 hover:shadow'\r\n              )}\r\n            >\r\n              <h3 className=\"text-lg font-bold text-gray-900 mb-2\">{info.title}</h3>\r\n              <p className=\"text-sm text-gray-600\">{info.description}</p>\r\n            </button>\r\n          )\r\n        )}\r\n      </div>\r\n      \r\n      {/* Ability Selection */}\r\n      {selectedType && (\r\n        <div className=\"bg-gray-50 rounded-xl p-6 mb-6\">\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">\r\n            {selectedType === 'powered-martial' \r\n              ? 'Choose Your Power and Martial Abilities'\r\n              : `Choose Your ${selectedType === 'power' ? 'Power' : 'Martial'} Ability`\r\n            }\r\n          </h3>\r\n          \r\n          {selectedType === 'powered-martial' ? (\r\n            <div className=\"grid md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <h4 className=\"text-sm font-medium text-purple-700 mb-2\">Power Ability</h4>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  {ABILITIES.map((ability) => (\r\n                    <button\r\n                      key={`power-${ability}`}\r\n                      onClick={() => setSelectedAbility(ability)}\r\n                      disabled={selectedMartialAbility === ability}\r\n                      className={cn(\r\n                        'px-3 py-2 rounded-lg text-sm font-medium transition-colors',\r\n                        selectedAbility === ability\r\n                          ? 'bg-purple-600 text-white'\r\n                          : selectedMartialAbility === ability\r\n                          ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                          : 'bg-white border border-gray-200 hover:border-purple-400'\r\n                      )}\r\n                    >\r\n                      {ability.charAt(0).toUpperCase() + ability.slice(1)}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <h4 className=\"text-sm font-medium text-red-700 mb-2\">Martial Ability</h4>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  {ABILITIES.map((ability) => (\r\n                    <button\r\n                      key={`martial-${ability}`}\r\n                      onClick={() => setSelectedMartialAbility(ability)}\r\n                      disabled={selectedAbility === ability}\r\n                      className={cn(\r\n                        'px-3 py-2 rounded-lg text-sm font-medium transition-colors',\r\n                        selectedMartialAbility === ability\r\n                          ? 'bg-red-600 text-white'\r\n                          : selectedAbility === ability\r\n                          ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                          : 'bg-white border border-gray-200 hover:border-red-400'\r\n                      )}\r\n                    >\r\n                      {ability.charAt(0).toUpperCase() + ability.slice(1)}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n              {ABILITIES.map((ability) => (\r\n                <button\r\n                  key={ability}\r\n                  onClick={() => setSelectedAbility(ability)}\r\n                  className={cn(\r\n                    'px-4 py-3 rounded-lg font-medium transition-colors',\r\n                    selectedAbility === ability\r\n                      ? selectedType === 'power' \r\n                        ? 'bg-purple-600 text-white'\r\n                        : 'bg-red-600 text-white'\r\n                      : 'bg-white border border-gray-200 hover:border-gray-400'\r\n                  )}\r\n                >\r\n                  {ability.charAt(0).toUpperCase() + ability.slice(1)}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Confirm Button */}\r\n      <button\r\n        onClick={handleConfirm}\r\n        disabled={!canConfirm}\r\n        className={cn(\r\n          'w-full py-3 rounded-xl font-bold text-lg transition-colors',\r\n          canConfirm\r\n            ? 'bg-primary-600 text-white hover:bg-primary-700'\r\n            : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n        )}\r\n      >\r\n        Confirm Archetype\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Species Step\r\n * =============\r\n * Choose character species with real data from Firebase RTDB\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport { useSpecies, useTraits, type Species, type Trait } from '@/hooks';\r\n\r\nexport function SpeciesStep() {\r\n  const { draft, nextStep, prevStep, setSpecies } = useCharacterCreatorStore();\r\n  const { data: species, isLoading: speciesLoading } = useSpecies();\r\n  const { data: traits } = useTraits();\r\n  const [expandedSpecies, setExpandedSpecies] = useState<string | null>(null);\r\n\r\n  const handleSelect = (speciesId: string, speciesName: string) => {\r\n    setSpecies(speciesId, speciesName);\r\n  };\r\n\r\n  const getTraitsForSpecies = (speciesId: string): Trait[] => {\r\n    if (!traits) return [];\r\n    return traits.filter(t => t.species?.includes(speciesId));\r\n  };\r\n\r\n  if (speciesLoading) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto flex items-center justify-center py-12\">\r\n        <div className=\"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Choose Your Species</h1>\r\n      <p className=\"text-gray-600 mb-6\">\r\n        Your species defines your character&apos;s physical traits and inherent abilities.\r\n      </p>\r\n      \r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8\">\r\n        {species?.map((s) => {\r\n          const isSelected = draft.ancestry?.id === s.id;\r\n          const isExpanded = expandedSpecies === s.id;\r\n          const speciesTraits = getTraitsForSpecies(s.id);\r\n          \r\n          return (\r\n            <div\r\n              key={s.id}\r\n              className={cn(\r\n                'rounded-xl border-2 overflow-hidden transition-all',\r\n                isSelected\r\n                  ? 'border-primary-600 bg-primary-50'\r\n                  : 'border-gray-200 bg-white hover:border-gray-300'\r\n              )}\r\n            >\r\n              <button\r\n                onClick={() => handleSelect(s.id, s.name)}\r\n                className=\"w-full p-4 text-left\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"font-bold text-gray-900\">{s.name}</h3>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-xs px-2 py-0.5 bg-gray-100 rounded capitalize\">\r\n                      {s.size}\r\n                    </span>\r\n                    <span className=\"text-xs px-2 py-0.5 bg-gray-100 rounded\">\r\n                      Speed {s.speed}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">{s.description}</p>\r\n                \r\n                {s.ability_bonuses && Object.keys(s.ability_bonuses).length > 0 && (\r\n                  <div className=\"flex gap-1 mt-2\">\r\n                    {Object.entries(s.ability_bonuses).map(([ability, bonus]) => (\r\n                      <span\r\n                        key={ability}\r\n                        className=\"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded\"\r\n                      >\r\n                        {ability.substring(0, 3).toUpperCase()} +{bonus}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </button>\r\n              \r\n              {speciesTraits.length > 0 && (\r\n                <>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      setExpandedSpecies(isExpanded ? null : s.id);\r\n                    }}\r\n                    className=\"w-full px-4 py-2 text-sm text-primary-600 hover:bg-primary-50 border-t border-gray-200\"\r\n                  >\r\n                    {isExpanded ? 'Hide Traits ▲' : `Show ${speciesTraits.length} Traits ▼`}\r\n                  </button>\r\n                  \r\n                  {isExpanded && (\r\n                    <div className=\"px-4 pb-4 border-t border-gray-200 bg-gray-50\">\r\n                      <div className=\"space-y-2 mt-3\">\r\n                        {speciesTraits.map(trait => (\r\n                          <div key={trait.id} className=\"p-2 bg-white rounded border border-gray-100\">\r\n                            <span className=\"font-medium text-sm\">{trait.name}</span>\r\n                            <p className=\"text-xs text-gray-600\">{trait.description}</p>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n      {(!species || species.length === 0) && (\r\n        <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-8\">\r\n          <p className=\"text-amber-700 text-center\">\r\n            No species data available. Please check Firebase connection.\r\n          </p>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"flex justify-between\">\r\n        <button\r\n          onClick={prevStep}\r\n          className=\"px-6 py-3 rounded-xl font-medium text-gray-600 hover:bg-gray-100\"\r\n        >\r\n          ← Back\r\n        </button>\r\n        <button\r\n          onClick={nextStep}\r\n          disabled={!draft.ancestry?.id}\r\n          className={cn(\r\n            'px-8 py-3 rounded-xl font-bold transition-colors',\r\n            draft.ancestry?.id\r\n              ? 'bg-primary-600 text-white hover:bg-primary-700'\r\n              : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n          )}\r\n        >\r\n          Continue →\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Ancestry Step\r\n * ==============\r\n * Displays and confirms the selected species' ancestry traits\r\n * Shows species traits, ancestry traits, and characteristics\r\n */\r\n\r\n'use client';\r\n\r\nimport { useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport { useSpecies, useTraits, type Species, type Trait } from '@/hooks';\r\nimport { User, Ruler, Scale, Zap, Heart, Languages } from 'lucide-react';\r\n\r\nexport function AncestryStep() {\r\n  const { draft, nextStep, prevStep, setStep } = useCharacterCreatorStore();\r\n  const { data: allSpecies } = useSpecies();\r\n  const { data: allTraits } = useTraits();\r\n\r\n  // Find selected species\r\n  const selectedSpecies = useMemo(() => {\r\n    if (!allSpecies || !draft.ancestry?.id) return null;\r\n    return allSpecies.find(s => s.id === draft.ancestry?.id);\r\n  }, [allSpecies, draft.ancestry?.id]);\r\n\r\n  // Get traits for selected species\r\n  const speciesTraits = useMemo(() => {\r\n    if (!allTraits || !selectedSpecies) return [];\r\n    \r\n    // Method 1: Check traits that list this species\r\n    const traitsBySpecies = allTraits.filter(t => \r\n      t.species?.includes(selectedSpecies.id) || \r\n      t.species?.includes(selectedSpecies.name)\r\n    );\r\n    \r\n    // Method 2: Check species.traits array for trait names\r\n    const traitsByName = selectedSpecies.traits?.map(traitName => \r\n      allTraits.find(t => \r\n        t.name.toLowerCase() === traitName.toLowerCase() ||\r\n        t.id === traitName\r\n      )\r\n    ).filter(Boolean) as Trait[] || [];\r\n    \r\n    // Combine and deduplicate\r\n    const combined = [...traitsBySpecies];\r\n    traitsByName.forEach(t => {\r\n      if (!combined.some(existing => existing.id === t.id)) {\r\n        combined.push(t);\r\n      }\r\n    });\r\n    \r\n    return combined;\r\n  }, [allTraits, selectedSpecies]);\r\n\r\n  // No species selected - prompt to go back\r\n  if (!selectedSpecies) {\r\n    return (\r\n      <div className=\"max-w-2xl mx-auto text-center\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Confirm Your Ancestry</h1>\r\n        <p className=\"text-gray-600 mb-6\">\r\n          Review your species&apos; traits and characteristics.\r\n        </p>\r\n        \r\n        <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-8\">\r\n          <p className=\"text-amber-700 mb-4\">\r\n            <strong>No species selected!</strong> Please choose a species first.\r\n          </p>\r\n          <button\r\n            onClick={() => setStep('species')}\r\n            className=\"px-6 py-2 rounded-lg bg-amber-600 text-white font-medium hover:bg-amber-700\"\r\n          >\r\n            Go to Species Selection\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"flex justify-between\">\r\n          <button\r\n            onClick={prevStep}\r\n            className=\"px-6 py-3 rounded-xl font-medium text-gray-600 hover:bg-gray-100\"\r\n          >\r\n            ← Back\r\n          </button>\r\n          <button\r\n            disabled\r\n            className=\"px-8 py-3 rounded-xl font-bold bg-gray-200 text-gray-400 cursor-not-allowed\"\r\n          >\r\n            Continue →\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Confirm Your Ancestry</h1>\r\n      <p className=\"text-gray-600 mb-6\">\r\n        Review your species&apos; traits and characteristics before continuing.\r\n      </p>\r\n      \r\n      {/* Species Summary Card */}\r\n      <div className=\"bg-gradient-to-br from-primary-50 to-white border-2 border-primary-200 rounded-xl p-6 mb-6\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-primary-900 mb-1\">{selectedSpecies.name}</h2>\r\n            <p className=\"text-gray-600 max-w-xl\">{selectedSpecies.description}</p>\r\n          </div>\r\n          <button\r\n            onClick={() => setStep('species')}\r\n            className=\"text-sm text-primary-600 hover:text-primary-800 underline\"\r\n          >\r\n            Change Species\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Quick Stats Grid */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6\">\r\n          <div className=\"flex items-center gap-2 bg-white rounded-lg px-3 py-2 border border-gray-200\">\r\n            <Ruler className=\"w-5 h-5 text-gray-400\" />\r\n            <div>\r\n              <span className=\"text-xs text-gray-500 block\">Size</span>\r\n              <span className=\"font-medium capitalize\">{selectedSpecies.sizes?.join(', ') || selectedSpecies.size}</span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2 bg-white rounded-lg px-3 py-2 border border-gray-200\">\r\n            <Zap className=\"w-5 h-5 text-gray-400\" />\r\n            <div>\r\n              <span className=\"text-xs text-gray-500 block\">Speed</span>\r\n              <span className=\"font-medium\">{selectedSpecies.speed} sq</span>\r\n            </div>\r\n          </div>\r\n          {selectedSpecies.ave_height && (\r\n            <div className=\"flex items-center gap-2 bg-white rounded-lg px-3 py-2 border border-gray-200\">\r\n              <User className=\"w-5 h-5 text-gray-400\" />\r\n              <div>\r\n                <span className=\"text-xs text-gray-500 block\">Avg Height</span>\r\n                <span className=\"font-medium\">\r\n                  {selectedSpecies.ave_height} cm\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {selectedSpecies.ave_weight && (\r\n            <div className=\"flex items-center gap-2 bg-white rounded-lg px-3 py-2 border border-gray-200\">\r\n              <Scale className=\"w-5 h-5 text-gray-400\" />\r\n              <div>\r\n                <span className=\"text-xs text-gray-500 block\">Avg Weight</span>\r\n                <span className=\"font-medium\">\r\n                  {selectedSpecies.ave_weight} kg\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {/* Ability Bonuses */}\r\n        {selectedSpecies.ability_bonuses && Object.keys(selectedSpecies.ability_bonuses).length > 0 && (\r\n          <div className=\"mt-4\">\r\n            <span className=\"text-sm font-medium text-gray-700 block mb-2\">Ability Bonuses</span>\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n              {Object.entries(selectedSpecies.ability_bonuses).map(([ability, bonus]) => (\r\n                <span\r\n                  key={ability}\r\n                  className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\"\r\n                >\r\n                  {ability.charAt(0).toUpperCase() + ability.slice(1)} +{bonus}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Species Traits Section */}\r\n      <div className=\"bg-white border border-gray-200 rounded-xl overflow-hidden mb-6\">\r\n        <div className=\"bg-gray-50 px-4 py-3 border-b border-gray-200\">\r\n          <h3 className=\"font-bold text-gray-900 flex items-center gap-2\">\r\n            <Heart className=\"w-5 h-5 text-primary-600\" />\r\n            Species Traits\r\n            <span className=\"text-sm font-normal text-gray-500\">\r\n              ({speciesTraits.length} trait{speciesTraits.length !== 1 ? 's' : ''})\r\n            </span>\r\n          </h3>\r\n        </div>\r\n        <div className=\"divide-y divide-gray-100\">\r\n          {speciesTraits.length > 0 ? (\r\n            speciesTraits.map(trait => (\r\n              <div key={trait.id} className=\"px-4 py-3 hover:bg-gray-50\">\r\n                <h4 className=\"font-medium text-gray-900\">{trait.name}</h4>\r\n                <p className=\"text-sm text-gray-600 mt-1\">{trait.description}</p>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"px-4 py-6 text-center text-gray-500\">\r\n              No specific traits defined for this species.\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Confirmation Notice */}\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-8\">\r\n        <p className=\"text-blue-800 text-sm\">\r\n          <strong>Ready to continue?</strong> These traits will be automatically applied to your character.\r\n          You can change your species at any time by going back.\r\n        </p>\r\n      </div>\r\n      \r\n      {/* Navigation */}\r\n      <div className=\"flex justify-between\">\r\n        <button\r\n          onClick={prevStep}\r\n          className=\"px-6 py-3 rounded-xl font-medium text-gray-600 hover:bg-gray-100\"\r\n        >\r\n          ← Back\r\n        </button>\r\n        <button\r\n          onClick={nextStep}\r\n          className=\"px-8 py-3 rounded-xl font-bold bg-primary-600 text-white hover:bg-primary-700 transition-colors\"\r\n        >\r\n          Continue →\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Abilities Step\r\n * ==============\r\n * Allocate ability points during character creation\r\n */\r\n\r\n'use client';\r\n\r\nimport { useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport { calculateAbilityPoints, getAbilityIncreaseCost, canIncreaseAbility, canDecreaseAbility } from '@/lib/game/formulas';\r\nimport { ABILITY_LIMITS } from '@/lib/game/constants';\r\nimport type { AbilityName } from '@/types';\r\n\r\nconst ABILITY_INFO: Record<AbilityName, { name: string; description: string; defenseLink: string }> = {\r\n  strength: { \r\n    name: 'Strength', \r\n    description: 'Physical power, melee damage, and carrying capacity',\r\n    defenseLink: 'Might'\r\n  },\r\n  vitality: { \r\n    name: 'Vitality', \r\n    description: 'Health, endurance, and resistance to physical effects',\r\n    defenseLink: 'Fortitude'\r\n  },\r\n  agility: { \r\n    name: 'Agility', \r\n    description: 'Speed, dexterity, reflexes, and finesse attacks',\r\n    defenseLink: 'Reflex'\r\n  },\r\n  acuity: { \r\n    name: 'Acuity', \r\n    description: 'Perception, awareness, and ranged accuracy',\r\n    defenseLink: 'Discernment'\r\n  },\r\n  intelligence: { \r\n    name: 'Intelligence', \r\n    description: 'Knowledge, reasoning, and mental power',\r\n    defenseLink: 'Mental Fortitude'\r\n  },\r\n  charisma: { \r\n    name: 'Charisma', \r\n    description: 'Force of personality, leadership, and social influence',\r\n    defenseLink: 'Resolve'\r\n  },\r\n};\r\n\r\nconst ABILITY_ORDER: AbilityName[] = ['strength', 'vitality', 'agility', 'acuity', 'intelligence', 'charisma'];\r\n\r\nexport function AbilitiesStep() {\r\n  const { draft, updateAbility, nextStep, prevStep } = useCharacterCreatorStore();\r\n  const level = draft.level || 1;\r\n  const abilities = draft.abilities || {\r\n    strength: 0,\r\n    vitality: 0,\r\n    agility: 0,\r\n    acuity: 0,\r\n    intelligence: 0,\r\n    charisma: 0,\r\n  };\r\n  \r\n  // Calculate total points and spent\r\n  const totalPoints = useMemo(() => calculateAbilityPoints(level), [level]);\r\n  const spentPoints = useMemo(() => {\r\n    return ABILITY_ORDER.reduce((sum, ability) => {\r\n      const value = abilities[ability] || 0;\r\n      let cost = 0;\r\n      \r\n      // Calculate cost for positive values\r\n      for (let i = 1; i <= value; i++) {\r\n        cost += i > ABILITY_LIMITS.COST_INCREASE_THRESHOLD ? 2 : 1;\r\n      }\r\n      \r\n      // Negative values give points back (1 per negative)\r\n      if (value < 0) {\r\n        cost = value; // Negative number = negative cost\r\n      }\r\n      \r\n      return sum + cost;\r\n    }, 0);\r\n  }, [abilities]);\r\n  \r\n  const remainingPoints = totalPoints - spentPoints;\r\n\r\n  const handleIncrease = (ability: AbilityName) => {\r\n    const current = abilities[ability] || 0;\r\n    const cost = getAbilityIncreaseCost(current);\r\n    \r\n    if (canIncreaseAbility(current, remainingPoints, true)) {\r\n      updateAbility(ability, current + 1);\r\n    }\r\n  };\r\n\r\n  const handleDecrease = (ability: AbilityName) => {\r\n    const current = abilities[ability] || 0;\r\n    \r\n    if (canDecreaseAbility(current)) {\r\n      updateAbility(ability, current - 1);\r\n    }\r\n  };\r\n\r\n  const canContinue = remainingPoints >= 0;\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Assign Ability Scores</h1>\r\n      <p className=\"text-gray-600 mb-4\">\r\n        Distribute your ability points. Higher scores cost more at higher values.\r\n        You can reduce abilities below 0 to gain extra points.\r\n      </p>\r\n      \r\n      {/* Points Display */}\r\n      <div className={cn(\r\n        'flex items-center justify-center gap-4 p-4 rounded-xl mb-6',\r\n        remainingPoints > 0 ? 'bg-green-50 border border-green-200' :\r\n        remainingPoints < 0 ? 'bg-red-50 border border-red-200' :\r\n        'bg-gray-50 border border-gray-200'\r\n      )}>\r\n        <div className=\"text-center\">\r\n          <span className=\"text-sm text-gray-500\">Total Points</span>\r\n          <div className=\"text-2xl font-bold text-gray-900\">{totalPoints}</div>\r\n        </div>\r\n        <div className=\"text-3xl text-gray-300\">−</div>\r\n        <div className=\"text-center\">\r\n          <span className=\"text-sm text-gray-500\">Spent</span>\r\n          <div className=\"text-2xl font-bold text-gray-900\">{spentPoints}</div>\r\n        </div>\r\n        <div className=\"text-3xl text-gray-300\">=</div>\r\n        <div className=\"text-center\">\r\n          <span className=\"text-sm text-gray-500\">Remaining</span>\r\n          <div className={cn(\r\n            'text-2xl font-bold',\r\n            remainingPoints > 0 ? 'text-green-600' :\r\n            remainingPoints < 0 ? 'text-red-600' :\r\n            'text-gray-600'\r\n          )}>\r\n            {remainingPoints}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Ability Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8\">\r\n        {ABILITY_ORDER.map((ability) => {\r\n          const value = abilities[ability] || 0;\r\n          const info = ABILITY_INFO[ability];\r\n          const cost = getAbilityIncreaseCost(value);\r\n          const isArchetypeAbility = \r\n            draft.pow_abil === ability || draft.mart_abil === ability;\r\n          \r\n          return (\r\n            <div\r\n              key={ability}\r\n              className={cn(\r\n                'p-4 rounded-xl border-2 bg-white',\r\n                isArchetypeAbility ? 'border-amber-400' : 'border-gray-200'\r\n              )}\r\n            >\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <div>\r\n                  <h3 className=\"font-bold text-gray-900\">{info.name}</h3>\r\n                  {isArchetypeAbility && (\r\n                    <span className=\"text-xs text-amber-600 font-medium\">\r\n                      Archetype Ability\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <span className=\"text-xs text-gray-400\">→ {info.defenseLink}</span>\r\n              </div>\r\n              \r\n              <p className=\"text-xs text-gray-500 mb-3\">{info.description}</p>\r\n              \r\n              <div className=\"flex items-center justify-between\">\r\n                <button\r\n                  onClick={() => handleDecrease(ability)}\r\n                  disabled={!canDecreaseAbility(value)}\r\n                  className={cn(\r\n                    'w-10 h-10 rounded-full flex items-center justify-center text-xl font-bold transition-colors',\r\n                    canDecreaseAbility(value)\r\n                      ? 'bg-gray-200 hover:bg-gray-300 text-gray-700'\r\n                      : 'bg-gray-100 text-gray-300 cursor-not-allowed'\r\n                  )}\r\n                >\r\n                  −\r\n                </button>\r\n                \r\n                <div className=\"text-center\">\r\n                  <div className={cn(\r\n                    'text-3xl font-bold',\r\n                    value > 0 ? 'text-green-600' :\r\n                    value < 0 ? 'text-red-600' :\r\n                    'text-gray-600'\r\n                  )}>\r\n                    {value >= 0 ? `+${value}` : value}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-400\">\r\n                    Cost: {cost}\r\n                  </div>\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={() => handleIncrease(ability)}\r\n                  disabled={!canIncreaseAbility(value, remainingPoints, true)}\r\n                  className={cn(\r\n                    'w-10 h-10 rounded-full flex items-center justify-center text-xl font-bold transition-colors',\r\n                    canIncreaseAbility(value, remainingPoints, true)\r\n                      ? 'bg-primary-600 hover:bg-primary-700 text-white'\r\n                      : 'bg-gray-100 text-gray-300 cursor-not-allowed'\r\n                  )}\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n      {/* Navigation */}\r\n      <div className=\"flex justify-between\">\r\n        <button\r\n          onClick={prevStep}\r\n          className=\"px-6 py-3 rounded-xl font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors\"\r\n        >\r\n          ← Back\r\n        </button>\r\n        \r\n        <button\r\n          onClick={nextStep}\r\n          disabled={!canContinue}\r\n          className={cn(\r\n            'px-8 py-3 rounded-xl font-bold transition-colors',\r\n            canContinue\r\n              ? 'bg-primary-600 text-white hover:bg-primary-700'\r\n              : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n          )}\r\n        >\r\n          Continue →\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Skills Step\r\n * ============\r\n * Allocate skill points with real data from Firebase RTDB\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState, useMemo, useCallback } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport { useRTDBSkills, type RTDBSkill } from '@/hooks';\r\nimport { calculateSkillPoints } from '@/lib/game/formulas';\r\n\r\nconst ABILITY_ORDER = ['Strength', 'Vitality', 'Agility', 'Acuity', 'Intelligence', 'Charisma'];\r\n\r\nexport function SkillsStep() {\r\n  const { draft, nextStep, prevStep, updateDraft } = useCharacterCreatorStore();\r\n  const { data: skills, isLoading } = useRTDBSkills();\r\n  const [expandedCategory, setExpandedCategory] = useState<string | null>(null);\r\n\r\n  // Get skill points based on level (default level 1)\r\n  const totalSkillPoints = calculateSkillPoints(draft.level || 1);\r\n  \r\n  // Initialize skill allocations from draft or create empty\r\n  // CharacterSkills is Record<string, number>\r\n  const [allocations, setAllocations] = useState<Record<string, number>>(() => {\r\n    return draft.skills || {};\r\n  });\r\n\r\n  const usedPoints = useMemo(() => {\r\n    return Object.values(allocations).reduce((sum, val) => sum + val, 0);\r\n  }, [allocations]);\r\n\r\n  const remainingPoints = totalSkillPoints - usedPoints;\r\n\r\n  // Group skills by ability/category\r\n  const groupedSkills = useMemo(() => {\r\n    if (!skills) return {};\r\n    const groups: Record<string, RTDBSkill[]> = {};\r\n    \r\n    skills.forEach(skill => {\r\n      const category = skill.ability || skill.category || 'General';\r\n      if (!groups[category]) groups[category] = [];\r\n      groups[category].push(skill);\r\n    });\r\n    \r\n    // Sort by ability order\r\n    const sorted: Record<string, RTDBSkill[]> = {};\r\n    ABILITY_ORDER.forEach(ability => {\r\n      if (groups[ability]) sorted[ability] = groups[ability];\r\n    });\r\n    Object.keys(groups)\r\n      .filter(k => !ABILITY_ORDER.includes(k))\r\n      .forEach(k => { sorted[k] = groups[k]; });\r\n    \r\n    return sorted;\r\n  }, [skills]);\r\n\r\n  const handleAllocate = useCallback((skillId: string, delta: number) => {\r\n    setAllocations(prev => {\r\n      const current = prev[skillId] || 0;\r\n      const newValue = Math.max(0, current + delta);\r\n      \r\n      // Can't exceed remaining points when adding\r\n      if (delta > 0 && remainingPoints <= 0) return prev;\r\n      \r\n      if (newValue === 0) {\r\n        const { [skillId]: _, ...rest } = prev;\r\n        return rest;\r\n      }\r\n      return { ...prev, [skillId]: newValue };\r\n    });\r\n  }, [remainingPoints]);\r\n\r\n  const handleContinue = () => {\r\n    // Save allocations to draft - CharacterSkills is just Record<string, number>\r\n    updateDraft({\r\n      skills: allocations,\r\n    });\r\n    nextStep();\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto flex items-center justify-center py-12\">\r\n        <div className=\"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto\">\r\n      <div className=\"flex items-start justify-between mb-6\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Allocate Skills</h1>\r\n          <p className=\"text-gray-600\">\r\n            Distribute your skill points to define your character&apos;s trained abilities.\r\n          </p>\r\n        </div>\r\n        \r\n        {/* Points Counter */}\r\n        <div className={cn(\r\n          'px-4 py-2 rounded-xl font-bold text-lg',\r\n          remainingPoints > 0 ? 'bg-blue-100 text-blue-700' : 'bg-green-100 text-green-700'\r\n        )}>\r\n          {remainingPoints} / {totalSkillPoints} Points\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Skills by Category */}\r\n      <div className=\"space-y-4 mb-8\">\r\n        {Object.entries(groupedSkills).map(([category, categorySkills]) => {\r\n          const categoryPoints = categorySkills.reduce(\r\n            (sum, s) => sum + (allocations[s.id] || 0), 0\r\n          );\r\n          const isExpanded = expandedCategory === category || expandedCategory === null;\r\n          \r\n          return (\r\n            <div key={category} className=\"bg-white rounded-xl shadow-md overflow-hidden\">\r\n              <button\r\n                onClick={() => setExpandedCategory(\r\n                  expandedCategory === category ? null : category\r\n                )}\r\n                className=\"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <h3 className=\"font-bold text-gray-900\">{category}</h3>\r\n                  <span className=\"text-sm text-gray-500\">\r\n                    {categorySkills.length} skills\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                  {categoryPoints > 0 && (\r\n                    <span className=\"px-2 py-0.5 text-sm bg-primary-100 text-primary-700 rounded\">\r\n                      {categoryPoints} pts\r\n                    </span>\r\n                  )}\r\n                  <span className={cn(\r\n                    'transition-transform',\r\n                    isExpanded && 'rotate-180'\r\n                  )}>\r\n                    ▼\r\n                  </span>\r\n                </div>\r\n              </button>\r\n              \r\n              {isExpanded && (\r\n                <div className=\"p-4 grid md:grid-cols-2 gap-3\">\r\n                  {categorySkills.map(skill => (\r\n                    <SkillAllocator\r\n                      key={skill.id}\r\n                      skill={skill}\r\n                      value={allocations[skill.id] || 0}\r\n                      onAllocate={(delta) => handleAllocate(skill.id, delta)}\r\n                      canIncrease={remainingPoints > 0}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n      {(!skills || skills.length === 0) && (\r\n        <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-8\">\r\n          <p className=\"text-amber-700 text-center\">\r\n            No skill data available. Please check Firebase connection.\r\n          </p>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"flex justify-between\">\r\n        <button\r\n          onClick={prevStep}\r\n          className=\"px-6 py-3 rounded-xl font-medium text-gray-600 hover:bg-gray-100\"\r\n        >\r\n          ← Back\r\n        </button>\r\n        <button\r\n          onClick={handleContinue}\r\n          className=\"px-8 py-3 rounded-xl font-bold bg-primary-600 text-white hover:bg-primary-700 transition-colors\"\r\n        >\r\n          Continue →\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface SkillAllocatorProps {\r\n  skill: RTDBSkill;\r\n  value: number;\r\n  onAllocate: (delta: number) => void;\r\n  canIncrease: boolean;\r\n}\r\n\r\nfunction SkillAllocator({ skill, value, onAllocate, canIncrease }: SkillAllocatorProps) {\r\n  const [showDescription, setShowDescription] = useState(false);\r\n  \r\n  return (\r\n    <div className={cn(\r\n      'p-3 rounded-lg border transition-colors',\r\n      value > 0 ? 'bg-primary-50 border-primary-200' : 'bg-gray-50 border-gray-200'\r\n    )}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setShowDescription(!showDescription)}\r\n            className=\"text-gray-400 hover:text-gray-600 text-sm\"\r\n          >\r\n            ℹ️\r\n          </button>\r\n          <span className=\"font-medium text-gray-900\">{skill.name}</span>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => onAllocate(-1)}\r\n            disabled={value === 0}\r\n            className={cn(\r\n              'w-7 h-7 rounded flex items-center justify-center font-bold',\r\n              value > 0\r\n                ? 'bg-gray-200 hover:bg-gray-300 text-gray-700'\r\n                : 'bg-gray-100 text-gray-300 cursor-not-allowed'\r\n            )}\r\n          >\r\n            −\r\n          </button>\r\n          \r\n          <span className={cn(\r\n            'w-8 text-center font-bold',\r\n            value > 0 ? 'text-primary-700' : 'text-gray-400'\r\n          )}>\r\n            {value}\r\n          </span>\r\n          \r\n          <button\r\n            onClick={() => onAllocate(1)}\r\n            disabled={!canIncrease}\r\n            className={cn(\r\n              'w-7 h-7 rounded flex items-center justify-center font-bold',\r\n              canIncrease\r\n                ? 'bg-primary-600 hover:bg-primary-700 text-white'\r\n                : 'bg-gray-100 text-gray-300 cursor-not-allowed'\r\n            )}\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {showDescription && skill.description && (\r\n        <p className=\"text-xs text-gray-600 mt-2 border-t border-gray-200 pt-2\">\r\n          {skill.description}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Feats Step\r\n * ===========\r\n * Select character feats with real data from Firebase RTDB\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport { useRTDBFeats, type RTDBFeat } from '@/hooks';\r\nimport { calculateMaxCharacterFeats } from '@/lib/game/formulas';\r\n\r\nexport function FeatsStep() {\r\n  const { draft, nextStep, prevStep, updateDraft } = useCharacterCreatorStore();\r\n  const { data: feats, isLoading } = useRTDBFeats();\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [categoryFilter, setCategoryFilter] = useState('');\r\n  const [showArchetype, setShowArchetype] = useState(true);\r\n  const [showCharacter, setShowCharacter] = useState(true);\r\n  const [expandedFeat, setExpandedFeat] = useState<string | null>(null);\r\n\r\n  // Get max feats based on level\r\n  const maxFeats = calculateMaxCharacterFeats(draft.level || 1);\r\n  \r\n  // Get selected feat IDs from draft\r\n  const selectedFeatIds = useMemo(() => {\r\n    return draft.feats?.map(f => f.id) || [];\r\n  }, [draft.feats]);\r\n\r\n  // Get unique categories\r\n  const categories = useMemo(() => {\r\n    if (!feats) return [];\r\n    const cats = new Set<string>();\r\n    feats.forEach(f => f.category && cats.add(f.category));\r\n    return Array.from(cats).sort();\r\n  }, [feats]);\r\n\r\n  // Filter feats\r\n  const filteredFeats = useMemo(() => {\r\n    if (!feats) return [];\r\n    return feats.filter(feat => {\r\n      // Search filter\r\n      if (searchTerm) {\r\n        const term = searchTerm.toLowerCase();\r\n        const matches = \r\n          feat.name.toLowerCase().includes(term) ||\r\n          feat.description?.toLowerCase().includes(term) ||\r\n          feat.tags.some(t => t.toLowerCase().includes(term));\r\n        if (!matches) return false;\r\n      }\r\n      \r\n      // Type filter\r\n      if (!showArchetype && !feat.char_feat) return false;\r\n      if (!showCharacter && feat.char_feat) return false;\r\n      \r\n      // Category filter\r\n      if (categoryFilter && feat.category !== categoryFilter) return false;\r\n      \r\n      // Level requirement\r\n      if (feat.lvl_req > (draft.level || 1)) return false;\r\n      \r\n      return true;\r\n    });\r\n  }, [feats, searchTerm, showArchetype, showCharacter, categoryFilter, draft.level]);\r\n\r\n  const toggleFeat = (feat: RTDBFeat) => {\r\n    const isSelected = selectedFeatIds.includes(feat.id);\r\n    \r\n    if (isSelected) {\r\n      // Remove feat\r\n      updateDraft({\r\n        feats: draft.feats?.filter(f => f.id !== feat.id) || []\r\n      });\r\n    } else {\r\n      // Add feat if not at max\r\n      if (selectedFeatIds.length >= maxFeats) return;\r\n      \r\n      updateDraft({\r\n        feats: [\r\n          ...(draft.feats || []),\r\n          {\r\n            id: feat.id,\r\n            name: feat.name,\r\n            description: feat.description,\r\n            type: feat.char_feat ? 'character' : 'archetype',\r\n          }\r\n        ]\r\n      });\r\n    }\r\n  };\r\n\r\n  const checkRequirements = (feat: RTDBFeat): { met: boolean; reason?: string } => {\r\n    const abilities = draft.abilities || {};\r\n    \r\n    // Check ability requirements\r\n    for (let i = 0; i < feat.ability_req.length; i++) {\r\n      const reqAbility = feat.ability_req[i].toLowerCase() as keyof typeof abilities;\r\n      const reqValue = feat.abil_req_val[i] || 0;\r\n      const charValue = abilities[reqAbility] || 0;\r\n      \r\n      if (charValue < reqValue) {\r\n        return { met: false, reason: `Requires ${feat.ability_req[i]} ${reqValue}+` };\r\n      }\r\n    }\r\n    \r\n    return { met: true };\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"max-w-5xl mx-auto flex items-center justify-center py-12\">\r\n        <div className=\"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto\">\r\n      <div className=\"flex items-start justify-between mb-6\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Select Feats</h1>\r\n          <p className=\"text-gray-600\">\r\n            Choose feats that grant special abilities and bonuses.\r\n          </p>\r\n        </div>\r\n        \r\n        <div className={cn(\r\n          'px-4 py-2 rounded-xl font-bold text-lg',\r\n          selectedFeatIds.length < maxFeats\r\n            ? 'bg-blue-100 text-blue-700'\r\n            : 'bg-green-100 text-green-700'\r\n        )}>\r\n          {selectedFeatIds.length} / {maxFeats} Feats\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected Feats Summary */}\r\n      {selectedFeatIds.length > 0 && (\r\n        <div className=\"bg-primary-50 rounded-xl p-4 mb-6\">\r\n          <h3 className=\"font-medium text-primary-800 mb-2\">Selected Feats</h3>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {draft.feats?.map(feat => (\r\n              <span\r\n                key={feat.id}\r\n                className=\"px-3 py-1 bg-white text-primary-700 rounded-full text-sm flex items-center gap-2\"\r\n              >\r\n                {feat.name}\r\n                <button\r\n                  onClick={() => toggleFeat({ id: feat.id, name: feat.name } as RTDBFeat)}\r\n                  className=\"hover:text-red-500\"\r\n                >\r\n                  ×\r\n                </button>\r\n              </span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white rounded-xl p-4 mb-6 shadow-sm flex flex-wrap gap-4 items-center\">\r\n        <input\r\n          type=\"text\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          placeholder=\"Search feats...\"\r\n          className=\"flex-1 min-w-[200px] px-3 py-2 border border-gray-300 rounded-lg\"\r\n        />\r\n        \r\n        <select\r\n          value={categoryFilter}\r\n          onChange={(e) => setCategoryFilter(e.target.value)}\r\n          className=\"px-3 py-2 border border-gray-300 rounded-lg\"\r\n        >\r\n          <option value=\"\">All Categories</option>\r\n          {categories.map(cat => (\r\n            <option key={cat} value={cat}>{cat}</option>\r\n          ))}\r\n        </select>\r\n        \r\n        <label className=\"flex items-center gap-2\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={showArchetype}\r\n            onChange={(e) => setShowArchetype(e.target.checked)}\r\n            className=\"w-4 h-4 rounded text-primary-600\"\r\n          />\r\n          <span className=\"text-sm\">Archetype</span>\r\n        </label>\r\n        \r\n        <label className=\"flex items-center gap-2\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={showCharacter}\r\n            onChange={(e) => setShowCharacter(e.target.checked)}\r\n            className=\"w-4 h-4 rounded text-primary-600\"\r\n          />\r\n          <span className=\"text-sm\">Character</span>\r\n        </label>\r\n      </div>\r\n\r\n      {/* Feats List */}\r\n      <div className=\"space-y-2 mb-8 max-h-[500px] overflow-y-auto\">\r\n        {filteredFeats.map(feat => {\r\n          const isSelected = selectedFeatIds.includes(feat.id);\r\n          const isExpanded = expandedFeat === feat.id;\r\n          const requirements = checkRequirements(feat);\r\n          const canSelect = selectedFeatIds.length < maxFeats || isSelected;\r\n          \r\n          return (\r\n            <div\r\n              key={feat.id}\r\n              className={cn(\r\n                'bg-white rounded-lg border overflow-hidden transition-all',\r\n                isSelected ? 'border-primary-400 bg-primary-50' : 'border-gray-200',\r\n                !requirements.met && 'opacity-60'\r\n              )}\r\n            >\r\n              <div className=\"p-3 flex items-center gap-3\">\r\n                <button\r\n                  onClick={() => requirements.met && canSelect && toggleFeat(feat)}\r\n                  disabled={!requirements.met || !canSelect}\r\n                  className={cn(\r\n                    'w-6 h-6 rounded border-2 flex items-center justify-center flex-shrink-0',\r\n                    isSelected\r\n                      ? 'bg-primary-600 border-primary-600 text-white'\r\n                      : requirements.met && canSelect\r\n                        ? 'border-gray-300 hover:border-primary-400'\r\n                        : 'border-gray-200 bg-gray-100 cursor-not-allowed'\r\n                  )}\r\n                >\r\n                  {isSelected && '✓'}\r\n                </button>\r\n                \r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-center gap-2 flex-wrap\">\r\n                    <span className=\"font-medium text-gray-900\">{feat.name}</span>\r\n                    {feat.char_feat && (\r\n                      <span className=\"px-1.5 py-0.5 text-xs bg-blue-100 text-blue-700 rounded\">\r\n                        Character\r\n                      </span>\r\n                    )}\r\n                    {feat.category && (\r\n                      <span className=\"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded\">\r\n                        {feat.category}\r\n                      </span>\r\n                    )}\r\n                    {!requirements.met && (\r\n                      <span className=\"px-1.5 py-0.5 text-xs bg-red-100 text-red-600 rounded\">\r\n                        {requirements.reason}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={() => setExpandedFeat(isExpanded ? null : feat.id)}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  {isExpanded ? '▲' : '▼'}\r\n                </button>\r\n              </div>\r\n              \r\n              {isExpanded && (\r\n                <div className=\"px-3 pb-3 pt-2 border-t border-gray-100\">\r\n                  <p className=\"text-sm text-gray-700\">{feat.description}</p>\r\n                  \r\n                  {feat.tags.length > 0 && (\r\n                    <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                      {feat.tags.map(tag => (\r\n                        <span\r\n                          key={tag}\r\n                          className=\"px-1.5 py-0.5 text-xs bg-primary-50 text-primary-700 rounded\"\r\n                        >\r\n                          {tag}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n        \r\n        {filteredFeats.length === 0 && (\r\n          <div className=\"text-center py-8 text-gray-500\">\r\n            No feats match your filters.\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"flex justify-between\">\r\n        <button\r\n          onClick={prevStep}\r\n          className=\"px-6 py-3 rounded-xl font-medium text-gray-600 hover:bg-gray-100\"\r\n        >\r\n          ← Back\r\n        </button>\r\n        <button\r\n          onClick={nextStep}\r\n          className=\"px-8 py-3 rounded-xl font-bold bg-primary-600 text-white hover:bg-primary-700 transition-colors\"\r\n        >\r\n          Continue →\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Equipment Step\r\n * ===============\r\n * Select starting equipment with real data from Firebase RTDB\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport { useEquipment, type EquipmentItem } from '@/hooks';\r\nimport { calculateTrainingPoints } from '@/lib/game/formulas';\r\nimport type { Item } from '@/types';\r\n\r\n// Selected item type for our internal state\r\ninterface SelectedItem {\r\n  id: string;\r\n  name: string;\r\n  type: string;\r\n  cost: number;\r\n  damage?: string;\r\n  armor?: number;\r\n  properties: string[];\r\n}\r\n\r\nexport function EquipmentStep() {\r\n  const { draft, nextStep, prevStep, updateDraft } = useCharacterCreatorStore();\r\n  const { data: equipment, isLoading } = useEquipment();\r\n  const [activeTab, setActiveTab] = useState<'weapon' | 'armor' | 'equipment'>('weapon');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Get highest archetype ability for TP calculation\r\n  const highestAbility = useMemo(() => {\r\n    const abilities = draft.abilities || {};\r\n    // Try to get archetype-related ability, fallback to highest\r\n    const abilityValues = Object.values(abilities).filter((v): v is number => typeof v === 'number');\r\n    return Math.max(...abilityValues, 0);\r\n  }, [draft.abilities]);\r\n\r\n  // Calculate starting gold\r\n  const startingGold = calculateTrainingPoints(draft.level || 1, highestAbility) * 10;\r\n  \r\n  // Get selected equipment from draft - use inventory array\r\n  const selectedItems = useMemo((): SelectedItem[] => {\r\n    const inv = draft.equipment?.inventory || [];\r\n    return inv.map(item => ({\r\n      id: String(item.id),\r\n      name: item.name,\r\n      type: 'equipment',\r\n      cost: item.cost || 0,\r\n      damage: item.damage,\r\n      armor: item.armor,\r\n      properties: Array.isArray(item.properties) \r\n        ? item.properties.map(p => typeof p === 'string' ? p : p.name) \r\n        : [],\r\n    }));\r\n  }, [draft.equipment?.inventory]);\r\n\r\n  const spentGold = useMemo(() => {\r\n    return selectedItems.reduce((sum: number, item) => sum + (item.cost || 0), 0);\r\n  }, [selectedItems]);\r\n\r\n  const remainingGold = startingGold - spentGold;\r\n\r\n  // Filter equipment by type and search\r\n  const filteredEquipment = useMemo(() => {\r\n    if (!equipment) return [];\r\n    return equipment.filter(item => {\r\n      if (item.type !== activeTab) return false;\r\n      if (searchTerm) {\r\n        const term = searchTerm.toLowerCase();\r\n        if (!item.name.toLowerCase().includes(term) &&\r\n            !item.description?.toLowerCase().includes(term)) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    });\r\n  }, [equipment, activeTab, searchTerm]);\r\n\r\n  const toggleItem = (item: EquipmentItem) => {\r\n    const isSelected = selectedItems.some(i => i.id === item.id);\r\n    \r\n    // Current inventory\r\n    const currentInventory: Item[] = draft.equipment?.inventory || [];\r\n    \r\n    if (isSelected) {\r\n      // Remove item\r\n      updateDraft({\r\n        equipment: {\r\n          ...draft.equipment,\r\n          inventory: currentInventory.filter(i => String(i.id) !== item.id),\r\n        }\r\n      });\r\n    } else {\r\n      // Add item if we have enough gold\r\n      if (item.gold_cost > remainingGold) return;\r\n      \r\n      const newItem: Item = {\r\n        id: item.id,\r\n        name: item.name,\r\n        cost: item.gold_cost,\r\n        damage: item.damage,\r\n        armor: item.armor_value,\r\n        properties: item.properties,\r\n      };\r\n      \r\n      updateDraft({\r\n        equipment: {\r\n          ...draft.equipment,\r\n          inventory: [...currentInventory, newItem],\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"max-w-5xl mx-auto flex items-center justify-center py-12\">\r\n        <div className=\"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto\">\r\n      <div className=\"flex items-start justify-between mb-6\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Choose Equipment</h1>\r\n          <p className=\"text-gray-600\">\r\n            Select your starting weapons, armor, and gear.\r\n          </p>\r\n        </div>\r\n        \r\n        <div className={cn(\r\n          'px-4 py-2 rounded-xl font-bold text-lg',\r\n          remainingGold > 0 ? 'bg-amber-100 text-amber-700' : 'bg-red-100 text-red-700'\r\n        )}>\r\n          {remainingGold} / {startingGold} Gold\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected Items Summary */}\r\n      {selectedItems.length > 0 && (\r\n        <div className=\"bg-gray-50 rounded-xl p-4 mb-6\">\r\n          <h3 className=\"font-medium text-gray-800 mb-2\">Selected Equipment</h3>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {selectedItems.map(item => (\r\n              <span\r\n                key={item.id}\r\n                className=\"px-3 py-1 bg-white border border-gray-200 rounded-full text-sm flex items-center gap-2\"\r\n              >\r\n                {item.name}\r\n                <span className=\"text-amber-600 text-xs\">{item.cost}g</span>\r\n                <button\r\n                  onClick={() => toggleItem({ id: item.id, name: item.name, gold_cost: item.cost, type: 'equipment', properties: [], description: '' } as EquipmentItem)}\r\n                  className=\"hover:text-red-500\"\r\n                >\r\n                  ×\r\n                </button>\r\n              </span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Type Tabs */}\r\n      <div className=\"flex gap-2 mb-4\">\r\n        {(['weapon', 'armor', 'equipment'] as const).map(type => (\r\n          <button\r\n            key={type}\r\n            onClick={() => setActiveTab(type)}\r\n            className={cn(\r\n              'px-4 py-2 rounded-lg font-medium capitalize transition-colors',\r\n              activeTab === type\r\n                ? 'bg-primary-600 text-white'\r\n                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n            )}\r\n          >\r\n            {type}s\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <input\r\n        type=\"text\"\r\n        value={searchTerm}\r\n        onChange={(e) => setSearchTerm(e.target.value)}\r\n        placeholder={`Search ${activeTab}s...`}\r\n        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4\"\r\n      />\r\n\r\n      {/* Equipment Grid */}\r\n      <div className=\"grid md:grid-cols-2 gap-3 mb-8 max-h-[400px] overflow-y-auto\">\r\n        {filteredEquipment.map(item => {\r\n          const isSelected = selectedItems.some(i => i.id === item.id);\r\n          const canAfford = item.gold_cost <= remainingGold || isSelected;\r\n          \r\n          return (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => canAfford && toggleItem(item)}\r\n              disabled={!canAfford}\r\n              className={cn(\r\n                'p-4 rounded-lg border text-left transition-all',\r\n                isSelected\r\n                  ? 'border-primary-400 bg-primary-50'\r\n                  : canAfford\r\n                    ? 'border-gray-200 bg-white hover:border-gray-300'\r\n                    : 'border-gray-200 bg-gray-100 opacity-60 cursor-not-allowed'\r\n              )}\r\n            >\r\n              <div className=\"flex items-start justify-between mb-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  {isSelected && (\r\n                    <span className=\"w-5 h-5 rounded-full bg-primary-600 text-white text-xs flex items-center justify-center\">\r\n                      ✓\r\n                    </span>\r\n                  )}\r\n                  <span className=\"font-medium text-gray-900\">{item.name}</span>\r\n                </div>\r\n                <span className={cn(\r\n                  'font-bold',\r\n                  canAfford ? 'text-amber-600' : 'text-red-500'\r\n                )}>\r\n                  {item.gold_cost}g\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center gap-2 text-sm text-gray-600 mb-2\">\r\n                {item.damage && (\r\n                  <span className=\"px-2 py-0.5 bg-red-50 text-red-700 rounded\">\r\n                    {item.damage}\r\n                  </span>\r\n                )}\r\n                {item.armor_value && (\r\n                  <span className=\"px-2 py-0.5 bg-blue-50 text-blue-700 rounded\">\r\n                    +{item.armor_value} Armor\r\n                  </span>\r\n                )}\r\n              </div>\r\n              \r\n              {item.description && (\r\n                <p className=\"text-sm text-gray-600 line-clamp-2\">{item.description}</p>\r\n              )}\r\n              \r\n              {item.properties.length > 0 && (\r\n                <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                  {item.properties.slice(0, 3).map(prop => (\r\n                    <span key={prop} className=\"px-1.5 py-0.5 text-xs bg-gray-100 rounded\">\r\n                      {prop}\r\n                    </span>\r\n                  ))}\r\n                  {item.properties.length > 3 && (\r\n                    <span className=\"text-xs text-gray-400\">\r\n                      +{item.properties.length - 3} more\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </button>\r\n          );\r\n        })}\r\n        \r\n        {filteredEquipment.length === 0 && (\r\n          <div className=\"col-span-2 text-center py-8 text-gray-500\">\r\n            No {activeTab}s found.\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"flex justify-between\">\r\n        <button\r\n          onClick={prevStep}\r\n          className=\"px-6 py-3 rounded-xl font-medium text-gray-600 hover:bg-gray-100\"\r\n        >\r\n          ← Back\r\n        </button>\r\n        <button\r\n          onClick={nextStep}\r\n          className=\"px-8 py-3 rounded-xl font-bold bg-primary-600 text-white hover:bg-primary-700 transition-colors\"\r\n        >\r\n          Continue →\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Powers Step\r\n * ===========\r\n * Allow users to select powers and techniques for their character.\r\n * Uses powers from user's library with ItemSelectionModal.\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState, useMemo, useCallback } from 'react';\r\nimport Link from 'next/link';\r\nimport { Plus, Wand2, Swords, X, ExternalLink } from 'lucide-react';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport { ItemList, ItemSelectionModal } from '@/components/shared';\r\nimport { transformPower, transformTechnique } from '@/lib/item-transformers';\r\nimport { useUserPowers, useUserTechniques, usePowerParts, useTechniqueParts } from '@/hooks';\r\nimport type { DisplayItem, SortOption } from '@/types';\r\n\r\nconst POWER_SORTS: SortOption[] = [\r\n  { id: 'name', label: 'Name', field: 'name', type: 'string' },\r\n  { id: 'cost', label: 'Energy', field: 'cost', type: 'number' },\r\n];\r\n\r\nconst TECHNIQUE_SORTS: SortOption[] = [\r\n  { id: 'name', label: 'Name', field: 'name', type: 'string' },\r\n  { id: 'cost', label: 'TP', field: 'cost', type: 'number' },\r\n];\r\n\r\nexport function PowersStep() {\r\n  const { draft, updateDraft, nextStep, prevStep } = useCharacterCreatorStore();\r\n  const [showPowerModal, setShowPowerModal] = useState(false);\r\n  const [showTechniqueModal, setShowTechniqueModal] = useState(false);\r\n  \r\n  // Fetch user's library\r\n  const { data: userPowers = [], isLoading: powersLoading } = useUserPowers();\r\n  const { data: userTechniques = [], isLoading: techniquesLoading } = useUserTechniques();\r\n  const { data: powerParts } = usePowerParts();\r\n  const { data: techniqueParts } = useTechniqueParts();\r\n  \r\n  // Get selected powers and techniques from character draft\r\n  const selectedPowers = draft.powers || [];\r\n  const selectedTechniques = draft.techniques || [];\r\n  \r\n  const selectedPowerIds = useMemo(\r\n    () => new Set(selectedPowers.map((p: { id: string | number }) => String(p.id))), \r\n    [selectedPowers]\r\n  );\r\n  const selectedTechniqueIds = useMemo(\r\n    () => new Set(selectedTechniques.map((t: { id: string | number }) => String(t.id))), \r\n    [selectedTechniques]\r\n  );\r\n  \r\n  // Transform user powers to display items\r\n  const availablePowers = useMemo((): DisplayItem[] => {\r\n    return userPowers.map(power => {\r\n      const firstDamage = power.damage?.[0];\r\n      return transformPower({\r\n        id: power.docId,\r\n        name: power.name,\r\n        description: power.description,\r\n        parts: power.parts?.map(p => String(p.name || p.id)) || [],\r\n        damage: firstDamage ? `${firstDamage.amount}d${firstDamage.size}${firstDamage.type ? ` ${firstDamage.type}` : ''}` : undefined,\r\n      });\r\n    });\r\n  }, [userPowers]);\r\n  \r\n  // Transform user techniques to display items\r\n  const availableTechniques = useMemo((): DisplayItem[] => {\r\n    return userTechniques.map(tech => {\r\n      const firstDamage = tech.damage?.[0];\r\n      return transformTechnique({\r\n        id: tech.docId,\r\n        name: tech.name,\r\n        description: tech.description,\r\n        parts: tech.parts?.map(p => String(p.name || p.id)) || [],\r\n        damage: firstDamage ? `${firstDamage.amount}d${firstDamage.size}${firstDamage.type ? ` ${firstDamage.type}` : ''}` : undefined,\r\n      });\r\n    });\r\n  }, [userTechniques]);\r\n  \r\n  // Display items for selected powers/techniques\r\n  const selectedPowerItems = useMemo((): DisplayItem[] => {\r\n    return availablePowers.filter(p => selectedPowerIds.has(p.id));\r\n  }, [availablePowers, selectedPowerIds]);\r\n  \r\n  const selectedTechniqueItems = useMemo((): DisplayItem[] => {\r\n    return availableTechniques.filter(t => selectedTechniqueIds.has(t.id));\r\n  }, [availableTechniques, selectedTechniqueIds]);\r\n  \r\n  // Handle power selection\r\n  const handlePowerSelect = useCallback((items: DisplayItem[]) => {\r\n    const powers = items.map(item => ({\r\n      id: item.id,\r\n      name: item.name,\r\n    }));\r\n    updateDraft({ powers });\r\n    setShowPowerModal(false);\r\n  }, [updateDraft]);\r\n  \r\n  // Handle technique selection\r\n  const handleTechniqueSelect = useCallback((items: DisplayItem[]) => {\r\n    const techniques = items.map(item => ({\r\n      id: item.id,\r\n      name: item.name,\r\n    }));\r\n    updateDraft({ techniques });\r\n    setShowTechniqueModal(false);\r\n  }, [updateDraft]);\r\n  \r\n  // Remove a power\r\n  const removePower = useCallback((powerId: string) => {\r\n    const newPowers = selectedPowers.filter((p: { id: string | number }) => String(p.id) !== powerId);\r\n    updateDraft({ powers: newPowers });\r\n  }, [selectedPowers, updateDraft]);\r\n  \r\n  // Remove a technique\r\n  const removeTechnique = useCallback((techniqueId: string) => {\r\n    const newTechniques = selectedTechniques.filter((t: { id: string | number }) => String(t.id) !== techniqueId);\r\n    updateDraft({ techniques: newTechniques });\r\n  }, [selectedTechniques, updateDraft]);\r\n  \r\n  const hasContent = userPowers.length > 0 || userTechniques.length > 0;\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      {/* Header */}\r\n      <div className=\"text-center mb-8\">\r\n        <h1 className=\"text-2xl font-bold text-foreground mb-2\">\r\n          Powers & Techniques\r\n        </h1>\r\n        <p className=\"text-muted-foreground\">\r\n          Select powers and techniques from your library for your character to know.\r\n        </p>\r\n      </div>\r\n      \r\n      {/* Empty state if no content */}\r\n      {!powersLoading && !techniquesLoading && !hasContent && (\r\n        <div className=\"bg-muted/30 border border-border rounded-xl p-8 text-center mb-8\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center\">\r\n            <Wand2 className=\"w-8 h-8 text-muted-foreground\" />\r\n          </div>\r\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n            No Powers or Techniques Yet\r\n          </h3>\r\n          <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\r\n            Create powers and techniques in your library first, then come back to add them to your character.\r\n          </p>\r\n          <div className=\"flex items-center justify-center gap-4\">\r\n            <Link\r\n              href=\"/power-creator\"\r\n              className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              Create Power\r\n              <ExternalLink className=\"w-3 h-3\" />\r\n            </Link>\r\n            <Link\r\n              href=\"/technique-creator\"\r\n              className=\"flex items-center gap-2 px-4 py-2 rounded-lg border border-border text-foreground hover:bg-muted transition-colors\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              Create Technique\r\n              <ExternalLink className=\"w-3 h-3\" />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Powers Section */}\r\n      {(hasContent || powersLoading) && (\r\n        <section className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center\">\r\n                <Wand2 className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n              <div>\r\n                <h2 className=\"text-lg font-semibold text-foreground\">Powers</h2>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {selectedPowers.length} power{selectedPowers.length !== 1 ? 's' : ''} selected\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => setShowPowerModal(true)}\r\n              disabled={userPowers.length === 0}\r\n              className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              Add Powers\r\n            </button>\r\n          </div>\r\n          \r\n          {selectedPowerItems.length > 0 ? (\r\n            <div className=\"space-y-2\">\r\n              {selectedPowerItems.map(power => (\r\n                <div \r\n                  key={power.id}\r\n                  className=\"flex items-center justify-between p-3 rounded-lg border border-border bg-card\"\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <Wand2 className=\"w-4 h-4 text-primary\" />\r\n                    <span className=\"font-medium text-foreground\">{power.name}</span>\r\n                    {power.cost !== undefined && (\r\n                      <span className=\"text-sm text-muted-foreground\">\r\n                        {power.cost} {power.costLabel}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <button\r\n                    onClick={() => removePower(power.id)}\r\n                    className=\"p-1 rounded hover:bg-destructive/10 text-destructive transition-colors\"\r\n                    title=\"Remove power\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : userPowers.length > 0 ? (\r\n            <div className=\"p-4 rounded-lg border border-dashed border-border text-center text-muted-foreground\">\r\n              No powers selected. Click \"Add Powers\" to choose from your library.\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-4 rounded-lg border border-dashed border-border text-center\">\r\n              <span className=\"text-muted-foreground\">No powers in your library. </span>\r\n              <Link href=\"/power-creator\" className=\"text-primary hover:underline inline-flex items-center gap-1\">\r\n                Create one <ExternalLink className=\"w-3 h-3\" />\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </section>\r\n      )}\r\n      \r\n      {/* Techniques Section */}\r\n      {(hasContent || techniquesLoading) && (\r\n        <section className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 rounded-lg bg-orange-500/10 flex items-center justify-center\">\r\n                <Swords className=\"w-5 h-5 text-orange-500\" />\r\n              </div>\r\n              <div>\r\n                <h2 className=\"text-lg font-semibold text-foreground\">Techniques</h2>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {selectedTechniques.length} technique{selectedTechniques.length !== 1 ? 's' : ''} selected\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => setShowTechniqueModal(true)}\r\n              disabled={userTechniques.length === 0}\r\n              className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-orange-500 text-white hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              Add Techniques\r\n            </button>\r\n          </div>\r\n          \r\n          {selectedTechniqueItems.length > 0 ? (\r\n            <div className=\"space-y-2\">\r\n              {selectedTechniqueItems.map(tech => (\r\n                <div \r\n                  key={tech.id}\r\n                  className=\"flex items-center justify-between p-3 rounded-lg border border-border bg-card\"\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <Swords className=\"w-4 h-4 text-orange-500\" />\r\n                    <span className=\"font-medium text-foreground\">{tech.name}</span>\r\n                    {tech.cost !== undefined && (\r\n                      <span className=\"text-sm text-muted-foreground\">\r\n                        {tech.cost} {tech.costLabel}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <button\r\n                    onClick={() => removeTechnique(tech.id)}\r\n                    className=\"p-1 rounded hover:bg-destructive/10 text-destructive transition-colors\"\r\n                    title=\"Remove technique\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : userTechniques.length > 0 ? (\r\n            <div className=\"p-4 rounded-lg border border-dashed border-border text-center text-muted-foreground\">\r\n              No techniques selected. Click \"Add Techniques\" to choose from your library.\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-4 rounded-lg border border-dashed border-border text-center\">\r\n              <span className=\"text-muted-foreground\">No techniques in your library. </span>\r\n              <Link href=\"/technique-creator\" className=\"text-primary hover:underline inline-flex items-center gap-1\">\r\n                Create one <ExternalLink className=\"w-3 h-3\" />\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </section>\r\n      )}\r\n      \r\n      {/* Navigation */}\r\n      <div className=\"flex justify-between pt-6 border-t border-border\">\r\n        <button\r\n          onClick={prevStep}\r\n          className=\"px-6 py-3 rounded-xl font-medium text-muted-foreground hover:bg-muted transition-colors\"\r\n        >\r\n          ← Back\r\n        </button>\r\n        <button\r\n          onClick={nextStep}\r\n          className=\"px-8 py-3 rounded-xl font-bold bg-primary text-primary-foreground hover:bg-primary/90 transition-colors\"\r\n        >\r\n          Continue →\r\n        </button>\r\n      </div>\r\n      \r\n      {/* Power Selection Modal */}\r\n      <ItemSelectionModal\r\n        isOpen={showPowerModal}\r\n        onClose={() => setShowPowerModal(false)}\r\n        onConfirm={handlePowerSelect}\r\n        items={availablePowers}\r\n        title=\"Select Powers\"\r\n        description=\"Choose powers from your library for your character to know.\"\r\n        initialSelectedIds={selectedPowerIds}\r\n        sortOptions={POWER_SORTS}\r\n        searchPlaceholder=\"Search powers...\"\r\n        loading={powersLoading}\r\n      />\r\n      \r\n      {/* Technique Selection Modal */}\r\n      <ItemSelectionModal\r\n        isOpen={showTechniqueModal}\r\n        onClose={() => setShowTechniqueModal(false)}\r\n        onConfirm={handleTechniqueSelect}\r\n        items={availableTechniques}\r\n        title=\"Select Techniques\"\r\n        description=\"Choose techniques from your library for your character to know.\"\r\n        initialSelectedIds={selectedTechniqueIds}\r\n        sortOptions={TECHNIQUE_SORTS}\r\n        searchPlaceholder=\"Search techniques...\"\r\n        loading={techniquesLoading}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PowersStep;\r\n","/**\r\n * Finalize Step\r\n * =============\r\n * Final character details and save\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { collection, addDoc, Timestamp } from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase/client';\r\nimport { useAuth } from '@/hooks';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport { calculateAbilityPoints, calculateSkillPoints, calculateTrainingPoints, calculateHealthEnergyPool } from '@/lib/game/formulas';\r\n\r\ninterface ValidationIssue {\r\n  emoji: string;\r\n  message: string;\r\n  severity: 'error' | 'warning';\r\n}\r\n\r\nfunction ValidationModal({ \r\n  isOpen, \r\n  onClose, \r\n  issues, \r\n  onContinueAnyway \r\n}: { \r\n  isOpen: boolean; \r\n  onClose: () => void; \r\n  issues: ValidationIssue[];\r\n  onContinueAnyway?: () => void;\r\n}) {\r\n  if (!isOpen) return null;\r\n  \r\n  const hasErrors = issues.some(i => i.severity === 'error');\r\n  const isValid = issues.length === 0;\r\n  \r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-xl max-w-lg w-full max-h-[80vh] overflow-hidden\">\r\n        <div className={cn(\r\n          'p-4 border-b flex items-center gap-3',\r\n          isValid ? 'bg-green-50' : hasErrors ? 'bg-red-50' : 'bg-amber-50'\r\n        )}>\r\n          <span className=\"text-2xl\">{isValid ? '✅' : hasErrors ? '⚠️' : '📋'}</span>\r\n          <h2 className=\"text-xl font-bold\">\r\n            {isValid ? 'Character Ready!' : hasErrors ? 'Issues Found' : 'Review Needed'}\r\n          </h2>\r\n        </div>\r\n        \r\n        <div className=\"p-4 overflow-y-auto max-h-[50vh]\">\r\n          {isValid ? (\r\n            <p className=\"text-gray-600 text-center py-8\">\r\n              Your character is complete and ready for adventure! Click &quot;Create Character&quot; to save.\r\n            </p>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {issues.map((issue, idx) => (\r\n                <div \r\n                  key={idx} \r\n                  className={cn(\r\n                    'p-3 rounded-lg flex gap-3',\r\n                    issue.severity === 'error' ? 'bg-red-50' : 'bg-amber-50'\r\n                  )}\r\n                >\r\n                  <span className=\"text-xl flex-shrink-0\">{issue.emoji}</span>\r\n                  <p className=\"text-gray-700\">{issue.message}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"p-4 border-t flex justify-end gap-3\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50\"\r\n          >\r\n            {isValid ? 'Close' : 'Go Back & Fix'}\r\n          </button>\r\n          {!hasErrors && !isValid && onContinueAnyway && (\r\n            <button\r\n              onClick={onContinueAnyway}\r\n              className=\"px-4 py-2 rounded-lg bg-amber-500 text-white hover:bg-amber-600\"\r\n            >\r\n              Continue Anyway\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function FinalizeStep() {\r\n  const router = useRouter();\r\n  const { user } = useAuth();\r\n  const { draft, updateDraft, getCharacter, resetCreator, prevStep } = useCharacterCreatorStore();\r\n  \r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showValidation, setShowValidation] = useState(false);\r\n\r\n  // Calculate validation issues\r\n  const validationIssues = useMemo(() => {\r\n    const issues: ValidationIssue[] = [];\r\n    const level = draft.level || 1;\r\n    \r\n    // 1. Name validation\r\n    if (!draft.name?.trim()) {\r\n      issues.push({\r\n        emoji: '📝',\r\n        message: \"Your hero needs a name! Give them something legendary.\",\r\n        severity: 'error'\r\n      });\r\n    }\r\n    \r\n    // 2. Archetype validation\r\n    if (!draft.archetype?.type) {\r\n      issues.push({\r\n        emoji: '🎭',\r\n        message: \"You haven't selected an archetype yet! Head back to the Archetype tab.\",\r\n        severity: 'error'\r\n      });\r\n    }\r\n    \r\n    // 3. Species validation\r\n    if (!draft.ancestry?.id) {\r\n      issues.push({\r\n        emoji: '🌟',\r\n        message: \"You need to choose your species! Head to the Species tab.\",\r\n        severity: 'error'\r\n      });\r\n    }\r\n    \r\n    // 4. Ability points\r\n    const maxAbilityPoints = calculateAbilityPoints(level);\r\n    const usedAbilityPoints = draft.abilities \r\n      ? Object.values(draft.abilities).reduce((sum, val) => {\r\n          // Cost is 1 for values 0-3, 2 for values 4+\r\n          if (val <= 0) return sum;\r\n          if (val <= 3) return sum + val;\r\n          return sum + 3 + (val - 3) * 2;\r\n        }, 0)\r\n      : 0;\r\n    const remainingAbilityPoints = maxAbilityPoints - usedAbilityPoints;\r\n    \r\n    if (remainingAbilityPoints > 0) {\r\n      issues.push({\r\n        emoji: '⚡',\r\n        message: `You still have ${remainingAbilityPoints} ability point${remainingAbilityPoints === 1 ? '' : 's'} to spend!`,\r\n        severity: 'warning'\r\n      });\r\n    } else if (remainingAbilityPoints < 0) {\r\n      issues.push({\r\n        emoji: '⚡',\r\n        message: `You've overspent ability points by ${Math.abs(remainingAbilityPoints)}!`,\r\n        severity: 'error'\r\n      });\r\n    }\r\n    \r\n    // 5. Skill points\r\n    const maxSkillPoints = calculateSkillPoints(level);\r\n    const usedSkillPoints = draft.skills\r\n      ? Object.values(draft.skills).reduce((sum, val) => sum + (val || 0), 0)\r\n      : 0;\r\n    const defenseSkillPoints = draft.defenseSkills\r\n      ? Object.values(draft.defenseSkills).reduce((sum, val) => sum + ((val || 0) * 2), 0)\r\n      : 0;\r\n    const totalUsedSkillPoints = usedSkillPoints + defenseSkillPoints;\r\n    const remainingSkillPoints = maxSkillPoints - totalUsedSkillPoints;\r\n    \r\n    if (remainingSkillPoints > 0) {\r\n      issues.push({\r\n        emoji: '📚',\r\n        message: `You have ${remainingSkillPoints} skill point${remainingSkillPoints === 1 ? '' : 's'} left to spend!`,\r\n        severity: 'warning'\r\n      });\r\n    } else if (remainingSkillPoints < 0) {\r\n      issues.push({\r\n        emoji: '📚',\r\n        message: `You've overspent skill points by ${Math.abs(remainingSkillPoints)}!`,\r\n        severity: 'error'\r\n      });\r\n    }\r\n    \r\n    // 6. Health/Energy points\r\n    const hePool = calculateHealthEnergyPool(level, 'PLAYER');\r\n    const usedHealthPoints = draft.healthPoints || 0;\r\n    const usedEnergyPoints = draft.energyPoints || 0;\r\n    const remainingHEPoints = hePool - (usedHealthPoints + usedEnergyPoints);\r\n    \r\n    if (remainingHEPoints > 0) {\r\n      issues.push({\r\n        emoji: '❤️',\r\n        message: `You have ${remainingHEPoints} Health-Energy point${remainingHEPoints === 1 ? '' : 's'} to allocate!`,\r\n        severity: 'warning'\r\n      });\r\n    }\r\n    \r\n    // 7. Training points - calculate from equipment and powers\r\n    const highestAbility = draft.abilities \r\n      ? Math.max(...Object.values(draft.abilities).filter(v => typeof v === 'number'))\r\n      : 0;\r\n    const trainingPoints = calculateTrainingPoints(level, highestAbility);\r\n    const equipmentTP = draft.trainingPointsSpent || 0;\r\n    const remainingTP = trainingPoints - equipmentTP;\r\n    \r\n    if (remainingTP < 0) {\r\n      issues.push({\r\n        emoji: '🎯',\r\n        message: `You've overspent training points by ${Math.abs(remainingTP)}!`,\r\n        severity: 'error'\r\n      });\r\n    }\r\n    \r\n    // 8. Currency - calculate from equipment costs\r\n    const baseCurrency = 200;\r\n    const spentCurrency = (draft.equipment?.items || []).reduce((sum, item) => sum + (item.cost || 0), 0);\r\n    if (spentCurrency > baseCurrency) {\r\n      issues.push({\r\n        emoji: '💰',\r\n        message: `You've overspent currency by ${spentCurrency - baseCurrency}gp!`,\r\n        severity: 'error'\r\n      });\r\n    }\r\n    \r\n    // 9. Archetype feats\r\n    const archetypeType = draft.archetype?.type;\r\n    const archetypeFeats = draft.archetypeFeats || [];\r\n    let expectedFeatCount = 0;\r\n    if (archetypeType === 'power') expectedFeatCount = 1;\r\n    else if (archetypeType === 'powered-martial') expectedFeatCount = 2;\r\n    else if (archetypeType === 'martial') expectedFeatCount = 3;\r\n    \r\n    if (archetypeFeats.length < expectedFeatCount) {\r\n      const diff = expectedFeatCount - archetypeFeats.length;\r\n      issues.push({\r\n        emoji: '💪',\r\n        message: `You need to select ${diff} more archetype feat${diff === 1 ? '' : 's'}!`,\r\n        severity: 'warning'\r\n      });\r\n    }\r\n    \r\n    // 10. Character feat (stored in feats array)\r\n    const characterFeats = draft.feats || [];\r\n    if (characterFeats.length < 1) {\r\n      issues.push({\r\n        emoji: '🌠',\r\n        message: \"You need to select a character feat!\",\r\n        severity: 'warning'\r\n      });\r\n    }\r\n    \r\n    return issues;\r\n  }, [draft]);\r\n  \r\n  const handleValidateAndSave = () => {\r\n    setShowValidation(true);\r\n  };\r\n  \r\n  const handleSave = async () => {\r\n    if (!user) {\r\n      setError('You must be logged in to save a character');\r\n      return;\r\n    }\r\n    \r\n    if (!draft.name?.trim()) {\r\n      setError('Please enter a character name');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSaving(true);\r\n      setError(null);\r\n      setShowValidation(false);\r\n      \r\n      const characterData = getCharacter();\r\n      \r\n      const docRef = await addDoc(\r\n        collection(db, 'users', user.uid, 'character'),\r\n        {\r\n          ...characterData,\r\n          userId: user.uid,\r\n          createdAt: Timestamp.now(),\r\n          updatedAt: Timestamp.now(),\r\n        }\r\n      );\r\n      \r\n      // Clear the creator store\r\n      resetCreator();\r\n      \r\n      // Navigate to the new character\r\n      router.push(`/characters/${docRef.id}`);\r\n    } catch (err) {\r\n      console.error('Error saving character:', err);\r\n      setError('Failed to save character. Please try again.');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"max-w-2xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Finalize Your Character</h1>\r\n      <p className=\"text-gray-600 mb-6\">\r\n        Add the final details to bring your character to life.\r\n      </p>\r\n      \r\n      {/* Character Name */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Character Name *\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          value={draft.name || ''}\r\n          onChange={(e) => updateDraft({ name: e.target.value })}\r\n          placeholder=\"Enter your character's name\"\r\n          className=\"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 transition-colors\"\r\n        />\r\n      </div>\r\n      \r\n      {/* Character Summary */}\r\n      <div className=\"bg-gray-50 rounded-xl p-6 mb-6\">\r\n        <h3 className=\"font-bold text-gray-900 mb-4\">Character Summary</h3>\r\n        \r\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n          <div>\r\n            <span className=\"text-gray-500\">Level:</span>\r\n            <span className=\"ml-2 font-medium\">{draft.level || 1}</span>\r\n          </div>\r\n          \r\n          <div>\r\n            <span className=\"text-gray-500\">Archetype:</span>\r\n            <span className=\"ml-2 font-medium\">\r\n              {draft.archetype?.type \r\n                ? draft.archetype.type.charAt(0).toUpperCase() + draft.archetype.type.slice(1)\r\n                : 'Not selected'}\r\n            </span>\r\n          </div>\r\n          \r\n          <div>\r\n            <span className=\"text-gray-500\">Species:</span>\r\n            <span className=\"ml-2 font-medium\">{draft.ancestry?.name || 'Not selected'}</span>\r\n          </div>\r\n          \r\n          {draft.pow_abil && (\r\n            <div>\r\n              <span className=\"text-gray-500\">Power Ability:</span>\r\n              <span className=\"ml-2 font-medium capitalize\">{draft.pow_abil}</span>\r\n            </div>\r\n          )}\r\n          \r\n          {draft.mart_abil && (\r\n            <div>\r\n              <span className=\"text-gray-500\">Martial Ability:</span>\r\n              <span className=\"ml-2 font-medium capitalize\">{draft.mart_abil}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {/* Abilities Summary */}\r\n        {draft.abilities && (\r\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n            <span className=\"text-gray-500 text-sm\">Abilities:</span>\r\n            <div className=\"flex flex-wrap gap-2 mt-2\">\r\n              {Object.entries(draft.abilities).map(([ability, value]) => (\r\n                <span\r\n                  key={ability}\r\n                  className={cn(\r\n                    'px-2 py-1 rounded text-sm font-medium',\r\n                    value > 0 ? 'bg-green-100 text-green-700' :\r\n                    value < 0 ? 'bg-red-100 text-red-700' :\r\n                    'bg-gray-100 text-gray-600'\r\n                  )}\r\n                >\r\n                  {ability.charAt(0).toUpperCase()}: {value >= 0 ? `+${value}` : value}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Description (Optional) */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Description (Optional)\r\n        </label>\r\n        <textarea\r\n          value={draft.description || ''}\r\n          onChange={(e) => updateDraft({ description: e.target.value })}\r\n          placeholder=\"Describe your character's appearance, personality, or background...\"\r\n          rows={4}\r\n          className=\"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 transition-colors resize-none\"\r\n        />\r\n      </div>\r\n      \r\n      {/* Notes (Optional) */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Notes (Optional)\r\n        </label>\r\n        <textarea\r\n          value={draft.notes || ''}\r\n          onChange={(e) => updateDraft({ notes: e.target.value })}\r\n          placeholder=\"Any additional notes about your character...\"\r\n          rows={3}\r\n          className=\"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 transition-colors resize-none\"\r\n        />\r\n      </div>\r\n      \r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Validation Summary */}\r\n      {validationIssues.length > 0 && (\r\n        <div className={cn(\r\n          'mb-6 p-4 rounded-xl',\r\n          validationIssues.some(i => i.severity === 'error') \r\n            ? 'bg-red-50 border border-red-200' \r\n            : 'bg-amber-50 border border-amber-200'\r\n        )}>\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <span className=\"text-xl\">\r\n              {validationIssues.some(i => i.severity === 'error') ? '⚠️' : '📋'}\r\n            </span>\r\n            <span className=\"font-medium\">\r\n              {validationIssues.filter(i => i.severity === 'error').length} error{validationIssues.filter(i => i.severity === 'error').length !== 1 ? 's' : ''}, \r\n              {' '}{validationIssues.filter(i => i.severity === 'warning').length} warning{validationIssues.filter(i => i.severity === 'warning').length !== 1 ? 's' : ''}\r\n            </span>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600\">\r\n            Click &quot;Review & Create&quot; to see all issues before saving.\r\n          </p>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Navigation */}\r\n      <div className=\"flex justify-between\">\r\n        <button\r\n          onClick={prevStep}\r\n          disabled={saving}\r\n          className=\"px-6 py-3 rounded-xl font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors disabled:opacity-50\"\r\n        >\r\n          ← Back\r\n        </button>\r\n        \r\n        <button\r\n          onClick={handleValidateAndSave}\r\n          disabled={saving}\r\n          className={cn(\r\n            'px-8 py-3 rounded-xl font-bold transition-colors flex items-center gap-2',\r\n            saving\r\n              ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n              : validationIssues.some(i => i.severity === 'error')\r\n                ? 'bg-amber-500 text-white hover:bg-amber-600'\r\n                : 'bg-green-600 text-white hover:bg-green-700'\r\n          )}\r\n        >\r\n          {saving ? (\r\n            <>\r\n              <span className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n              Saving...\r\n            </>\r\n          ) : validationIssues.length > 0 ? (\r\n            <>\r\n              📋 Review & Create\r\n            </>\r\n          ) : (\r\n            <>\r\n              ✓ Create Character\r\n            </>\r\n          )}\r\n        </button>\r\n      </div>\r\n      \r\n      {/* Validation Modal */}\r\n      <ValidationModal\r\n        isOpen={showValidation}\r\n        onClose={() => setShowValidation(false)}\r\n        issues={validationIssues}\r\n        onContinueAnyway={validationIssues.every(i => i.severity !== 'error') ? handleSave : undefined}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Character Creator Page\r\n * ======================\r\n * Multi-step character creation wizard\r\n */\r\n\r\n'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/hooks';\r\nimport { useCharacterCreatorStore } from '@/stores/character-creator-store';\r\nimport {\r\n  CreatorTabBar,\r\n  ArchetypeStep,\r\n  SpeciesStep,\r\n  AncestryStep,\r\n  AbilitiesStep,\r\n  SkillsStep,\r\n  FeatsStep,\r\n  EquipmentStep,\r\n  PowersStep,\r\n  FinalizeStep,\r\n} from '@/components/character-creator';\r\n\r\nconst STEP_COMPONENTS = {\r\n  archetype: ArchetypeStep,\r\n  species: SpeciesStep,\r\n  ancestry: AncestryStep,\r\n  abilities: AbilitiesStep,\r\n  skills: SkillsStep,\r\n  feats: FeatsStep,\r\n  equipment: EquipmentStep,\r\n  powers: PowersStep,\r\n  finalize: FinalizeStep,\r\n};\r\n\r\nexport default function CharacterCreatorPage() {\r\n  const router = useRouter();\r\n  const { user, loading } = useAuth();\r\n  const { currentStep } = useCharacterCreatorStore();\r\n  \r\n  // Redirect if not authenticated\r\n  useEffect(() => {\r\n    if (!loading && !user) {\r\n      router.push('/login?redirect=/characters/new');\r\n    }\r\n  }, [loading, user, router]);\r\n  \r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\r\n          <p className=\"text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (!user) {\r\n    return null; // Will redirect\r\n  }\r\n  \r\n  const StepComponent = STEP_COMPONENTS[currentStep];\r\n  \r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-6\">\r\n      <div className=\"max-w-6xl mx-auto px-4\">\r\n        <div className=\"mb-6\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Create New Character</h1>\r\n          <p className=\"text-gray-600 mt-1\">\r\n            Follow the steps below to build your character\r\n          </p>\r\n        </div>\r\n        \r\n        <CreatorTabBar />\r\n        \r\n        <div className=\"bg-white rounded-xl shadow-md p-6 md:p-8\">\r\n          <StepComponent />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n];\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('external-link', __iconNode);\n\nexport default ExternalLink;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 3v18', key: '108xh3' }],\n  ['path', { d: 'm19 8 3 8a5 5 0 0 1-6 0zV7', key: 'zcdpyk' }],\n  ['path', { d: 'M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1', key: '1yorad' }],\n  ['path', { d: 'm5 8 3 8a5 5 0 0 1-6 0zV7', key: 'eua70x' }],\n  ['path', { d: 'M7 21h10', key: '1b0cd5' }],\n];\n\n/**\n * @component @name Scale\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgM3YxOCIgLz4KICA8cGF0aCBkPSJtMTkgOCAzIDhhNSA1IDAgMCAxLTYgMHpWNyIgLz4KICA8cGF0aCBkPSJNMyA3aDFhMTcgMTcgMCAwIDAgOC0yIDE3IDE3IDAgMCAwIDggMmgxIiAvPgogIDxwYXRoIGQ9Im01IDggMyA4YTUgNSAwIDAgMS02IDB6VjciIC8+CiAgPHBhdGggZD0iTTcgMjFoMTAiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/scale\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Scale = createLucideIcon('scale', __iconNode);\n\nexport default Scale;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z',\n      key: 'icamh8',\n    },\n  ],\n  ['path', { d: 'm14.5 12.5 2-2', key: 'inckbg' }],\n  ['path', { d: 'm11.5 9.5 2-2', key: 'fmmyf7' }],\n  ['path', { d: 'm8.5 6.5 2-2', key: 'vc6u1g' }],\n  ['path', { d: 'm17.5 15.5 2-2', key: 'wo5hmg' }],\n];\n\n/**\n * @component @name Ruler\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuMyAxNS4zYTIuNCAyLjQgMCAwIDEgMCAzLjRsLTIuNiAyLjZhMi40IDIuNCAwIDAgMS0zLjQgMEwyLjcgOC43YTIuNDEgMi40MSAwIDAgMSAwLTMuNGwyLjYtMi42YTIuNDEgMi40MSAwIDAgMSAzLjQgMFoiIC8+CiAgPHBhdGggZD0ibTE0LjUgMTIuNSAyLTIiIC8+CiAgPHBhdGggZD0ibTExLjUgOS41IDItMiIgLz4KICA8cGF0aCBkPSJtOC41IDYuNSAyLTIiIC8+CiAgPHBhdGggZD0ibTE3LjUgMTUuNSAyLTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/ruler\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Ruler = createLucideIcon('ruler', __iconNode);\n\nexport default Ruler;\n"],"names":[],"mappings":"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","ignoreList":[11,12,13]}