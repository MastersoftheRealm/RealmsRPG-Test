module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},72500,a=>{"use strict";a.i(18239),a.s([],72500)},33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(94915),h=a.r(67161),i=f._(a.r(2305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},96221,a=>{"use strict";let b=(0,a.i(60137).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},8520,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(95245),g=a.i(59501);a.i(30485);var h=a.i(31052);a.i(69387);var i=a.i(60574),j=a.i(77967);a.i(91223);var k=a.i(56062);a.i(1380);var l=a.i(90037),m=a.i(83167),n=a.i(16810),o=a.i(75887);a.i(11909);var p=a.i(99570);function q(){let a=(0,d.useRouter)(),[q,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(null);(0,c.useEffect)(()=>{(0,j.waitForFirebase)().then(()=>{y(j.auth),A(j.db),w(!0)}).catch(a=>{console.error("Firebase initialization failed:",a),u("Failed to connect to authentication service.")})},[]);let{register:B,handleSubmit:C,formState:{errors:D}}=(0,f.useForm)({resolver:(0,g.zodResolver)(k.registerSchema)}),E=async b=>{if(!x||!z)return void u("Authentication service not ready. Please wait a moment and try again.");s(!0),u(null);try{let c=await (0,h.createUserWithEmailAndPassword)(x,b.email,b.password);await (0,h.updateProfile)(c.user,{displayName:b.displayName}),await (0,i.setDoc)((0,i.doc)(z,"users",c.user.uid),{username:b.displayName,displayName:b.displayName,email:b.email,createdAt:new Date}),await (0,i.setDoc)((0,i.doc)(z,"usernames",b.displayName),{uid:c.user.uid}),a.push("/characters")}catch(a){u(r(a))}finally{s(!1)}},F=async()=>{if(!x||!z)return void u("Authentication service not ready. Please wait a moment and try again.");s(!0),u(null);try{let b=new h.GoogleAuthProvider;b.setCustomParameters({prompt:"select_account"});let c=await (0,h.signInWithPopup)(x,b,h.browserPopupRedirectResolver);await (0,i.setDoc)((0,i.doc)(z,"users",c.user.uid),{username:c.user.displayName||c.user.email?.split("@")[0],displayName:c.user.displayName,email:c.user.email,createdAt:new Date},{merge:!0}),c.user.displayName&&await (0,i.setDoc)((0,i.doc)(z,"usernames",c.user.displayName),{uid:c.user.uid},{merge:!0}),a.push("/characters")}catch(a){if(console.error("Google sign-in error:",a),"auth/popup-blocked"===a.code)u("Popup was blocked. Please allow popups for this site and try again.");else{if("auth/cancelled-popup-request"===a.code)return;u(r(a))}}finally{s(!1)}};return(0,b.jsxs)(l.AuthCard,{title:"Create Account",subtitle:"Join the adventure",children:[t?(0,b.jsx)("div",{className:"mb-6 p-4 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:t}):null,(0,b.jsxs)("form",{onSubmit:C(E),className:"space-y-5",children:[(0,b.jsx)(m.FormInput,{label:"Display Name",type:"text",placeholder:"Choose a display name",autoComplete:"name",error:D.displayName?.message,...B("displayName")}),(0,b.jsx)(m.FormInput,{label:"Email",type:"email",placeholder:"Enter your email",autoComplete:"email",error:D.email?.message,...B("email")}),(0,b.jsx)(n.PasswordInput,{label:"Password",placeholder:"Create a password",autoComplete:"new-password",error:D.password?.message,...B("password")}),(0,b.jsx)(n.PasswordInput,{label:"Confirm Password",placeholder:"Confirm your password",autoComplete:"new-password",error:D.confirmPassword?.message,...B("confirmPassword")}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"acceptTerms",className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-primary-500 focus:ring-primary-500",...B("acceptTerms")}),(0,b.jsxs)("label",{htmlFor:"acceptTerms",className:"text-sm text-gray-300",children:["I agree to the"," ",(0,b.jsx)(e.default,{href:"/terms",className:"text-primary-400 hover:text-primary-300",children:"Terms of Service"})," ","and"," ",(0,b.jsx)(e.default,{href:"/privacy",className:"text-primary-400 hover:text-primary-300",children:"Privacy Policy"})]})]}),D.acceptTerms?(0,b.jsx)("p",{className:"text-sm text-red-400 -mt-3",children:D.acceptTerms.message}):null,(0,b.jsx)(p.Button,{type:"submit",className:"w-full",disabled:q||!v,children:v?q?"Creating account...":"Create Account":"Loading..."})]}),(0,b.jsxs)("div",{className:"my-6 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex-1 h-px bg-gray-600"}),(0,b.jsx)("span",{className:"text-gray-400 text-sm",children:"or"}),(0,b.jsx)("div",{className:"flex-1 h-px bg-gray-600"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(o.SocialButton,{provider:"google",onClick:F,disabled:q||!v}),(0,b.jsx)(o.SocialButton,{provider:"apple",onClick:()=>{u("Apple Sign-In coming soon!")},disabled:q||!v})]}),(0,b.jsxs)("p",{className:"mt-6 text-center text-gray-400",children:["Already have an account?"," ",(0,b.jsx)(e.default,{href:"/login",className:"text-primary-400 hover:text-primary-300 transition-colors font-medium",children:"Sign in"})]})]})}function r(a){switch(a.code){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";case"auth/invalid-email":return"Invalid email address.";case"auth/network-request-failed":return"Network error. Please check your connection.";case"auth/popup-closed-by-user":return"Sign-in popup was closed. Please try again.";case"auth/popup-blocked":return"Popup was blocked. Please allow popups and try again.";case"auth/unauthorized-domain":return"This domain is not authorized. Please contact support.";default:return console.error("Auth error:",a),a.message||"An error occurred during registration. Please try again."}}a.s(["default",()=>q])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4f880eed._.js.map