module.exports=[96221,a=>{"use strict";let b=(0,a.i(60137).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},76564,75181,a=>{"use strict";a.i(18894);var b=a.i(87924),c=a.i(38246);function d(){return(0,b.jsx)("footer",{className:"w-full bg-gray-400 border-t border-[#707070] h-10 flex items-center justify-center mt-auto",children:(0,b.jsxs)("div",{className:"w-full max-w-[1440px] px-4 sm:px-6 lg:px-24 flex items-center justify-between",children:[(0,b.jsx)(c.default,{href:"/terms",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Terms of Service"}),(0,b.jsx)(c.default,{href:"/privacy",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Privacy Policy"}),(0,b.jsx)("a",{href:"mailto:RealmsRoleplayGame@gmail.com",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Contact"}),(0,b.jsx)("a",{href:"https://discord.gg/Dbd5X9FQFJ",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Discord"})]})})}a.s(["Footer",()=>d],75181),a.i(20930),a.s([],76564)},92258,a=>{"use strict";let b=(0,a.i(60137).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>b],92258)},81560,a=>{"use strict";let b=(0,a.i(60137).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},46842,a=>{"use strict";let b=(0,a.i(60137).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},97834,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(30485);var e=a.i(31052);a.i(69387);var f=a.i(60574),g=a.i(77967);a.i(89606);var h=a.i(66206);a.i(76564);var i=a.i(20930);a.i(72500);var j=a.i(18239),k=a.i(46842),l=a.i(92258);let m=(0,a.i(60137).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var n=a.i(81560),o=a.i(73570),p=a.i(33441),q=a.i(33508),r=a.i(96221);function s(){let a=(0,d.useRouter)(),{user:i}=(0,h.useAuthStore)(),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)(null);(0,c.useEffect)(()=>{!async function(){if(i)try{let a=(await (0,f.getDoc)((0,f.doc)(g.db,"users",i.uid))).data();t({username:a?.username,email:i.email||void 0,createdAt:a?.createdAt?.toDate?.()||void 0})}catch(a){console.error("Error loading profile:",a)}finally{v(!1)}}()},[i]);let Y=async a=>{if(a.preventDefault(),i&&i.email){B(!0),D(null);try{let a=e.EmailAuthProvider.credential(i.email,y);await (0,e.reauthenticateWithCredential)(i,a),await (0,e.updateEmail)(i,w),await (0,f.updateDoc)((0,f.doc)(g.db,"users",i.uid),{email:w}),t(a=>a?{...a,email:w}:null),x(""),z(""),D({type:"success",text:"Email updated successfully!"})}catch(b){let a="Failed to update email";"auth/wrong-password"===b.code?a="Incorrect password":"auth/email-already-in-use"===b.code?a="Email already in use":"auth/invalid-email"===b.code&&(a="Invalid email address"),D({type:"error",text:a})}finally{B(!1)}}},Z=async a=>{if(a.preventDefault(),i&&i.email){if(G!==I)return void N({type:"error",text:"Passwords do not match"});if(G.length<6)return void N({type:"error",text:"Password must be at least 6 characters"});L(!0),N(null);try{let a=e.EmailAuthProvider.credential(i.email,E);await (0,e.reauthenticateWithCredential)(i,a),await (0,e.updatePassword)(i,G),F(""),H(""),J(""),N({type:"success",text:"Password updated successfully!"})}catch(b){let a="Failed to update password";"auth/wrong-password"===b.code?a="Current password is incorrect":"auth/weak-password"===b.code&&(a="Password is too weak"),N({type:"error",text:a})}finally{L(!1)}}},$=async()=>{if(i?.email)try{await (0,e.sendPasswordResetEmail)(g.auth,i.email),N({type:"success",text:"Password reset email sent!"})}catch{N({type:"error",text:"Failed to send reset email"})}},_=async()=>{if(i&&i.email&&"DELETE"===S){V(!0),X(null);try{let b=e.EmailAuthProvider.credential(i.email,Q);await (0,e.reauthenticateWithCredential)(i,b);let c=(0,f.collection)(g.db,"users",i.uid,"character");for(let a of(await (0,f.getDocs)(c)).docs)await (0,f.deleteDoc)(a.ref);await (0,f.deleteDoc)((0,f.doc)(g.db,"users",i.uid)),s?.username&&await (0,f.deleteDoc)((0,f.doc)(g.db,"usernames",s.username)),await (0,e.deleteUser)(i),a.push("/")}catch(b){let a="Failed to delete account";"auth/wrong-password"===b.code&&(a="Incorrect password"),X(a),V(!1)}}};return u?(0,b.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,b.jsx)("div",{className:"h-48 bg-gray-200 rounded"}),(0,b.jsx)("div",{className:"h-48 bg-gray-200 rounded"})]})}):(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,b.jsx)(k.User,{className:"w-8 h-8 text-primary-600"}),"My Account"]}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your profile and account settings"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Profile Information"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Username"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:s?.username||"Not set"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Email"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:s?.email})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Member Since"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:s?.createdAt?.toLocaleDateString()||"Unknown"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(l.Mail,{className:"w-5 h-5 text-gray-600"}),"Change Email"]}),(0,b.jsxs)("form",{onSubmit:Y,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Email Address"}),(0,b.jsx)("input",{type:"email",value:w,onChange:a=>x(a.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter new email"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,b.jsx)("input",{type:"password",value:y,onChange:a=>z(a.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter current password"})]}),C&&(0,b.jsxs)("div",{className:(0,j.cn)("p-3 rounded-lg text-sm flex items-center gap-2","success"===C.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:["success"===C.type?(0,b.jsx)(p.Check,{className:"w-4 h-4"}):(0,b.jsx)(q.X,{className:"w-4 h-4"}),C.text]}),(0,b.jsxs)("button",{type:"submit",disabled:A||!w||!y,className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[A&&(0,b.jsx)(r.Loader2,{className:"w-4 h-4 animate-spin"}),"Update Email"]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(m,{className:"w-5 h-5 text-gray-600"}),"Change Password"]}),(0,b.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,b.jsx)("input",{type:"password",value:E,onChange:a=>F(a.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter current password"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,b.jsx)("input",{type:"password",value:G,onChange:a=>H(a.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter new password"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,b.jsx)("input",{type:"password",value:I,onChange:a=>J(a.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm new password"})]}),M&&(0,b.jsxs)("div",{className:(0,j.cn)("p-3 rounded-lg text-sm flex items-center gap-2","success"===M.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:["success"===M.type?(0,b.jsx)(p.Check,{className:"w-4 h-4"}):(0,b.jsx)(q.X,{className:"w-4 h-4"}),M.text]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("button",{type:"submit",disabled:K||!E||!G||!I,className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[K&&(0,b.jsx)(r.Loader2,{className:"w-4 h-4 animate-spin"}),"Update Password"]}),(0,b.jsx)("button",{type:"button",onClick:$,className:"text-sm text-primary-600 hover:text-primary-700 hover:underline",children:"Send password reset email instead"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border-2 border-red-200",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-red-700 mb-4 flex items-center gap-2",children:[(0,b.jsx)(o.AlertTriangle,{className:"w-5 h-5"}),"Danger Zone"]}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"Deleting your account is permanent and cannot be undone. All your characters, creations, and data will be permanently deleted."}),O?(0,b.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"To confirm deletion, enter your password and type DELETE below:"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-red-700 mb-1",children:"Password"}),(0,b.jsx)("input",{type:"password",value:Q,onChange:a=>R(a.target.value),className:"w-full px-4 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500",placeholder:"Enter your password"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-red-700 mb-1",children:"Type DELETE to confirm"}),(0,b.jsx)("input",{type:"text",value:S,onChange:a=>T(a.target.value),className:"w-full px-4 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500",placeholder:"DELETE"})]}),W&&(0,b.jsx)("div",{className:"p-3 rounded-lg bg-red-100 text-red-700 text-sm",children:W}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{onClick:_,disabled:U||"DELETE"!==S||!Q,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[U&&(0,b.jsx)(r.Loader2,{className:"w-4 h-4 animate-spin"}),"Permanently Delete Account"]}),(0,b.jsx)("button",{onClick:()=>{P(!1),R(""),T(""),X(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"})]})]}):(0,b.jsxs)("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 flex items-center gap-2",children:[(0,b.jsx)(n.Trash2,{className:"w-4 h-4"}),"Delete My Account"]})]})]})}function t(){return(0,b.jsx)(i.ProtectedRoute,{children:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:(0,b.jsx)(s,{})})})}a.s(["default",()=>t],97834)}];

//# sourceMappingURL=_1a9af058._.js.map