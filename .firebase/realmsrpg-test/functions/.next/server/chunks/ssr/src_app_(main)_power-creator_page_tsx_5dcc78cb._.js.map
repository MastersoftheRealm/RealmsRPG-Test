{"version":3,"sources":["../../../../src/app/%28main%29/power-creator/page.tsx"],"sourcesContent":["/**\r\n * Power Creator Page\r\n * ==================\r\n * Tool for creating custom powers using the power parts system.\r\n * \r\n * Features:\r\n * - Select power parts from RTDB database\r\n * - Configure option levels for each part\r\n * - Calculate energy and training point costs\r\n * - Save to user's library via Cloud Functions\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState, useMemo, useCallback } from 'react';\r\nimport { X, Plus, ChevronDown, ChevronUp, Wand2, Zap, Target, Info, FolderOpen } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { ProtectedRoute } from '@/components/layout';\r\nimport { usePowerParts, useUserPowers, type PowerPart } from '@/hooks';\r\nimport { useAuthStore } from '@/stores';\r\nimport { functions } from '@/lib/firebase/client';\r\nimport { httpsCallable } from 'firebase/functions';\r\nimport { LoadFromLibraryModal } from '@/components/creator/LoadFromLibraryModal';\r\nimport { NumberStepper } from '@/components/creator/number-stepper';\r\nimport {\r\n  calculatePowerCosts,\r\n  computePowerActionTypeFromSelection,\r\n  deriveRange,\r\n  deriveArea,\r\n  deriveDuration,\r\n  type PowerPartPayload,\r\n} from '@/lib/calculators';\r\n\r\n// =============================================================================\r\n// Types\r\n// =============================================================================\r\n\r\ninterface SelectedPart {\r\n  part: PowerPart;\r\n  op_1_lvl: number;\r\n  op_2_lvl: number;\r\n  op_3_lvl: number;\r\n  applyDuration: boolean;\r\n  selectedCategory: string;\r\n}\r\n\r\ninterface DamageConfig {\r\n  amount: number;\r\n  size: number;\r\n  type: string;\r\n}\r\n\r\n// =============================================================================\r\n// Constants\r\n// =============================================================================\r\n\r\nconst ACTION_OPTIONS = [\r\n  { value: 'basic', label: 'Basic Action' },\r\n  { value: 'quick', label: 'Quick Action' },\r\n  { value: 'free', label: 'Free Action' },\r\n  { value: 'long3', label: 'Long Action (3 AP)' },\r\n  { value: 'long4', label: 'Long Action (4 AP)' },\r\n];\r\n\r\nconst DAMAGE_TYPES = [\r\n  'none', 'magic', 'fire', 'cold', 'lightning', 'physical', \r\n  'necrotic', 'radiant', 'psychic', 'poison', 'sonic'\r\n];\r\n\r\nconst DIE_SIZES = [4, 6, 8, 10, 12];\r\n\r\n// Advanced mechanics categories\r\nconst ADVANCED_CATEGORIES = [\r\n  'Action',\r\n  'Activation', \r\n  'Area of Effect',\r\n  'Duration',\r\n  'Target',\r\n  'Special',\r\n  'Restriction'\r\n] as const;\r\n\r\n// Parts that are handled in basic mechanics (excluded from advanced section)\r\nconst EXCLUDED_PARTS = new Set([\r\n  'Power Quick or Free Action',\r\n  'Power Long Action',\r\n  'Power Reaction',\r\n  'Sphere of Effect',\r\n  'Cylinder of Effect',\r\n  'Cone of Effect',\r\n  'Line of Effect',\r\n  'Trail of Effect',\r\n  'Magic Damage',\r\n  'Light Damage',\r\n  'Elemental Damage',\r\n  'Poison or Necrotic Damage',\r\n  'Sonic Damage',\r\n  'Spiritual Damage',\r\n  'Psychic Damage',\r\n  'Physical Damage',\r\n  'Duration (Round)',\r\n  'Duration (Minute)',\r\n  'Duration (Hour)',\r\n  'Duration (Days)',\r\n  'Duration (Permanent)',\r\n  'Focus for Duration',\r\n  'No Harm or Adaptation for Duration',\r\n  'Duration Ends On Activation',\r\n  'Sustain for Duration',\r\n  'Power Range'\r\n]);\r\n\r\n// Color classes for each category\r\nconst CATEGORY_COLORS: Record<string, { bg: string; border: string; text: string; hoverBg: string }> = {\r\n  'Action': { bg: 'bg-blue-100', border: 'border-blue-300', text: 'text-blue-800', hoverBg: 'hover:bg-blue-200' },\r\n  'Activation': { bg: 'bg-teal-100', border: 'border-teal-300', text: 'text-teal-800', hoverBg: 'hover:bg-teal-200' },\r\n  'Area of Effect': { bg: 'bg-green-100', border: 'border-green-300', text: 'text-green-800', hoverBg: 'hover:bg-green-200' },\r\n  'Duration': { bg: 'bg-purple-100', border: 'border-purple-300', text: 'text-purple-800', hoverBg: 'hover:bg-purple-200' },\r\n  'Target': { bg: 'bg-orange-100', border: 'border-orange-300', text: 'text-orange-800', hoverBg: 'hover:bg-orange-200' },\r\n  'Special': { bg: 'bg-amber-100', border: 'border-amber-300', text: 'text-amber-800', hoverBg: 'hover:bg-amber-200' },\r\n  'Restriction': { bg: 'bg-red-100', border: 'border-red-300', text: 'text-red-800', hoverBg: 'hover:bg-red-200' },\r\n};\r\n\r\n// =============================================================================\r\n// Subcomponents\r\n// =============================================================================\r\n\r\nfunction PartCard({\r\n  selectedPart,\r\n  index,\r\n  onRemove,\r\n  onUpdate,\r\n  allParts,\r\n}: {\r\n  selectedPart: SelectedPart;\r\n  index: number;\r\n  onRemove: () => void;\r\n  onUpdate: (updates: Partial<SelectedPart>) => void;\r\n  allParts: PowerPart[];\r\n}) {\r\n  const [expanded, setExpanded] = useState(true);\r\n  const { part } = selectedPart;\r\n\r\n  // Get categories from all parts\r\n  const categories = useMemo(() => {\r\n    const cats = new Set(allParts.map((p) => p.category));\r\n    return ['any', ...Array.from(cats).sort()];\r\n  }, [allParts]);\r\n\r\n  // Filter parts by selected category\r\n  const filteredParts = useMemo(() => {\r\n    const cat = selectedPart.selectedCategory;\r\n    if (!cat || cat === 'any') return allParts.sort((a, b) => a.name.localeCompare(b.name));\r\n    return allParts.filter((p) => p.category === cat).sort((a, b) => a.name.localeCompare(b.name));\r\n  }, [allParts, selectedPart.selectedCategory]);\r\n\r\n  // Check which options have content\r\n  const hasOption = (n: 1 | 2 | 3) => {\r\n    const desc = part[`op_${n}_desc` as keyof PowerPart] as string | undefined;\r\n    const en = part[`op_${n}_en` as keyof PowerPart] as number | undefined;\r\n    const tp = part[`op_${n}_tp` as keyof PowerPart] as number | undefined;\r\n    return (desc && desc.trim() !== '') || (en !== undefined && en !== 0) || (tp !== undefined && tp !== 0);\r\n  };\r\n\r\n  // Calculate part's individual contribution\r\n  const partEnergy =\r\n    (part.base_en || 0) +\r\n    (part.op_1_en || 0) * selectedPart.op_1_lvl +\r\n    (part.op_2_en || 0) * selectedPart.op_2_lvl +\r\n    (part.op_3_en || 0) * selectedPart.op_3_lvl;\r\n\r\n  const partTP =\r\n    (part.base_tp || 0) +\r\n    (part.op_1_tp || 0) * selectedPart.op_1_lvl +\r\n    (part.op_2_tp || 0) * selectedPart.op_2_lvl +\r\n    (part.op_3_tp || 0) * selectedPart.op_3_lvl;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"bg-gray-50 px-4 py-3 flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setExpanded(!expanded)}\r\n            className=\"text-gray-500 hover:text-gray-700\"\r\n          >\r\n            {expanded ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n          </button>\r\n          <span className=\"font-medium text-gray-900\">{part.name}</span>\r\n          <span className=\"text-sm text-gray-500\">\r\n            EN: {partEnergy.toFixed(1)} | TP: {Math.floor(partTP)}\r\n          </span>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onRemove}\r\n          className=\"text-gray-400 hover:text-red-500\"\r\n        >\r\n          <X className=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Expanded Content */}\r\n      {expanded && (\r\n        <div className=\"px-4 py-4 space-y-4\">\r\n          {/* Category and Part Selection */}\r\n          <div className=\"grid md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Category\r\n              </label>\r\n              <select\r\n                value={selectedPart.selectedCategory}\r\n                onChange={(e) => onUpdate({ selectedCategory: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n              >\r\n                {categories.map((cat) => (\r\n                  <option key={cat} value={cat}>\r\n                    {cat === 'any' ? 'All Categories' : cat}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Part\r\n              </label>\r\n              <select\r\n                value={filteredParts.findIndex((p) => p.id === part.id)}\r\n                onChange={(e) => {\r\n                  const idx = parseInt(e.target.value);\r\n                  const newPart = filteredParts[idx];\r\n                  if (newPart) {\r\n                    onUpdate({\r\n                      part: newPart,\r\n                      op_1_lvl: 0,\r\n                      op_2_lvl: 0,\r\n                      op_3_lvl: 0,\r\n                    });\r\n                  }\r\n                }}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n              >\r\n                {filteredParts.map((p, idx) => (\r\n                  <option key={p.id} value={idx}>\r\n                    {p.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Description */}\r\n          <p className=\"text-sm text-gray-600\">{part.description}</p>\r\n\r\n          {/* Base Values */}\r\n          <div className=\"flex gap-4 text-sm\">\r\n            <span className=\"text-gray-600\">\r\n              Base Energy: <strong>{part.base_en}</strong>\r\n            </span>\r\n            <span className=\"text-gray-600\">\r\n              Base TP: <strong>{part.base_tp}</strong>\r\n            </span>\r\n          </div>\r\n\r\n          {/* Options */}\r\n          {(hasOption(1) || hasOption(2) || hasOption(3)) && (\r\n            <div className=\"space-y-3 pt-2 border-t border-gray-100\">\r\n              {hasOption(1) && (\r\n                <div className=\"bg-gray-50 rounded-lg p-3\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm font-medium\">\r\n                      Option 1:{' '}\r\n                      <span className=\"text-gray-500\">\r\n                        EN {(part.op_1_en || 0) >= 0 ? '+' : ''}{part.op_1_en || 0}, TP{' '}\r\n                        {(part.op_1_tp || 0) >= 0 ? '+' : ''}{part.op_1_tp || 0}\r\n                      </span>\r\n                    </span>\r\n                    <NumberStepper\r\n                      value={selectedPart.op_1_lvl}\r\n                      onChange={(v) => onUpdate({ op_1_lvl: v })}\r\n                      label=\"Level:\"\r\n                    />\r\n                  </div>\r\n                  {part.op_1_desc && (\r\n                    <p className=\"text-sm text-gray-600\">{part.op_1_desc}</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {hasOption(2) && (\r\n                <div className=\"bg-gray-50 rounded-lg p-3\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm font-medium\">\r\n                      Option 2:{' '}\r\n                      <span className=\"text-gray-500\">\r\n                        EN {(part.op_2_en || 0) >= 0 ? '+' : ''}{part.op_2_en || 0}, TP{' '}\r\n                        {(part.op_2_tp || 0) >= 0 ? '+' : ''}{part.op_2_tp || 0}\r\n                      </span>\r\n                    </span>\r\n                    <NumberStepper\r\n                      value={selectedPart.op_2_lvl}\r\n                      onChange={(v) => onUpdate({ op_2_lvl: v })}\r\n                      label=\"Level:\"\r\n                    />\r\n                  </div>\r\n                  {part.op_2_desc && (\r\n                    <p className=\"text-sm text-gray-600\">{part.op_2_desc}</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {hasOption(3) && (\r\n                <div className=\"bg-gray-50 rounded-lg p-3\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm font-medium\">\r\n                      Option 3:{' '}\r\n                      <span className=\"text-gray-500\">\r\n                        EN {(part.op_3_en || 0) >= 0 ? '+' : ''}{part.op_3_en || 0}, TP{' '}\r\n                        {(part.op_3_tp || 0) >= 0 ? '+' : ''}{part.op_3_tp || 0}\r\n                      </span>\r\n                    </span>\r\n                    <NumberStepper\r\n                      value={selectedPart.op_3_lvl}\r\n                      onChange={(v) => onUpdate({ op_3_lvl: v })}\r\n                      label=\"Level:\"\r\n                    />\r\n                  </div>\r\n                  {part.op_3_desc && (\r\n                    <p className=\"text-sm text-gray-600\">{part.op_3_desc}</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Apply Duration Checkbox */}\r\n          <label className=\"flex items-center gap-2\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectedPart.applyDuration}\r\n              onChange={(e) => onUpdate({ applyDuration: e.target.checked })}\r\n              className=\"rounded border-gray-300\"\r\n            />\r\n            <span className=\"text-sm text-gray-700\">Apply to Duration</span>\r\n          </label>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// Advanced Mechanics Components\r\n// =============================================================================\r\n\r\ninterface AdvancedPart {\r\n  part: PowerPart;\r\n  op_1_lvl: number;\r\n  op_2_lvl: number;\r\n  op_3_lvl: number;\r\n  applyDuration: boolean;\r\n}\r\n\r\nfunction AdvancedChip({\r\n  part,\r\n  onAdd,\r\n}: {\r\n  part: PowerPart;\r\n  onAdd: () => void;\r\n}) {\r\n  const [expanded, setExpanded] = useState(false);\r\n  const colors = CATEGORY_COLORS[part.category] || CATEGORY_COLORS['Special'];\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'rounded-lg border px-3 py-2 cursor-pointer transition-all',\r\n        colors.bg,\r\n        colors.border,\r\n        colors.hoverBg\r\n      )}\r\n    >\r\n      <div className=\"flex items-center justify-between gap-2\">\r\n        <span\r\n          className={cn('text-sm font-medium', colors.text)}\r\n          onClick={() => setExpanded(!expanded)}\r\n        >\r\n          {part.name}\r\n        </span>\r\n        <button\r\n          type=\"button\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onAdd();\r\n          }}\r\n          className={cn(\r\n            'w-6 h-6 rounded-full flex items-center justify-center text-white font-bold text-sm',\r\n            'bg-primary-600 hover:bg-primary-700'\r\n          )}\r\n        >\r\n          +\r\n        </button>\r\n      </div>\r\n      {expanded && (\r\n        <div className=\"mt-2 pt-2 border-t border-current/20 text-sm space-y-1\">\r\n          <p className={colors.text}>{part.description || 'No description available.'}</p>\r\n          {part.op_1_desc && (\r\n            <p className=\"text-gray-600\">\r\n              <span className=\"font-medium\">Option 1:</span> {part.op_1_desc}\r\n            </p>\r\n          )}\r\n          {part.op_2_desc && (\r\n            <p className=\"text-gray-600\">\r\n              <span className=\"font-medium\">Option 2:</span> {part.op_2_desc}\r\n            </p>\r\n          )}\r\n          {part.op_3_desc && (\r\n            <p className=\"text-gray-600\">\r\n              <span className=\"font-medium\">Option 3:</span> {part.op_3_desc}\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction AddedAdvancedChip({\r\n  advPart,\r\n  index,\r\n  onRemove,\r\n  onUpdate,\r\n}: {\r\n  advPart: AdvancedPart;\r\n  index: number;\r\n  onRemove: () => void;\r\n  onUpdate: (updates: Partial<AdvancedPart>) => void;\r\n}) {\r\n  const [expanded, setExpanded] = useState(false);\r\n  const { part } = advPart;\r\n  const colors = CATEGORY_COLORS[part.category] || CATEGORY_COLORS['Special'];\r\n\r\n  const hasOption = (n: 1 | 2 | 3) => {\r\n    const desc = part[`op_${n}_desc` as keyof PowerPart] as string | undefined;\r\n    return desc && desc.trim() !== '';\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'rounded-lg border px-3 py-2 transition-all',\r\n        colors.bg,\r\n        colors.border\r\n      )}\r\n    >\r\n      <div className=\"flex items-center justify-between gap-2\">\r\n        <span\r\n          className={cn('text-sm font-medium cursor-pointer', colors.text)}\r\n          onClick={() => setExpanded(!expanded)}\r\n        >\r\n          {part.name}\r\n          {(advPart.op_1_lvl > 0 || advPart.op_2_lvl > 0 || advPart.op_3_lvl > 0) && (\r\n            <span className=\"ml-2 text-xs opacity-75\">\r\n              ({advPart.op_1_lvl}/{advPart.op_2_lvl}/{advPart.op_3_lvl})\r\n            </span>\r\n          )}\r\n        </span>\r\n        <button\r\n          type=\"button\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onRemove();\r\n          }}\r\n          className=\"w-6 h-6 rounded-full flex items-center justify-center text-white font-bold text-sm bg-red-500 hover:bg-red-600\"\r\n        >\r\n          ×\r\n        </button>\r\n      </div>\r\n      {expanded && (\r\n        <div className=\"mt-2 pt-2 border-t border-current/20 text-sm space-y-2\">\r\n          <p className={colors.text}>{part.description}</p>\r\n          \r\n          {hasOption(1) && (\r\n            <div className=\"bg-white/50 rounded p-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-xs text-gray-500\">\r\n                  Option 1: EN {(part.op_1_en || 0) >= 0 ? '+' : ''}{part.op_1_en || 0}, TP {(part.op_1_tp || 0) >= 0 ? '+' : ''}{part.op_1_tp || 0}\r\n                </span>\r\n                <NumberStepper\r\n                  value={advPart.op_1_lvl}\r\n                  onChange={(v) => onUpdate({ op_1_lvl: v })}\r\n                  label=\"\"\r\n                />\r\n              </div>\r\n              <p className=\"text-gray-600 mt-1\">{part.op_1_desc}</p>\r\n            </div>\r\n          )}\r\n          \r\n          {hasOption(2) && (\r\n            <div className=\"bg-white/50 rounded p-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-xs text-gray-500\">\r\n                  Option 2: EN {(part.op_2_en || 0) >= 0 ? '+' : ''}{part.op_2_en || 0}, TP {(part.op_2_tp || 0) >= 0 ? '+' : ''}{part.op_2_tp || 0}\r\n                </span>\r\n                <NumberStepper\r\n                  value={advPart.op_2_lvl}\r\n                  onChange={(v) => onUpdate({ op_2_lvl: v })}\r\n                  label=\"\"\r\n                />\r\n              </div>\r\n              <p className=\"text-gray-600 mt-1\">{part.op_2_desc}</p>\r\n            </div>\r\n          )}\r\n          \r\n          {hasOption(3) && (\r\n            <div className=\"bg-white/50 rounded p-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-xs text-gray-500\">\r\n                  Option 3: EN {(part.op_3_en || 0) >= 0 ? '+' : ''}{part.op_3_en || 0}, TP {(part.op_3_tp || 0) >= 0 ? '+' : ''}{part.op_3_tp || 0}\r\n                </span>\r\n                <NumberStepper\r\n                  value={advPart.op_3_lvl}\r\n                  onChange={(v) => onUpdate({ op_3_lvl: v })}\r\n                  label=\"\"\r\n                />\r\n              </div>\r\n              <p className=\"text-gray-600 mt-1\">{part.op_3_desc}</p>\r\n            </div>\r\n          )}\r\n          \r\n          <label className=\"flex items-center gap-2\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={advPart.applyDuration}\r\n              onChange={(e) => onUpdate({ applyDuration: e.target.checked })}\r\n              className=\"rounded border-gray-300\"\r\n            />\r\n            <span className=\"text-sm text-gray-700\">Apply Duration</span>\r\n          </label>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction AdvancedMechanicsSection({\r\n  powerParts,\r\n  selectedAdvancedParts,\r\n  onAdd,\r\n  onRemove,\r\n  onUpdate,\r\n}: {\r\n  powerParts: PowerPart[];\r\n  selectedAdvancedParts: AdvancedPart[];\r\n  onAdd: (part: PowerPart) => void;\r\n  onRemove: (index: number) => void;\r\n  onUpdate: (index: number, updates: Partial<AdvancedPart>) => void;\r\n}) {\r\n  const [expanded, setExpanded] = useState(false);\r\n\r\n  // Filter parts by category, excluding basic mechanic parts\r\n  const getPartsForCategory = useCallback(\r\n    (category: string) => {\r\n      return powerParts.filter(\r\n        (p) => p.mechanic && p.category === category && !EXCLUDED_PARTS.has(p.name)\r\n      );\r\n    },\r\n    [powerParts]\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-md overflow-hidden\">\r\n      {/* Toggle Header */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => setExpanded(!expanded)}\r\n        className=\"w-full px-6 py-4 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors\"\r\n      >\r\n        <div className=\"flex items-center gap-2\">\r\n          {expanded ? (\r\n            <ChevronUp className=\"w-5 h-5 text-gray-500\" />\r\n          ) : (\r\n            <ChevronDown className=\"w-5 h-5 text-gray-500\" />\r\n          )}\r\n          <span className=\"font-bold text-gray-900\">Advanced Power Mechanics</span>\r\n        </div>\r\n        {!expanded && selectedAdvancedParts.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {selectedAdvancedParts.slice(0, 5).map((ap, i) => {\r\n              const colors = CATEGORY_COLORS[ap.part.category] || CATEGORY_COLORS['Special'];\r\n              return (\r\n                <span\r\n                  key={i}\r\n                  className={cn('px-2 py-0.5 rounded text-xs font-medium', colors.bg, colors.text)}\r\n                >\r\n                  {ap.part.name}\r\n                </span>\r\n              );\r\n            })}\r\n            {selectedAdvancedParts.length > 5 && (\r\n              <span className=\"px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-600\">\r\n                +{selectedAdvancedParts.length - 5} more\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n      </button>\r\n\r\n      {/* Expanded Content */}\r\n      {expanded && (\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Added Advanced Mechanics */}\r\n          {selectedAdvancedParts.length > 0 && (\r\n            <div>\r\n              <h4 className=\"text-sm font-bold text-gray-700 mb-3\">Added Advanced Mechanics</h4>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {selectedAdvancedParts.map((ap, idx) => (\r\n                  <AddedAdvancedChip\r\n                    key={idx}\r\n                    advPart={ap}\r\n                    index={idx}\r\n                    onRemove={() => onRemove(idx)}\r\n                    onUpdate={(updates) => onUpdate(idx, updates)}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Category Grids */}\r\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            {ADVANCED_CATEGORIES.map((category) => {\r\n              const parts = getPartsForCategory(category);\r\n              if (parts.length === 0) return null;\r\n              return (\r\n                <div key={category}>\r\n                  <h4 className=\"text-sm font-bold text-gray-700 mb-2\">{category}</h4>\r\n                  <div className=\"space-y-2\">\r\n                    {parts.map((part) => (\r\n                      <AdvancedChip\r\n                        key={part.id}\r\n                        part={part}\r\n                        onAdd={() => onAdd(part)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// Main Component\r\n// =============================================================================\r\n\r\nfunction PowerCreatorContent() {\r\n  const { user } = useAuthStore();\r\n  \r\n  // State\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [selectedParts, setSelectedParts] = useState<SelectedPart[]>([]);\r\n  const [selectedAdvancedParts, setSelectedAdvancedParts] = useState<AdvancedPart[]>([]);\r\n  const [actionType, setActionType] = useState('basic');\r\n  const [isReaction, setIsReaction] = useState(false);\r\n  const [damage, setDamage] = useState<DamageConfig>({ amount: 0, size: 6, type: 'none' });\r\n  const [saving, setSaving] = useState(false);\r\n  const [saveMessage, setSaveMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  const [showLoadModal, setShowLoadModal] = useState(false);\r\n\r\n  // Fetch power parts\r\n  const { data: powerParts = [], isLoading, error } = usePowerParts();\r\n  \r\n  // Fetch user's saved powers for loading\r\n  const { data: userPowers, isLoading: loadingUserPowers, error: userPowersError } = useUserPowers();\r\n\r\n  // Convert selected parts to payload format for calculator\r\n  const partsPayload: PowerPartPayload[] = useMemo(\r\n    () => [\r\n      // Regular parts\r\n      ...selectedParts.map((sp) => ({\r\n        part: sp.part,\r\n        op_1_lvl: sp.op_1_lvl,\r\n        op_2_lvl: sp.op_2_lvl,\r\n        op_3_lvl: sp.op_3_lvl,\r\n        applyDuration: sp.applyDuration,\r\n      })),\r\n      // Advanced mechanic parts\r\n      ...selectedAdvancedParts.map((ap) => ({\r\n        part: ap.part,\r\n        op_1_lvl: ap.op_1_lvl,\r\n        op_2_lvl: ap.op_2_lvl,\r\n        op_3_lvl: ap.op_3_lvl,\r\n        applyDuration: ap.applyDuration,\r\n      })),\r\n    ],\r\n    [selectedParts, selectedAdvancedParts]\r\n  );\r\n\r\n  // Calculate costs\r\n  const costs = useMemo(\r\n    () => calculatePowerCosts(partsPayload, powerParts),\r\n    [partsPayload, powerParts]\r\n  );\r\n\r\n  // Derived display values\r\n  const actionTypeDisplay = useMemo(\r\n    () => computePowerActionTypeFromSelection(actionType, isReaction),\r\n    [actionType, isReaction]\r\n  );\r\n\r\n  const rangeDisplay = useMemo(() => deriveRange(partsPayload, powerParts), [partsPayload, powerParts]);\r\n  const areaDisplay = useMemo(() => deriveArea(partsPayload, powerParts), [partsPayload, powerParts]);\r\n  const durationDisplay = useMemo(() => deriveDuration(partsPayload, powerParts), [partsPayload, powerParts]);\r\n\r\n  // Actions\r\n  const addPart = useCallback(() => {\r\n    if (powerParts.length === 0) return;\r\n    setSelectedParts((prev) => [\r\n      ...prev,\r\n      {\r\n        part: powerParts[0],\r\n        op_1_lvl: 0,\r\n        op_2_lvl: 0,\r\n        op_3_lvl: 0,\r\n        applyDuration: false,\r\n        selectedCategory: 'any',\r\n      },\r\n    ]);\r\n  }, [powerParts]);\r\n\r\n  const removePart = useCallback((index: number) => {\r\n    setSelectedParts((prev) => prev.filter((_, i) => i !== index));\r\n  }, []);\r\n\r\n  const updatePart = useCallback((index: number, updates: Partial<SelectedPart>) => {\r\n    setSelectedParts((prev) =>\r\n      prev.map((sp, i) => (i === index ? { ...sp, ...updates } : sp))\r\n    );\r\n  }, []);\r\n\r\n  // Advanced part actions\r\n  const addAdvancedPart = useCallback((part: PowerPart) => {\r\n    // Don't add if already selected\r\n    if (selectedAdvancedParts.some((ap) => ap.part.id === part.id)) {\r\n      return;\r\n    }\r\n    setSelectedAdvancedParts((prev) => [\r\n      ...prev,\r\n      { part, op_1_lvl: 0, op_2_lvl: 0, op_3_lvl: 0, applyDuration: false },\r\n    ]);\r\n  }, [selectedAdvancedParts]);\r\n\r\n  const removeAdvancedPart = useCallback((index: number) => {\r\n    setSelectedAdvancedParts((prev) => prev.filter((_, i) => i !== index));\r\n  }, []);\r\n\r\n  const updateAdvancedPart = useCallback((index: number, updates: Partial<AdvancedPart>) => {\r\n    setSelectedAdvancedParts((prev) =>\r\n      prev.map((ap, i) => (i === index ? { ...ap, ...updates } : ap))\r\n    );\r\n  }, []);\r\n\r\n  const handleSave = async () => {\r\n    if (!name.trim()) {\r\n      setSaveMessage({ type: 'error', text: 'Please enter a power name' });\r\n      return;\r\n    }\r\n    if (!user) {\r\n      setSaveMessage({ type: 'error', text: 'You must be logged in to save' });\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    setSaveMessage(null);\r\n\r\n    try {\r\n      const savePowerToLibrary = httpsCallable(functions, 'savePowerToLibrary');\r\n      \r\n      // Format parts for saving (combine regular and advanced parts)\r\n      const partsToSave = [\r\n        ...selectedParts.map((sp) => ({\r\n          id: Number(sp.part.id),\r\n          name: sp.part.name,\r\n          op_1_lvl: sp.op_1_lvl,\r\n          op_2_lvl: sp.op_2_lvl,\r\n          op_3_lvl: sp.op_3_lvl,\r\n          applyDuration: sp.applyDuration,\r\n        })),\r\n        ...selectedAdvancedParts.map((ap) => ({\r\n          id: Number(ap.part.id),\r\n          name: ap.part.name,\r\n          op_1_lvl: ap.op_1_lvl,\r\n          op_2_lvl: ap.op_2_lvl,\r\n          op_3_lvl: ap.op_3_lvl,\r\n          applyDuration: ap.applyDuration,\r\n          isAdvanced: true, // Flag for identifying advanced mechanics\r\n        })),\r\n      ];\r\n\r\n      // Format damage\r\n      const damageToSave =\r\n        damage.type !== 'none' && damage.amount > 0\r\n          ? [{ amount: damage.amount, size: damage.size, type: damage.type }]\r\n          : [];\r\n\r\n      await savePowerToLibrary({\r\n        powerName: name.trim(),\r\n        powerDescription: description.trim(),\r\n        parts: partsToSave,\r\n        damage: damageToSave,\r\n      });\r\n\r\n      setSaveMessage({ type: 'success', text: 'Power saved successfully!' });\r\n      \r\n      // Reset form after short delay\r\n      setTimeout(() => {\r\n        setName('');\r\n        setDescription('');\r\n        setSelectedParts([]);\r\n        setSelectedAdvancedParts([]);\r\n        setDamage({ amount: 0, size: 6, type: 'none' });\r\n        setSaveMessage(null);\r\n      }, 2000);\r\n    } catch (err) {\r\n      console.error('Error saving power:', err);\r\n      setSaveMessage({\r\n        type: 'error',\r\n        text: `Failed to save: ${(err as Error).message}`,\r\n      });\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setName('');\r\n    setDescription('');\r\n    setSelectedParts([]);\r\n    setSelectedAdvancedParts([]);\r\n    setActionType('basic');\r\n    setIsReaction(false);\r\n    setDamage({ amount: 0, size: 6, type: 'none' });\r\n    setSaveMessage(null);\r\n  };\r\n\r\n  // Load a power from the library\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const handleLoadPower = useCallback((power: any) => {\r\n    // Set name and description\r\n    setName(power.name || '');\r\n    setDescription(power.description || '');\r\n    \r\n    // Load parts - the data structure from Firestore may vary\r\n    const savedParts = (power.parts || power.powerParts || []) as Array<{\r\n      id?: number | string;\r\n      name?: string;\r\n      op_1_lvl?: number;\r\n      op_2_lvl?: number;\r\n      op_3_lvl?: number;\r\n      applyDuration?: boolean;\r\n      isAdvanced?: boolean;\r\n    }>;\r\n    \r\n    const loadedParts: SelectedPart[] = [];\r\n    const loadedAdvancedParts: AdvancedPart[] = [];\r\n    \r\n    for (const savedPart of savedParts) {\r\n      // Find the matching part in powerParts by id or name\r\n      const matchedPart = powerParts.find(\r\n        (p) => p.id === String(savedPart.id) || p.name === savedPart.name\r\n      );\r\n      \r\n      if (matchedPart) {\r\n        const partData = {\r\n          part: matchedPart,\r\n          op_1_lvl: savedPart.op_1_lvl || 0,\r\n          op_2_lvl: savedPart.op_2_lvl || 0,\r\n          op_3_lvl: savedPart.op_3_lvl || 0,\r\n          applyDuration: savedPart.applyDuration || false,\r\n        };\r\n        \r\n        // Check if it's an advanced mechanic part\r\n        if (savedPart.isAdvanced || (matchedPart.mechanic && ADVANCED_CATEGORIES.includes(matchedPart.category as typeof ADVANCED_CATEGORIES[number]))) {\r\n          loadedAdvancedParts.push(partData);\r\n        } else {\r\n          loadedParts.push({\r\n            ...partData,\r\n            selectedCategory: matchedPart.category || 'any',\r\n          });\r\n        }\r\n      }\r\n    }\r\n    setSelectedParts(loadedParts);\r\n    setSelectedAdvancedParts(loadedAdvancedParts);\r\n    \r\n    // Load damage - handle both array and object formats\r\n    let damageData: Array<{ amount?: number; size?: number; type?: string }> = [];\r\n    if (Array.isArray(power.damage)) {\r\n      damageData = power.damage;\r\n    } else if (power.damage && typeof power.damage === 'object') {\r\n      // Convert object format to array\r\n      damageData = [{\r\n        amount: power.damage.dice || power.damage.amount || 0,\r\n        size: power.damage.sides || power.damage.size || 6,\r\n        type: power.damage.type || 'none',\r\n      }];\r\n    }\r\n    \r\n    if (damageData.length > 0) {\r\n      const dmg = damageData[0];\r\n      setDamage({\r\n        amount: dmg.amount || 0,\r\n        size: dmg.size || 6,\r\n        type: dmg.type || 'none',\r\n      });\r\n    } else {\r\n      setDamage({ amount: 0, size: 6, type: 'none' });\r\n    }\r\n    \r\n    setSaveMessage({ type: 'success', text: 'Power loaded successfully!' });\r\n    setTimeout(() => setSaveMessage(null), 2000);\r\n  }, [powerParts]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"animate-pulse space-y-4\">\r\n          <div className=\"h-8 bg-gray-200 rounded w-1/3\"></div>\r\n          <div className=\"h-4 bg-gray-200 rounded w-2/3\"></div>\r\n          <div className=\"h-64 bg-gray-200 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"bg-red-50 border border-red-200 rounded-xl p-6 text-center\">\r\n          <p className=\"text-red-700\">Failed to load power parts: {error.message}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto\">\r\n      <div className=\"mb-6 flex items-start justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-2\">\r\n            <Wand2 className=\"w-8 h-8 text-primary-600\" />\r\n            Power Creator\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Design custom powers by combining power parts. Each part contributes to the total\r\n            energy cost and training point requirements.\r\n          </p>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setShowLoadModal(true)}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors\"\r\n        >\r\n          <FolderOpen className=\"w-5 h-5\" />\r\n          Load from Library\r\n        </button>\r\n      </div>\r\n\r\n      {/* Load from Library Modal */}\r\n      <LoadFromLibraryModal\r\n        isOpen={showLoadModal}\r\n        onClose={() => setShowLoadModal(false)}\r\n        onSelect={handleLoadPower}\r\n        items={userPowers}\r\n        isLoading={loadingUserPowers}\r\n        error={userPowersError}\r\n        itemType=\"power\"\r\n        title=\"Load Power from Library\"\r\n      />\r\n\r\n      <div className=\"grid lg:grid-cols-3 gap-6\">\r\n        {/* Main Editor */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          {/* Name & Description */}\r\n          <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Power Name *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  placeholder=\"Enter power name...\"\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Description\r\n                </label>\r\n                <textarea\r\n                  value={description}\r\n                  onChange={(e) => setDescription(e.target.value)}\r\n                  placeholder=\"Describe what your power does...\"\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Type */}\r\n          <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Action Type</h3>\r\n            <div className=\"flex flex-wrap gap-4\">\r\n              <select\r\n                value={actionType}\r\n                onChange={(e) => setActionType(e.target.value)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg\"\r\n              >\r\n                {ACTION_OPTIONS.map((opt) => (\r\n                  <option key={opt.value} value={opt.value}>\r\n                    {opt.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              <label className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={isReaction}\r\n                  onChange={(e) => setIsReaction(e.target.checked)}\r\n                  className=\"rounded border-gray-300\"\r\n                />\r\n                <span className=\"text-sm\">Reaction</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Power Parts */}\r\n          <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-bold text-gray-900\">\r\n                Power Parts ({selectedParts.length})\r\n              </h3>\r\n              <button\r\n                type=\"button\"\r\n                onClick={addPart}\r\n                className=\"flex items-center gap-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                Add Part\r\n              </button>\r\n            </div>\r\n\r\n            {selectedParts.length === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <Info className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\r\n                <p>No parts added yet. Click &quot;Add Part&quot; to begin building your power.</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {selectedParts.map((sp, idx) => (\r\n                  <PartCard\r\n                    key={idx}\r\n                    selectedPart={sp}\r\n                    index={idx}\r\n                    onRemove={() => removePart(idx)}\r\n                    onUpdate={(updates) => updatePart(idx, updates)}\r\n                    allParts={powerParts}\r\n                  />\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Advanced Power Mechanics */}\r\n          <AdvancedMechanicsSection\r\n            powerParts={powerParts}\r\n            selectedAdvancedParts={selectedAdvancedParts}\r\n            onAdd={addAdvancedPart}\r\n            onRemove={removeAdvancedPart}\r\n            onUpdate={updateAdvancedPart}\r\n          />\r\n\r\n          {/* Damage (Optional) */}\r\n          <div className=\"bg-white rounded-xl shadow-md p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Damage (Optional)</h3>\r\n            <div className=\"flex flex-wrap items-center gap-4\">\r\n              <NumberStepper\r\n                value={damage.amount}\r\n                onChange={(v) => setDamage((d) => ({ ...d, amount: v }))}\r\n                label=\"Dice:\"\r\n                min={0}\r\n                max={20}\r\n              />\r\n              <div className=\"flex items-center gap-1\">\r\n                <span className=\"font-bold text-lg\">d</span>\r\n                <select\r\n                  value={damage.size}\r\n                  onChange={(e) => setDamage((d) => ({ ...d, size: parseInt(e.target.value) }))}\r\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg\"\r\n                >\r\n                  {DIE_SIZES.map((size) => (\r\n                    <option key={size} value={size}>\r\n                      {size}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <select\r\n                value={damage.type}\r\n                onChange={(e) => setDamage((d) => ({ ...d, type: e.target.value }))}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg\"\r\n              >\r\n                {DAMAGE_TYPES.map((type) => (\r\n                  <option key={type} value={type}>\r\n                    {type === 'none' ? 'No damage' : type.charAt(0).toUpperCase() + type.slice(1)}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            {damage.type !== 'none' && damage.amount > 0 && (\r\n              <p className=\"mt-2 text-sm text-gray-600\">\r\n                Damage: <strong>{damage.amount}d{damage.size} {damage.type}</strong>\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Sidebar - Cost Summary */}\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-white rounded-xl shadow-md p-6 sticky top-24\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Power Summary</h3>\r\n\r\n            {/* Cost Display */}\r\n            <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n              <div className=\"bg-blue-50 rounded-lg p-4 text-center\">\r\n                <Zap className=\"w-6 h-6 mx-auto text-blue-600 mb-1\" />\r\n                <div className=\"text-3xl font-bold text-blue-600\">{costs.totalEnergy}</div>\r\n                <div className=\"text-xs text-blue-600\">Energy Cost</div>\r\n              </div>\r\n              <div className=\"bg-purple-50 rounded-lg p-4 text-center\">\r\n                <Target className=\"w-6 h-6 mx-auto text-purple-600 mb-1\" />\r\n                <div className=\"text-3xl font-bold text-purple-600\">{costs.totalTP}</div>\r\n                <div className=\"text-xs text-purple-600\">Training Points</div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Derived Stats */}\r\n            <div className=\"space-y-2 text-sm mb-6\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Action:</span>\r\n                <span className=\"font-medium\">{actionTypeDisplay}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Range:</span>\r\n                <span className=\"font-medium\">{rangeDisplay}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Area:</span>\r\n                <span className=\"font-medium\">{areaDisplay}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Duration:</span>\r\n                <span className=\"font-medium\">{durationDisplay}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* TP Sources */}\r\n            {costs.tpSources.length > 0 && (\r\n              <div className=\"border-t border-gray-100 pt-4 mb-6\">\r\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">TP Breakdown</h4>\r\n                <ul className=\"text-xs text-gray-600 space-y-1\">\r\n                  {costs.tpSources.map((src, i) => (\r\n                    <li key={i}>• {src}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n\r\n            {/* Save Message */}\r\n            {saveMessage && (\r\n              <div\r\n                className={cn(\r\n                  'mb-4 p-3 rounded-lg text-sm',\r\n                  saveMessage.type === 'success'\r\n                    ? 'bg-green-50 text-green-700'\r\n                    : 'bg-red-50 text-red-700'\r\n                )}\r\n              >\r\n                {saveMessage.text}\r\n              </div>\r\n            )}\r\n\r\n            {/* Actions */}\r\n            <div className=\"space-y-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleSave}\r\n                disabled={saving || !name.trim()}\r\n                className={cn(\r\n                  'w-full py-3 rounded-xl font-bold transition-colors',\r\n                  saving || !name.trim()\r\n                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                    : 'bg-green-600 text-white hover:bg-green-700'\r\n                )}\r\n              >\r\n                {saving ? 'Saving...' : 'Save to Library'}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleReset}\r\n                className=\"w-full py-2 rounded-xl font-medium text-gray-600 hover:bg-gray-100 transition-colors\"\r\n              >\r\n                Reset\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function PowerCreatorPage() {\r\n  return (\r\n    <ProtectedRoute>\r\n      <div className=\"min-h-screen bg-gray-50 py-8 px-4\">\r\n        <PowerCreatorContent />\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}