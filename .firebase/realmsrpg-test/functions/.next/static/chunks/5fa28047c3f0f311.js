(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39312,e=>{"use strict";let t=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},7559,e=>{"use strict";let t=(0,e.i(75254).default)("sword",[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]]);e.s(["Sword",()=>t],7559)},20278,75505,80853,17494,22853,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>a],20278);let r=(0,t.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);e.s(["FolderOpen",()=>r],75505);var s=e.i(43476),l=e.i(71645),i=e.i(37727),n=e.i(55436);let o=(0,t.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var d=e.i(39312),c=e.i(7559),m=e.i(98919),p=e.i(31278);e.i(79121);var u=e.i(49838);let x={power:{icon:(0,s.jsx)(d.Zap,{className:"w-5 h-5"}),color:"text-blue-600",emptyText:"No saved powers found. Create some powers first!"},technique:{icon:(0,s.jsx)(c.Sword,{className:"w-5 h-5"}),color:"text-red-600",emptyText:"No saved techniques found. Create some techniques first!"},item:{icon:(0,s.jsx)(m.Shield,{className:"w-5 h-5"}),color:"text-amber-600",emptyText:"No saved items found. Create some items first!"},creature:{icon:(0,s.jsx)(o,{className:"w-5 h-5"}),color:"text-green-600",emptyText:"No saved creatures found. Create some creatures first!"}};function h({isOpen:e,onClose:t,onSelect:a,items:r,isLoading:o,error:d,itemType:c,title:m}){let[h,g]=(0,l.useState)(""),y=x[c],N=m||`Load ${c.charAt(0).toUpperCase()+c.slice(1)}`,_=(0,l.useMemo)(()=>{if(!r)return[];if(!h.trim())return r;let e=h.toLowerCase();return r.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[r,h]);return e?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,s.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg mx-4 max-h-[80vh] flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:y.color,children:y.icon}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:N})]}),(0,s.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)(i.X,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"px-6 py-3 border-b border-gray-100",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:`Search ${c}s...`,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:o?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(p.Loader2,{className:"w-8 h-8 text-primary-600 animate-spin"})}):d?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsxs)("p",{className:"text-red-600",children:["Error loading library: ",d.message]})}):0===_.length?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:r?.length===0?y.emptyText:"No matching items found."})}):(0,s.jsx)("div",{className:"space-y-2",children:_.map(e=>(0,s.jsxs)("button",{onClick:()=>{a(e),t(),g("")},className:(0,u.cn)("w-full text-left p-4 rounded-lg border border-gray-200","hover:border-primary-300 hover:bg-primary-50 transition-colors","focus:outline-none focus:ring-2 focus:ring-primary-500"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:(0,u.cn)("opacity-60",y.color),children:y.icon}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:e.name})]}),e.description&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600 line-clamp-2",children:e.description})]},e.id))})}),(0,s.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:[r?.length||0," ",c,"(s) in your library"]})})]})]}):null}e.s(["LoadFromLibraryModal",()=>h],80853);let g={primary:"bg-primary-600 hover:bg-primary-700 disabled:hover:bg-primary-600",power:"bg-primary-600 hover:bg-primary-700 disabled:hover:bg-primary-600",technique:"bg-red-600 hover:bg-red-700 disabled:hover:bg-red-600",item:"bg-amber-600 hover:bg-amber-700 disabled:hover:bg-amber-600"};function y({value:e,onChange:t,min:a=0,max:r=99,step:l=1,label:i,size:n="md",variant:o="primary",disabled:d=!1,className:c}){let m={sm:{button:"w-6 h-6 text-sm",display:"w-6 text-sm",label:"text-xs"},md:{button:"w-7 h-7 text-base",display:"w-8 text-base",label:"text-sm"},lg:{button:"w-9 h-9 text-lg",display:"w-10 text-lg",label:"text-base"}}[n];return(0,s.jsxs)("div",{className:(0,u.cn)("flex items-center gap-2",c),children:[i&&(0,s.jsx)("span",{className:(0,u.cn)("text-gray-600 font-medium",m.label),children:i}),(0,s.jsx)("button",{type:"button",onClick:()=>{!d&&e>a&&t(Math.max(a,e-l))},disabled:d||e<=a,className:(0,u.cn)("rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center font-bold transition-colors","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-200",m.button),"aria-label":"Decrease",children:"−"}),(0,s.jsx)("span",{className:(0,u.cn)("text-center font-semibold",m.display),children:e}),(0,s.jsx)("button",{type:"button",onClick:()=>{!d&&e<r&&t(Math.min(r,e+l))},disabled:d||e>=r,className:(0,u.cn)("rounded text-white flex items-center justify-center font-bold transition-colors","disabled:opacity-50 disabled:cursor-not-allowed",g[o],m.button),"aria-label":"Increase",children:"+"})]})}e.s(["NumberStepper",()=>y],17494),e.i(81547),e.i(92006),e.i(15324),e.i(3504),e.s([],22853)},3504,e=>{"use strict";var t=e.i(81547);let a=[{name:"Common",low:25,ipLow:0,ipHigh:4},{name:"Uncommon",low:100,ipLow:4.01,ipHigh:6},{name:"Rare",low:500,ipLow:6.01,ipHigh:8},{name:"Epic",low:2500,ipLow:8.01,ipHigh:11},{name:"Legendary",low:1e4,ipLow:11.01,ipHigh:14},{name:"Mythic",low:5e4,ipLow:14.01,ipHigh:16},{name:"Ascended",low:1e5,ipLow:16.01,ipHigh:1/0}];function r(e){return!!e&&!!("id"in e&&void 0!==e.id&&t.GENERAL_PROPERTY_IDS.has(e.id)||"name"in e&&e.name&&t.GENERAL_PROPERTY_NAMES.has(e.name))}function s(e,t){let r=Math.max(0,t),s=Math.max(0,e),l="Common",i=0;for(let e of a)if(r>=e.ipLow&&r<=e.ipHigh){l=e.name,i=e.low*(1+.125*s);break}let n=a.find(e=>e.name===l);return n&&(i=Math.max(i,n.low)),{currencyCost:Math.floor(i),rarity:l}}function l(e,a){let r=0,s=0,l=0;return(e||[]).forEach(e=>{let i=(0,t.findByIdOrName)(a,e);if(!i)return;let n=e.op_1_lvl||0,o=i.base_ip||0,d=i.op_1_ip||0,c=i.base_tp||0,m=i.op_1_tp||0,p=i.base_c||0,u=i.op_1_c||0;r+=o+d*n,s+=c+m*n,l+=p+u*n}),{totalIP:r,totalTP:s,totalCurrency:l}}function i(e,a){var r;let i,n,o=e.properties||[],d=l(o,a),{currencyCost:c,rarity:m}=s(d.totalCurrency,d.totalIP),p=Array.isArray(r=e.damage)?r.filter(e=>e&&e.amount&&e.size&&e.type&&"none"!==e.type).map(e=>`${e.amount}d${e.size} ${e.type}`).join(", "):"",u=function(e){let a=(e||[]).find(e=>e.id===t.PROPERTY_IDS.RANGE||"Range"===e.name);if(!a)return"Melee";let r=a.op_1_lvl||0;return`${8+8*r} Spaces`}(o),x=(i=(o||[]).find(e=>e.id===t.PROPERTY_IDS.DAMAGE_REDUCTION||"Damage Reduction"===e.name))?1+(i.op_1_lvl||0):0,h=(n=[],(o||[]).forEach(e=>{let r=(0,t.findByIdOrName)(a,e);if(!r)return;let s=e.op_1_lvl||0,l=r.base_tp||0,i=r.op_1_tp||0,o=s>0?i*s:0,d=l+o;d>0&&n.push({id:r.id||0,name:r.name||"",level:s,baseTP:l,optionTP:o,totalTP:d,description:r.description||""})}),n);return{name:e.name||"",armamentType:e.armamentType||"Weapon",description:e.description||"",rarity:m,currencyCost:c,goldCost:c,totalIP:d.totalIP,totalTP:d.totalTP,totalCurrency:d.totalCurrency,range:u,damage:p,damageReduction:x,proficiencies:h}}e.s(["calculateCurrencyCostAndRarity",()=>s,"calculateItemCosts",()=>l,"deriveItemDisplay",()=>i,"isGeneralProperty",()=>r])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55900,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>t],55900)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},98919,e=>{"use strict";let t=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],98919)},84004,44604,e=>{"use strict";e.i(45872);var t=e.i(43476),a=e.i(22016);function r(){return(0,t.jsx)("footer",{className:"w-full bg-gray-400 border-t border-[#707070] h-10 flex items-center justify-center mt-auto",children:(0,t.jsxs)("div",{className:"w-full max-w-[1440px] px-4 sm:px-6 lg:px-24 flex items-center justify-between",children:[(0,t.jsx)(a.default,{href:"/terms",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Terms of Service"}),(0,t.jsx)(a.default,{href:"/privacy",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Privacy Policy"}),(0,t.jsx)("a",{href:"mailto:RealmsRoleplayGame@gmail.com",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Contact"}),(0,t.jsx)("a",{href:"https://discord.gg/Dbd5X9FQFJ",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Discord"})]})})}e.s(["Footer",()=>r],44604),e.i(23495),e.s([],84004)},92006,81547,15324,e=>{"use strict";let t={TRUE_DAMAGE:1,ADDITIONAL_DAMAGE:6,SPLIT_DAMAGE_DICE:5,REACTION:2,LONG_ACTION:3,QUICK_OR_FREE_ACTION:4,POWER_REACTION:82,POWER_LONG_ACTION:81,POWER_QUICK_OR_FREE_ACTION:83,ADD_WEAPON_ATTACK:7,RECKLESS:8,PASS_THROUGH:9,SPIN:10,STUN:11,WIND_UP:12,KNOCKBACK:13,SLOW:14,DAZE:15,WIDE_SWING:16,ENEMY_STRENGTH_REDUCTION:17,REACH:18,EXPOSE:19,ENEMY_ATTACK_REDUCTION:20,BLEED:21,LINE_OF_EFFECT:88,CONE_OF_EFFECT:89,CYLINDER_OF_EFFECT:231,SPHERE_OF_EFFECT:232,TRAIL_OF_EFFECT:233,PIERCE_TARGETS_ON_PATH:234,ADD_MULTIPLE_TARGETS:235,EXPANDING_AREA_OF_EFFECT:236,TARGET_ONE_IN_AREA:237,EXCLUDE_AREA:238,POWER_RANGE:292,DURATION_ROUND:289,DURATION_MINUTE:290,DURATION_HOUR:291,DURATION_DAYS:293,DURATION_PERMANENT:294},a={DAMAGE_REDUCTION:1,ARMOR_STRENGTH_REQUIREMENT:2,ARMOR_AGILITY_REQUIREMENT:3,ARMOR_VITALITY_REQUIREMENT:4,AGILITY_REDUCTION:5,WEAPON_STRENGTH_REQUIREMENT:6,WEAPON_AGILITY_REQUIREMENT:7,WEAPON_VITALITY_REQUIREMENT:8,WEAPON_ACUITY_REQUIREMENT:9,WEAPON_INTELLIGENCE_REQUIREMENT:10,WEAPON_CHARISMA_REQUIREMENT:11,SPLIT_DAMAGE_DICE:12,RANGE:13,TWO_HANDED:14,SHIELD_BASE:15,ARMOR_BASE:16,WEAPON_DAMAGE:17,DAMAGE_TYPE_RESISTANCE:18,BLUDGEONING_VULNERABILITY:19,PIERCING_VULNERABILITY:20,SLASHING_VULNERABILITY:21,CRITICAL_RANGE_PLUS_1:22,CRITICAL_RANGE:23,CRITICAL_MULTIPLIER:24,THROWN:25,FINESSE:26,DAMAGED:27,GRAZE:28,LOADING:29,KNOCKBACK:30,WOUNDING:31,SLOW:32,TOPPLE:33,EXPOSE:34,CHARGING:35,HIDDEN:36,AMMUNITION:37,BLEED:38,SHIELD_AMOUNT:39,SHIELD_DAMAGE:40,REACH:41,MOUNTED:42,VERSATILE:43,CLEAVE:44,INTERCHANGEABLE:45,BLOCK:46,QUICK:47,PULL:48},r=new Set([a.SHIELD_BASE,a.ARMOR_BASE,a.RANGE,a.TWO_HANDED,a.SPLIT_DAMAGE_DICE,a.DAMAGE_REDUCTION,a.WEAPON_DAMAGE,a.AGILITY_REDUCTION,a.WEAPON_STRENGTH_REQUIREMENT,a.WEAPON_AGILITY_REQUIREMENT,a.WEAPON_VITALITY_REQUIREMENT,a.WEAPON_ACUITY_REQUIREMENT,a.WEAPON_INTELLIGENCE_REQUIREMENT,a.WEAPON_CHARISMA_REQUIREMENT,a.ARMOR_STRENGTH_REQUIREMENT,a.ARMOR_AGILITY_REQUIREMENT,a.ARMOR_VITALITY_REQUIREMENT]),s=new Set(["Shield Base","Armor Base","Range","Two-Handed","Split Damage Dice","Damage Reduction","Weapon Damage","Agility Reduction","Weapon Strength Requirement","Weapon Agility Requirement","Weapon Vitality Requirement","Weapon Acuity Requirement","Weapon Intelligence Requirement","Weapon Charisma Requirement","Armor Strength Requirement","Armor Agility Requirement","Armor Vitality Requirement"]);function l(e,t){if(Array.isArray(e)&&t){if(void 0!==t.id&&null!==t.id){let a=e.find(e=>("string"==typeof e.id?parseInt(e.id,10):e.id)===("string"==typeof t.id?parseInt(t.id,10):t.id));if(a)return a}if(t.name)return e.find(e=>e.name===t.name)}}function i(e,t){let a=void 0!==e.part;return 1===t?a?e.op_1_lvl??e.opt1Level??0:e.op_1_lvl??0:2===t?a?e.op_2_lvl??e.opt2Level??0:e.op_2_lvl??0:a?e.op_3_lvl??e.opt3Level??0:e.op_3_lvl??0}function n(e=[],t=[]){let a=0,r=0,s=1,o=1,d=1,c=!1,m=0,p=[];e.forEach(e=>{let n;if(!(n=void 0!==e.part?e.part:l(t,e)))return;let u=i(e,1),x=i(e,2),h=i(e,3),g=e.applyDuration||!1,y=(n.base_en||0)+(n.op_1_en||0)*u+(n.op_2_en||0)*x+(n.op_3_en||0)*h,N=n.duration,_=n.percentage;N?(d*=y,c=!0):_?(s*=y,g&&(o*=y)):(a+=y,g&&(r+=y));let b=Math.floor((n.base_tp||0)+(n.op_1_tp||0)*u+(n.op_2_tp||0)*x+(n.op_3_tp||0)*h);if(b>0){let e=`${b} TP: ${n.name}`;u>0&&(e+=` (Opt1 ${u})`),x>0&&(e+=` (Opt2 ${x})`),h>0&&(e+=` (Opt3 ${h})`),p.push(e)}m+=b}),c||(d=0);let u=a*s+(d+1)*r*o-r*o;return{totalEnergy:Math.ceil(u),totalTP:m,tpSources:p,energyRaw:u}}function o(e,t){let a="Basic";return"quick"===e?a="Quick":"free"===e?a="Free":"long3"===e?a="Long (3)":"long4"===e&&(a="Long (4)"),t?`${a} Reaction`:`${a} Action`}function d(e=[],a=[]){let r=e.find(e=>Number(e.part?.id??e.id)===t.POWER_RANGE||"Power Range"===(e.part?.name||e.name));if(!r)return"1 space";let s=3+3*i(r,1);return`${s} ${s>1?"spaces":"space"}`}function c(e=[],a=[]){let r=[t.SPHERE_OF_EFFECT,t.CYLINDER_OF_EFFECT,t.CONE_OF_EFFECT,t.LINE_OF_EFFECT,t.TRAIL_OF_EFFECT],s=["Sphere","Cylinder","Cone","Line","Trail"];for(let t=0;t<r.length;t++)if(e.find(e=>Number(e.part?.id??e.id)===r[t]||(e.part?.name||e.name)===`${s[t]} of Effect`))return s[t];return"1 target"}function m(e=[],a=[]){let r=(t,a)=>e.find(e=>Number(e.part?.id??e.id)===t||(e.part?.name||e.name)===a),s=e=>e?i(e,1):0;if(r(t.DURATION_PERMANENT,"Duration (Permanent)"))return"Permanent";let l=r(t.DURATION_ROUND,"Duration (Round)");if(l){let e=2+s(l);return`${e} ${e>1?"rounds":"round"}`}let n=r(t.DURATION_MINUTE,"Duration (Minute)");if(n){let e=[1,10,30][s(n)]||1;return`${e} minute${e>1?"s":""}`}let o=r(t.DURATION_HOUR,"Duration (Hour)");if(o){let e=[1,6,12][s(o)]||1;return`${e} hour${e>1?"s":""}`}let d=r(t.DURATION_DAYS,"Duration (Days)");if(d){let e=[1,10,20,30][s(d)]||1;return`${e} day${e>1?"s":""}`}return"1 round"}function p(e,a){let r=Array.isArray(e.parts)?e.parts.map(e=>({id:e.id,name:e.name,op_1_lvl:e.op_1_lvl||0,op_2_lvl:e.op_2_lvl||0,op_3_lvl:e.op_3_lvl||0,applyDuration:e.applyDuration||!1})):[],s=n(r,a),o=function(e=[],a=[]){let r="Basic",s=!1;return e.forEach(e=>{let n;if(e.part?.id!==void 0)n=Number(e.part.id);else if(void 0!==e.id)n=e.id;else if(e.part?.name||e.name){let t=l(a,{name:e.part?.name||e.name});n=t?Number(t.id):void 0}let o=i(e,1);n===t.POWER_REACTION?s=!0:n===t.POWER_QUICK_OR_FREE_ACTION?0===o?r="Quick":1===o&&(r="Free"):n===t.POWER_LONG_ACTION&&(0===o?r="Long (3)":1===o&&(r="Long (4)"))}),s?`${r} Reaction`:`${r} Action`}(r,a),p=d(r,a),u=c(r,a),x=m(r,a),h=r.map(e=>{let t,r,s,i,n,o=l(a,e);return o?(t=e.op_1_lvl||0,r=e.op_2_lvl||0,s=e.op_3_lvl||0,i=Math.floor((o.base_tp||0)+(o.op_1_tp||0)*t+(o.op_2_tp||0)*r+(o.op_3_tp||0)*s),n=o.name,t>0&&(n+=` (Opt1 ${t})`),r>0&&(n+=` (Opt2 ${r})`),s>0&&(n+=` (Opt3 ${s})`),i>0&&(n+=` | TP: ${i}`),{text:n,description:o.description||"",finalTP:i,hasTP:i>0}):null}).filter(e=>null!==e);return{name:e.name||"",description:e.description||"",actionType:o,range:p,area:u,duration:x,energy:s.totalEnergy,tp:s.totalTP,tpSources:s.tpSources,partChips:h}}function u(e){if(!Array.isArray(e))return"";let t=e.find(e=>e&&e.amount&&e.size&&e.type&&"none"!==e.type);return t?`${t.amount}d${t.size} ${t.type}`:""}function x(e){return e&&e.amount&&e.size&&"0"!==e.amount&&"0"!==e.size?`+${e.amount}d${e.size}`:""}function h(e,t){let a="Basic";return"quick"===e?a="Quick":"free"===e?a="Free":"long3"===e?a="Long (3)":"long4"===e&&(a="Long (4)"),t?`${a} Reaction`:`${a} Action`}function g(e=[],a=[]){let r=0,s=1,i=0,n=[];e.forEach(e=>{let o=l(a,{id:e.id??e.part?.id,name:e.name??e.part?.name});if(!o)return;let d=e.op_1_lvl||0,c=e.op_2_lvl||0,m=e.op_3_lvl||0,p=(o.base_en||0)+(o.op_1_en||0)*d+(o.op_2_en||0)*c+(o.op_3_en||0)*m;o.percentage?s*=p:r+=p;let u=(o.op_1_tp||0)*d;(("string"==typeof o.id?parseInt(o.id,10):o.id)===t.ADDITIONAL_DAMAGE||"Additional Damage"===o.name)&&(u=Math.floor(u));let x=Math.floor((o.base_tp||0)+u+(o.op_2_tp||0)*c+(o.op_3_tp||0)*m);if(x>0){let e=`${x} TP: ${o.name}`;d>0&&(e+=` (Opt1 ${d})`),c>0&&(e+=` (Opt2 ${c})`),m>0&&(e+=` (Opt3 ${m})`),n.push(e)}i+=x});let o=r*s;return{totalEnergy:Math.ceil(o),totalTP:i,tpSources:n,energyRaw:o}}function y(e,a){let r=Array.isArray(e.parts)?e.parts.map(e=>({id:e.id,name:e.name,op_1_lvl:e.op_1_lvl||0,op_2_lvl:e.op_2_lvl||0,op_3_lvl:e.op_3_lvl||0})):[],s=g(r,a),i=function(e=[],a=[]){let r="Basic",s=!1;return e.forEach(e=>{let i=e.id;if(void 0===i&&e.name){let t=l(a,{name:e.name});i=t?.id!==void 0?Number(t.id):void 0}let n=e.op_1_lvl||0;i===t.REACTION?s=!0:i===t.QUICK_OR_FREE_ACTION?0===n?r="Quick":1===n&&(r="Free"):i===t.LONG_ACTION?0===n?r="Long (3)":1===n&&(r="Long (4)"):"Reaction"===e.name?s=!0:"Quick or Free Action"===e.name?0===n?r="Quick":1===n&&(r="Free"):"Long Action"===e.name&&(0===n?r="Long (3)":1===n&&(r="Long (4)"))}),s?`${r} Reaction`:`${r} Action`}(r,a),n=x(e.damage),o=e.weapon&&(e.weapon.name||e.weapon.id)?e.weapon.name||`Weapon #${e.weapon.id}`:"Unarmed",d=r.map(e=>{let r,s,i,n,o,d,c=l(a,e);return c?(r=e.op_1_lvl||0,s=e.op_2_lvl||0,i=e.op_3_lvl||0,n=(c.op_1_tp||0)*r,(("string"==typeof c.id?parseInt(c.id,10):c.id)===t.ADDITIONAL_DAMAGE||"Additional Damage"===c.name)&&(n=Math.floor(n)),o=Math.floor((c.base_tp||0)+n+(c.op_2_tp||0)*s+(c.op_3_tp||0)*i),d=c.name||"",r>0&&(d+=` (Opt1 ${r})`),s>0&&(d+=` (Opt2 ${s})`),i>0&&(d+=` (Opt3 ${i})`),o>0&&(d+=` | TP: ${o}`),{text:d,description:c.description||"",finalTP:o,hasTP:o>0}):null}).filter(e=>null!==e);return{name:e.name||"",description:e.description||"",weaponName:o,actionType:i,damageStr:n,energy:s.totalEnergy,tp:s.totalTP,tpSources:s.tpSources,partChips:d}}e.s(["GENERAL_PROPERTY_IDS",0,r,"GENERAL_PROPERTY_NAMES",0,s,"PART_IDS",0,t,"PROPERTY_IDS",0,a,"findByIdOrName",()=>l],81547),e.s(["calculatePowerCosts",()=>n,"computeActionTypeFromSelection",()=>o,"deriveArea",()=>c,"deriveDuration",()=>m,"derivePowerDisplay",()=>p,"deriveRange",()=>d,"formatPowerDamage",()=>u],92006),e.s(["calculateTechniqueCosts",()=>g,"computeActionTypeFromSelection",()=>h,"deriveTechniqueDisplay",()=>y,"formatTechniqueDamage",()=>x],15324)},88593,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(37727),s=e.i(7233),l=e.i(64659),i=e.i(55900),n=e.i(98919),o=e.i(7559),d=e.i(20278),c=e.i(52571);let m=(0,e.i(75254).default)("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);var p=e.i(75505);e.i(79121);var u=e.i(49838);e.i(84004);var x=e.i(23495);e.i(64485);var h=e.i(66923),g=e.i(46775),y=e.i(80853),N=e.i(17494);e.i(28856);var _=e.i(82943),b=e.i(6245);e.i(61978);var f=e.i(52831);e.i(22853);var E=e.i(3504);let v=[{value:"Weapon",label:"Weapon",icon:o.Sword},{value:"Armor",label:"Armor",icon:n.Shield},{value:"Shield",label:"Shield",icon:n.Shield},{value:"Accessory",label:"Accessory",icon:d.Target}],A=["none","slashing","piercing","bludgeoning","fire","cold","lightning","acid","poison","necrotic","radiant","psychic"],j=[4,6,8,10,12],R={Common:"text-gray-600 bg-gray-100",Uncommon:"text-green-600 bg-green-100",Rare:"text-blue-600 bg-blue-100",Epic:"text-purple-600 bg-purple-100",Legendary:"text-amber-600 bg-amber-100",Mythic:"text-red-600 bg-red-100",Ascended:"text-pink-600 bg-pink-100"};function T({selectedProperty:e,onRemove:s,onUpdate:n,allProperties:o}){let[d,c]=(0,a.useState)(!0),{property:m}=e,p=(0,a.useMemo)(()=>o.filter(e=>!(0,E.isGeneralProperty)(e)).sort((e,t)=>e.name.localeCompare(t.name)),[o]),u=(m.base_tp||m.tp_cost||0)+(m.op_1_tp||0)*e.op_1_lvl,x=m.op_1_desc&&""!==m.op_1_desc.trim();return(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>c(!d),className:"text-gray-500 hover:text-gray-700",children:d?(0,t.jsx)(i.ChevronUp,{className:"w-5 h-5"}):(0,t.jsx)(l.ChevronDown,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:m.name}),u>0&&(0,t.jsxs)("span",{className:"text-sm text-purple-600 font-medium",children:["TP: ",u]})]}),(0,t.jsx)("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)(r.X,{className:"w-5 h-5"})})]}),d&&(0,t.jsxs)("div",{className:"px-4 py-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),(0,t.jsx)("select",{value:p.findIndex(e=>e.id===m.id),onChange:e=>{let t=p[parseInt(e.target.value)];t&&n({property:t,op_1_lvl:0})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:p.map((e,a)=>(0,t.jsx)("option",{value:a,children:e.name},e.id))})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.description}),x&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Option:"," ",m.op_1_tp&&(0,t.jsxs)("span",{className:"text-gray-500",children:["TP +",m.op_1_tp,"/level"]})]}),(0,t.jsx)(N.NumberStepper,{value:e.op_1_lvl,onChange:e=>n({op_1_lvl:e}),label:"Level:",variant:"item"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.op_1_desc})]})]})]})}function I(){let{user:e}=(0,_.useAuthStore)(),[r,l]=(0,a.useState)(""),[i,n]=(0,a.useState)(""),[x,I]=(0,a.useState)("Weapon"),[w,C]=(0,a.useState)([]),[O,L]=(0,a.useState)({amount:1,size:6,type:"slashing"}),[D,P]=(0,a.useState)(!1),[S,M]=(0,a.useState)(null),[U,k]=(0,a.useState)(!1),[G,F]=(0,a.useState)(!1),[W,$]=(0,a.useState)(0),{data:H=[],isLoading:Q,error:Y}=(0,h.useItemProperties)(),{data:z=[],isLoading:B,error:q}=(0,g.useUserItems)(),K=(0,a.useMemo)(()=>0===W?"Melee":`${8*W} spaces`,[W]),V=(0,a.useMemo)(()=>{let e=w.map(e=>({id:Number(e.property.id),name:e.property.name,op_1_lvl:e.op_1_lvl}));if("Weapon"===x&&G){let t=H.find(e=>"Two-Handed"===e.name);t&&e.push({id:Number(t.id),name:"Two-Handed",op_1_lvl:0})}if("Weapon"===x&&W>0){let t=H.find(e=>"Range"===e.name);t&&e.push({id:Number(t.id),name:"Range",op_1_lvl:W-1})}return e},[w,x,G,W,H]),X=(0,a.useMemo)(()=>(0,E.calculateItemCosts)(V,H),[V,H]),{currencyCost:Z,rarity:J}=(0,a.useMemo)(()=>(0,E.calculateCurrencyCostAndRarity)(X.totalCurrency,X.totalIP),[X.totalCurrency,X.totalIP]),ee=(0,a.useMemo)(()=>"Weapon"!==x||"none"===O.type||O.amount<1?"":`${O.amount}d${O.size} ${O.type}`,[x,O]),et=(0,a.useCallback)(()=>{let e=H.filter(e=>!(0,E.isGeneralProperty)(e));if(0===e.length)return;let t=e.find(e=>!w.some(t=>t.property.id===e.id))||e[0];C(e=>[...e,{property:t,op_1_lvl:0}])},[H,w]),ea=(0,a.useCallback)(e=>{C(t=>t.filter((t,a)=>a!==e))},[]),er=(0,a.useCallback)((e,t)=>{C(a=>a.map((a,r)=>r===e?{...a,...t}:a))},[]),es=async()=>{if(!r.trim())return void M({type:"error",text:"Please enter an item name"});if(!e)return void M({type:"error",text:"You must be logged in to save"});P(!0),M(null);try{let e=(0,f.httpsCallable)(b.functions,"saveItemToLibrary"),t=w.map(e=>({id:Number(e.property.id),name:e.property.name,op_1_lvl:e.op_1_lvl})),a="Weapon"===x&&"none"!==O.type&&O.amount>0?[{amount:O.amount,size:O.size,type:O.type}]:[];await e({itemName:r.trim(),itemDescription:i.trim(),armamentType:x,properties:t,damage:a}),M({type:"success",text:"Item saved successfully!"}),setTimeout(()=>{l(""),n(""),C([]),L({amount:1,size:6,type:"slashing"}),M(null)},2e3)}catch(e){console.error("Error saving item:",e),M({type:"error",text:`Failed to save: ${e.message}`})}finally{P(!1)}},el=(0,a.useCallback)(e=>{if(l(e.name||""),n(e.description||""),I({weapon:"Weapon",armor:"Armor",shield:"Shield",accessory:"Accessory"}[e.type?.toLowerCase()]||"Weapon"),e.properties&&Array.isArray(e.properties)&&H.length>0){let t=[];for(let a of e.properties){let e=H.find(e=>e.id===String(a.id)||e.name===a.name);e&&t.push({property:e,op_1_lvl:a.op_1_lvl||0})}C(t)}else C([]);if(e.damage&&Array.isArray(e.damage)&&e.damage.length>0){let t=e.damage[0];L({amount:t.amount||1,size:t.size||6,type:t.type||"slashing"})}else L({amount:1,size:6,type:"slashing"});k(!1)},[H]);return Q?(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),(0,t.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):Y?(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:(0,t.jsxs)("p",{className:"text-red-700",children:["Failed to load item properties: ",Y.message]})})}):(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[(0,t.jsx)(o.Sword,{className:"w-8 h-8 text-amber-600"}),"Item Creator"]}),(0,t.jsx)("p",{className:"text-gray-600",children:"Design custom weapons, armor, and accessories by combining item properties. Properties determine the item's rarity and cost."})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[(0,t.jsx)(p.FolderOpen,{className:"w-5 h-5"}),"Load from Library"]})]}),(0,t.jsx)(y.LoadFromLibraryModal,{isOpen:U,onClose:()=>k(!1),onSelect:el,items:z,isLoading:B,error:q,itemType:"item",title:"Load Item from Library"}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name *"}),(0,t.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Enter item name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Type"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:v.map(e=>(0,t.jsxs)("button",{onClick:()=>I(e.value),className:(0,u.cn)("py-2 px-3 rounded-lg font-medium text-sm transition-colors flex items-center justify-center gap-1",x===e.value?"bg-amber-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:[(0,t.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:i,onChange:e=>n(e.target.value),placeholder:"Describe your item...",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]})]})}),"Weapon"===x&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Weapon Configuration"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Handedness:"}),(0,t.jsxs)("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[(0,t.jsx)("button",{type:"button",onClick:()=>F(!1),className:(0,u.cn)("px-4 py-2 text-sm font-medium transition-colors",G?"bg-gray-50 text-gray-700 hover:bg-gray-100":"bg-amber-600 text-white"),children:"One-Handed"}),(0,t.jsx)("button",{type:"button",onClick:()=>F(!0),className:(0,u.cn)("px-4 py-2 text-sm font-medium transition-colors",G?"bg-amber-600 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"),children:"Two-Handed"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Range:"}),(0,t.jsx)("span",{className:"font-medium text-amber-600 min-w-[80px]",children:K}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>$(e=>Math.max(0,e-1)),disabled:0===W,className:"w-8 h-8 flex items-center justify-center bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"-"}),(0,t.jsx)("button",{type:"button",onClick:()=>$(e=>e+1),className:"w-8 h-8 flex items-center justify-center bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"+"})]}),W>0&&(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"(8 spaces per level)"})]})]})]}),"Weapon"===x&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Base Damage"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)(N.NumberStepper,{value:O.amount,onChange:e=>L(t=>({...t,amount:e})),label:"Dice:",min:1,max:10,variant:"item"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"font-bold text-lg",children:"d"}),(0,t.jsx)("select",{value:O.size,onChange:e=>L(t=>({...t,size:parseInt(e.target.value)})),className:"px-3 py-2 border border-gray-300 rounded-lg",children:j.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsx)("select",{value:O.type,onChange:e=>L(t=>({...t,type:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg",children:A.filter(e=>"none"!==e).map(e=>(0,t.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:["Properties (",w.length,")"]}),(0,t.jsxs)("button",{type:"button",onClick:et,className:"flex items-center gap-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors",children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4"}),"Add Property"]})]}),0===w.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(c.Info,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:'No properties added yet. Click "Add Property" to enhance your item.'})]}):(0,t.jsx)("div",{className:"space-y-4",children:w.map((e,a)=>(0,t.jsx)(T,{selectedProperty:e,onRemove:()=>ea(a),onUpdate:e=>er(a,e),allProperties:H},a))})]})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-24",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Item Summary"}),(0,t.jsx)("div",{className:"text-center mb-6",children:(0,t.jsx)("span",{className:(0,u.cn)("inline-block px-4 py-1 rounded-full font-bold text-lg",R[J]||R.Common),children:J})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 text-center",children:[(0,t.jsx)(m,{className:"w-6 h-6 mx-auto text-amber-600 mb-1"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:Z.toLocaleString()}),(0,t.jsx)("div",{className:"text-xs text-amber-600",children:"Gold Cost"})]}),(0,t.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,t.jsx)(d.Target,{className:"w-6 h-6 mx-auto text-purple-600 mb-1"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:X.totalTP}),(0,t.jsx)("div",{className:"text-xs text-purple-600",children:"Training Points"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,t.jsx)("span",{className:"font-medium",children:x})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Item Power:"}),(0,t.jsxs)("span",{className:"font-medium",children:[X.totalIP," IP"]})]}),"Weapon"===x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Handedness:"}),(0,t.jsx)("span",{className:"font-medium",children:G?"Two-Handed":"One-Handed"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Range:"}),(0,t.jsx)("span",{className:"font-medium",children:K})]})]}),ee&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Damage:"}),(0,t.jsx)("span",{className:"font-medium",children:ee})]})]}),w.length>0&&(0,t.jsxs)("div",{className:"border-t border-gray-100 pt-4 mb-6",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Properties"}),(0,t.jsx)("ul",{className:"text-xs text-gray-600 space-y-1",children:w.map((e,a)=>(0,t.jsxs)("li",{children:["• ",e.property.name,e.op_1_lvl>0&&` (Lvl ${e.op_1_lvl})`]},a))})]}),S&&(0,t.jsx)("div",{className:(0,u.cn)("mb-4 p-3 rounded-lg text-sm","success"===S.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:S.text}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("button",{type:"button",onClick:es,disabled:D||!r.trim(),className:(0,u.cn)("w-full py-3 rounded-xl font-bold transition-colors",D||!r.trim()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:D?"Saving...":"Save to Library"}),(0,t.jsx)("button",{type:"button",onClick:()=>{l(""),n(""),I("Weapon"),C([]),L({amount:1,size:6,type:"slashing"}),M(null)},className:"w-full py-2 rounded-xl font-medium text-gray-600 hover:bg-gray-100 transition-colors",children:"Reset"})]})]})})]})]})}function w(){return(0,t.jsx)(x.ProtectedRoute,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:(0,t.jsx)(I,{})})})}e.s(["default",()=>w],88593)}]);