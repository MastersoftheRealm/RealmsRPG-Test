(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54730,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(55436),l=e.i(64659),r=e.i(55900),i=e.i(37727);e.i(79121);var n=e.i(49838);function o({label:e,placeholder:a="Choose...",options:t,selectedValues:l,onSelect:r,onRemove:n,className:o=""}){let d=t.filter(e=>!l.includes(e.value));return(0,s.jsxs)("div",{className:`filter-group ${o}`,children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,s.jsxs)("select",{onChange:e=>{let s=e.target.value;s&&!l.includes(s)&&(r(s),e.target.value="")},className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",defaultValue:"",children:[(0,s.jsx)("option",{value:"",children:a}),d.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),l.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map(e=>{let a=t.find(s=>s.value===e);return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[a?.label||e,(0,s.jsx)("button",{type:"button",onClick:()=>n(e),className:"hover:bg-primary-200 rounded-full p-0.5 transition-colors","aria-label":`Remove ${a?.label||e}`,children:(0,s.jsx)(i.X,{className:"w-3 h-3"})})]},e)})})]})}var d=e.i(7233);function c({label:e="Ability Requirement",abilities:t,requirements:l,onAdd:r,onRemove:n,className:o=""}){let[c,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(""),p=t.filter(e=>!l.some(s=>s.ability===e)),h=()=>{c&&x&&(r({ability:c,maxValue:parseInt(x)}),m(""),g(""))};return(0,s.jsxs)("div",{className:`filter-group ${o}`,children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"",children:"Choose ability"}),p.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("input",{type:"number",value:x,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"===e.key&&h()},placeholder:"Max",min:"0",className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,s.jsx)("button",{type:"button",onClick:h,disabled:!c||!x,className:"px-3 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,s.jsx)(d.Plus,{className:"w-4 h-4"})})]}),l.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-100 text-amber-800 rounded-full text-sm",children:[e.ability," ≤ ",e.maxValue,(0,s.jsx)("button",{type:"button",onClick:()=>n(e.ability),className:"hover:bg-amber-200 rounded-full p-0.5 transition-colors","aria-label":`Remove ${e.ability} requirement`,children:(0,s.jsx)(i.X,{className:"w-3 h-3"})})]},e.ability))})]})}function m({label:e="Tags",placeholder:a="Choose tag",tags:t,selectedTags:l,tagMode:r,onSelect:n,onRemove:o,onModeChange:d,className:c=""}){let m=t.filter(e=>!l.includes(e));return(0,s.jsxs)("div",{className:`filter-group ${c}`,children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsxs)("select",{onChange:e=>{let s=e.target.value;s&&!l.includes(s)&&(n(s),e.target.value="")},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",defaultValue:"",children:[(0,s.jsx)("option",{value:"",children:a}),m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-2 rounded-md",children:[(0,s.jsxs)("label",{className:"flex items-center gap-1 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"tagMode",checked:"any"===r,onChange:()=>d("any"),className:"w-4 h-4 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"text-sm",children:"Any"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-1 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"tagMode",checked:"all"===r,onChange:()=>d("all"),className:"w-4 h-4 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"text-sm",children:"All"})]})]})]}),l.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>o(e),className:"hover:bg-green-200 rounded-full p-0.5 transition-colors","aria-label":`Remove ${e}`,children:(0,s.jsx)(i.X,{className:"w-3 h-3"})})]},e))})]})}function x({label:e,options:a,onChange:t,className:l=""}){return(0,s.jsxs)("div",{className:`filter-group ${l}`,children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:a.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.checked,onChange:s=>t(e.id,s.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]},e.id))})]})}function g({label:e,value:a,options:t,onChange:l,placeholder:r="Select...",className:i=""}){return(0,s.jsxs)("div",{className:`filter-group ${i}`,children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,s.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"",children:r}),t.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]})}e.s([],46352),e.i(46352),e.i(64485);var p=e.i(51206),h=e.i(94278),u=e.i(66923);let y=[{id:"feats",label:"Feats"},{id:"skills",label:"Skills"},{id:"species",label:"Species"},{id:"parts",label:"Power & Technique Parts",labelMobile:"Parts"},{id:"properties",label:"Armament Properties",labelMobile:"Properties"},{id:"equipment",label:"Equipment"}];function b(){let[e,t]=(0,a.useState)("feats");return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Codex"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Complete reference for the Realms RPG system."})]}),(0,s.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,s.jsx)("nav",{className:"flex gap-1 overflow-x-auto",children:y.map(a=>(0,s.jsxs)("button",{onClick:()=>t(a.id),className:(0,n.cn)("px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap",e===a.id?"border-primary-600 text-primary-600 bg-primary-50":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,s.jsx)("span",{className:"hidden sm:inline",children:a.label}),(0,s.jsx)("span",{className:"sm:hidden",children:a.labelMobile||a.label})]},a.id))})}),"feats"===e&&(0,s.jsx)(j,{}),"skills"===e&&(0,s.jsx)(v,{}),"species"===e&&(0,s.jsx)(w,{}),"equipment"===e&&(0,s.jsx)(C,{}),"properties"===e&&(0,s.jsx)(_,{}),"parts"===e&&(0,s.jsx)(k,{})]})}function j(){let{data:e,isLoading:n,error:d}=(0,p.useRTDBFeats)(),[h,u]=(0,a.useState)(!0),[y,b]=(0,a.useState)({col:"name",dir:1}),[j,v]=(0,a.useState)({search:"",maxLevel:null,abilityRequirements:[],categories:[],abilities:[],tags:[],tagMode:"all",showArchetype:!0,showCharacter:!0,stateFeatMode:"show"}),N=(0,a.useMemo)(()=>{if(!e)return{levels:[],abilities:[],categories:[],tags:[],abilReqAbilities:[]};let s=new Set,a=new Set,t=new Set,l=new Set,r=new Set;return e.forEach(e=>{e.lvl_req>0&&s.add(e.lvl_req),e.ability&&a.add(e.ability),e.category&&t.add(e.category),e.tags?.forEach(e=>l.add(e)),e.ability_req?.forEach(e=>r.add(e))}),{levels:Array.from(s).sort((e,s)=>e-s),abilities:Array.from(a).sort(),categories:Array.from(t).sort(),tags:Array.from(l).sort(),abilReqAbilities:Array.from(r).sort()}},[e]),w=(0,a.useMemo)(()=>e?e.filter(e=>{if(j.search){let s=j.search.toLowerCase();if(!(e.name.toLowerCase().includes(s)||e.description?.toLowerCase().includes(s)||e.tags?.some(e=>e.toLowerCase().includes(s))))return!1}if(null!==j.maxLevel&&e.lvl_req>j.maxLevel||!j.showArchetype&&!e.char_feat||!j.showCharacter&&e.char_feat||"only"===j.stateFeatMode&&!e.state_feat||"hide"===j.stateFeatMode&&e.state_feat)return!1;for(let s of j.abilityRequirements){let a=e.ability_req?.indexOf(s.ability)??-1;if(-1!==a){let t=e.abil_req_val?.[a];if("number"==typeof t&&t>s.maxValue)return!1}}if(j.categories.length>0&&!j.categories.includes(e.category)||j.abilities.length>0&&(!e.ability||!j.abilities.includes(e.ability)))return!1;if(j.tags.length>0){if("all"===j.tagMode){if(!j.tags.every(s=>e.tags?.includes(s)))return!1}else if(!j.tags.some(s=>e.tags?.includes(s)))return!1}return!0}).sort((e,s)=>{let a=y.col,t=e[a],l=s[a];return"string"==typeof t&&"string"==typeof l?y.dir*t.localeCompare(l):"number"==typeof t&&"number"==typeof l?y.dir*(t-l):0}):[],[e,j,y]),S=(0,a.useCallback)(e=>{b(s=>({col:e,dir:s.col===e&&1===s.dir?-1:1}))},[]);return d?(0,s.jsx)(M,{message:"Failed to load feats"}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(t.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:j.search,onChange:e=>v(s=>({...s,search:e.target.value})),placeholder:"Search names, tags, descriptions...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),j.search&&(0,s.jsx)("button",{onClick:()=>v(e=>({...e,search:""})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)(i.X,{className:"w-5 h-5"})})]})}),(0,s.jsxs)("button",{onClick:()=>u(!h),className:"flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 mb-4",children:[h?(0,s.jsx)(r.ChevronUp,{className:"w-4 h-4"}):(0,s.jsx)(l.ChevronDown,{className:"w-4 h-4"}),h?"Hide Filters":"Show Filters"]}),h&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)(g,{label:"Required Level",value:j.maxLevel?.toString()??"",options:N.levels.map(e=>({value:e.toString(),label:`Up to ${e}`})),onChange:e=>v(s=>({...s,maxLevel:e?parseInt(e):null})),placeholder:"No limit"}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(c,{abilities:N.abilReqAbilities,requirements:j.abilityRequirements,onAdd:e=>v(s=>({...s,abilityRequirements:[...s.abilityRequirements,e]})),onRemove:e=>v(s=>({...s,abilityRequirements:s.abilityRequirements.filter(s=>s.ability!==e)}))})}),(0,s.jsx)(o,{label:"Category",placeholder:"Choose category",options:N.categories.map(e=>({value:e,label:e})),selectedValues:j.categories,onSelect:e=>v(s=>({...s,categories:[...s.categories,e]})),onRemove:e=>v(s=>({...s,categories:s.categories.filter(s=>s!==e)}))}),(0,s.jsx)(o,{label:"Ability",placeholder:"Choose ability",options:N.abilities.map(e=>({value:e,label:e})),selectedValues:j.abilities,onSelect:e=>v(s=>({...s,abilities:[...s.abilities,e]})),onRemove:e=>v(s=>({...s,abilities:s.abilities.filter(s=>s!==e)}))}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(m,{tags:N.tags,selectedTags:j.tags,tagMode:j.tagMode,onSelect:e=>v(s=>({...s,tags:[...s.tags,e]})),onRemove:e=>v(s=>({...s,tags:s.tags.filter(s=>s!==e)})),onModeChange:e=>v(s=>({...s,tagMode:e}))})}),(0,s.jsx)(x,{label:"Feat Type",options:[{id:"archetype",label:"Archetype",checked:j.showArchetype},{id:"character",label:"Character",checked:j.showCharacter}],onChange:(e,s)=>{"archetype"===e&&v(e=>({...e,showArchetype:s})),"character"===e&&v(e=>({...e,showCharacter:s}))}}),(0,s.jsx)(g,{label:"State Feats",value:j.stateFeatMode,options:[{value:"show",label:"Show State Feats"},{value:"only",label:"Show Only State Feats"},{value:"hide",label:"Don't Show State Feats"}],onChange:e=>v(s=>({...s,stateFeatMode:e})),placeholder:"Show State Feats"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:n?"Loading...":`${w.length} feats found`}),(0,s.jsxs)("div",{className:"hidden lg:grid grid-cols-6 gap-4 px-4 py-2 bg-gray-100 rounded-t-lg font-medium text-sm text-gray-700",children:[(0,s.jsx)(q,{label:"NAME",col:"name",sortState:y,onSort:S}),(0,s.jsx)(q,{label:"REQ. LEVEL",col:"lvl_req",sortState:y,onSort:S}),(0,s.jsx)(q,{label:"CATEGORY",col:"category",sortState:y,onSort:S}),(0,s.jsx)(q,{label:"ABILITY",col:"ability",sortState:y,onSort:S}),(0,s.jsx)(q,{label:"RECOVERY",col:"rec_period",sortState:y,onSort:S}),(0,s.jsx)(q,{label:"USES",col:"uses_per_rec",sortState:y,onSort:S})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 border border-gray-200 rounded-b-lg lg:rounded-t-none rounded-lg",children:n?(0,s.jsx)(R,{}):0===w.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No feats match your filters."}):w.map(e=>(0,s.jsx)(f,{feat:e},e.id))})]})}function f({feat:e}){let[t,r]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsxs)("button",{onClick:()=>r(!t),className:"w-full grid grid-cols-2 lg:grid-cols-6 gap-2 lg:gap-4 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-gray-600 text-sm lg:text-base",children:e.lvl_req||"-"}),(0,s.jsx)("div",{className:"text-gray-600 text-sm lg:text-base hidden lg:block",children:e.category||"-"}),(0,s.jsx)("div",{className:"text-gray-600 text-sm lg:text-base hidden lg:block",children:e.ability||"-"}),(0,s.jsx)("div",{className:"text-gray-600 text-sm lg:text-base hidden lg:block",children:"-"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 text-sm lg:text-base",children:e.uses_per_rec||"-"}),(0,s.jsx)(l.ChevronDown,{className:(0,n.cn)("w-4 h-4 text-gray-400 transition-transform",t&&"rotate-180")})]})]}),t&&(0,s.jsxs)("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 bg-gray-50",children:[e.description&&(0,s.jsx)("p",{className:"text-gray-700 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.char_feat&&(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:"Character Feat"}),e.state_feat&&(0,s.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm",children:"State Feat"}),e.category&&(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:e.category})]}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[e.ability_req?.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Ability Requirements:"})," ",(0,s.jsx)("span",{className:"text-gray-600",children:e.ability_req.map((s,a)=>{let t=e.abil_req_val?.[a];return`${s}${"number"==typeof t?` ${t}`:""}`}).join(", ")})]}),e.skill_req?.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Skill Requirements:"})," ",(0,s.jsx)("span",{className:"text-gray-600",children:e.skill_req.map((s,a)=>{let t=e.skill_req_val?.[a];return`${s}${"number"==typeof t?` ${t}`:""}`}).join(", ")})]}),e.tags?.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(e=>(0,s.jsx)("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs",children:e},e))})]})]})]})}function v(){let{data:e,isLoading:t,error:i}=(0,h.useRTDBSkills)(),[n,d]=(0,a.useState)(!0),[c,m]=(0,a.useState)({col:"name",dir:1}),[p,u]=(0,a.useState)({search:"",abilities:[],baseSkill:"",showSubSkills:!0,subSkillsOnly:!1}),y=(0,a.useMemo)(()=>{if(!e)return{abilities:[],baseSkills:[]};let s=new Set,a=new Set;return e.forEach(e=>{e.ability&&s.add(e.ability),e.category&&a.add(e.category)}),{abilities:Array.from(s).sort(),baseSkills:Array.from(a).sort()}},[e]),b=(0,a.useMemo)(()=>e?e.filter(e=>{if(p.search){let s=p.search.toLowerCase();if(!e.name.toLowerCase().includes(s)&&!e.description?.toLowerCase().includes(s))return!1}return(!(p.abilities.length>0)||!!p.abilities.includes(e.ability))&&(!p.baseSkill||e.category===p.baseSkill)}).sort((e,s)=>{let a=c.col,t=e[a],l=s[a];return"string"==typeof t&&"string"==typeof l?c.dir*t.localeCompare(l):0}):[],[e,p,c]),j=(0,a.useCallback)(e=>{m(s=>({col:e,dir:s.col===e&&1===s.dir?-1:1}))},[]);return i?(0,s.jsx)(M,{message:"Failed to load skills"}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(L,{value:p.search,onChange:e=>u(s=>({...s,search:e})),placeholder:"Search names, descriptions..."})}),(0,s.jsxs)("button",{onClick:()=>d(!n),className:"flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 mb-4",children:[n?(0,s.jsx)(r.ChevronUp,{className:"w-4 h-4"}):(0,s.jsx)(l.ChevronDown,{className:"w-4 h-4"}),n?"Hide Filters":"Show Filters"]}),n&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)(o,{label:"Ability",placeholder:"Choose ability",options:y.abilities.map(e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1)})),selectedValues:p.abilities,onSelect:e=>u(s=>({...s,abilities:[...s.abilities,e]})),onRemove:e=>u(s=>({...s,abilities:s.abilities.filter(s=>s!==e)}))}),(0,s.jsx)(g,{label:"Base Skill",value:p.baseSkill,options:y.baseSkills.map(e=>({value:e,label:e})),onChange:e=>u(s=>({...s,baseSkill:e})),placeholder:"Any"}),(0,s.jsx)(x,{label:"Skill Type",options:[{id:"subSkills",label:"Include Sub-Skills",checked:p.showSubSkills},{id:"subSkillsOnly",label:"Sub-Skills Only",checked:p.subSkillsOnly}],onChange:(e,s)=>{"subSkills"===e&&u(e=>({...e,showSubSkills:s})),"subSkillsOnly"===e&&u(e=>({...e,subSkillsOnly:s}))}})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:t?"Loading...":`${b.length} skills found`}),(0,s.jsxs)("div",{className:"hidden lg:grid grid-cols-3 gap-4 px-4 py-2 bg-gray-100 rounded-t-lg font-medium text-sm text-gray-700",children:[(0,s.jsx)(q,{label:"NAME",col:"name",sortState:c,onSort:j}),(0,s.jsx)(q,{label:"ABILITIES",col:"ability",sortState:c,onSort:j}),(0,s.jsx)(q,{label:"BASE SKILL",col:"category",sortState:c,onSort:j})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 border border-gray-200 rounded-b-lg lg:rounded-t-none rounded-lg",children:t?(0,s.jsx)(R,{}):0===b.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No skills match your filters."}):b.map(e=>(0,s.jsx)(N,{skill:e},e.id))})]})}function N({skill:e}){let[t,r]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsxs)("button",{onClick:()=>r(!t),className:"w-full grid grid-cols-2 lg:grid-cols-3 gap-2 lg:gap-4 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-gray-600 capitalize",children:e.ability||"-"}),(0,s.jsxs)("div",{className:"hidden lg:flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:e.category||"-"}),(0,s.jsx)(l.ChevronDown,{className:(0,n.cn)("w-4 h-4 text-gray-400 transition-transform",t&&"rotate-180")})]})]}),t&&e.description&&(0,s.jsx)("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 bg-gray-50",children:(0,s.jsx)("p",{className:"text-gray-700",children:e.description})})]})}function w(){let{data:e,isLoading:t,error:i}=(0,u.useSpecies)();(0,u.useTraits)();let[n,d]=(0,a.useState)(!0),[c,m]=(0,a.useState)({col:"name",dir:1}),[x,g]=(0,a.useState)({search:"",types:[],sizes:[]}),p=(0,a.useMemo)(()=>{if(!e)return{types:[],sizes:[]};let s=new Set,a=new Set;return e.forEach(e=>{e.type&&s.add(e.type),e.sizes?.forEach(e=>a.add(e))}),{types:Array.from(s).sort(),sizes:Array.from(a).sort()}},[e]),h=(0,a.useMemo)(()=>e?e.filter(e=>{if(x.search){let s=x.search.toLowerCase();if(!e.name.toLowerCase().includes(s)&&!e.description?.toLowerCase().includes(s))return!1}return(!(x.types.length>0)||!!x.types.includes(e.type))&&(!(x.sizes.length>0)||!!e.sizes?.some(e=>x.sizes.includes(e)))}).sort((e,s)=>{let a=c.col,t=e[a],l=s[a];return"string"==typeof t&&"string"==typeof l?c.dir*t.localeCompare(l):0}):[],[e,x,c]),y=(0,a.useCallback)(e=>{m(s=>({col:e,dir:s.col===e&&1===s.dir?-1:1}))},[]);return i?(0,s.jsx)(M,{message:"Failed to load species"}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(L,{value:x.search,onChange:e=>g(s=>({...s,search:e})),placeholder:"Search names, descriptions..."})}),(0,s.jsxs)("button",{onClick:()=>d(!n),className:"flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 mb-4",children:[n?(0,s.jsx)(r.ChevronUp,{className:"w-4 h-4"}):(0,s.jsx)(l.ChevronDown,{className:"w-4 h-4"}),n?"Hide Filters":"Show Filters"]}),n&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)(o,{label:"Type",placeholder:"Choose type",options:p.types.map(e=>({value:e,label:e})),selectedValues:x.types,onSelect:e=>g(s=>({...s,types:[...s.types,e]})),onRemove:e=>g(s=>({...s,types:s.types.filter(s=>s!==e)}))}),(0,s.jsx)(o,{label:"Size",placeholder:"Choose size",options:p.sizes.map(e=>({value:e,label:e})),selectedValues:x.sizes,onSelect:e=>g(s=>({...s,sizes:[...s.sizes,e]})),onRemove:e=>g(s=>({...s,sizes:s.sizes.filter(s=>s!==e)}))})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:t?"Loading...":`${h.length} species found`}),(0,s.jsxs)("div",{className:"hidden lg:grid grid-cols-4 gap-4 px-4 py-2 bg-gray-100 rounded-t-lg font-medium text-sm text-gray-700",children:[(0,s.jsx)(q,{label:"NAME",col:"name",sortState:c,onSort:y}),(0,s.jsx)(q,{label:"TYPE",col:"type",sortState:c,onSort:y}),(0,s.jsx)("div",{children:"SIZES"}),(0,s.jsx)("div",{children:"DESCRIPTION"})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 border border-gray-200 rounded-b-lg lg:rounded-t-none rounded-lg",children:t?(0,s.jsx)(R,{}):0===h.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No species match your filters."}):h.map(e=>(0,s.jsx)(S,{species:e},e.id))})]})}function S({species:e}){let[t,r]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsxs)("button",{onClick:()=>r(!t),className:"w-full grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-4 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-gray-600",children:e.type||"-"}),(0,s.jsx)("div",{className:"text-gray-600 hidden lg:block",children:e.sizes?.join(", ")||"-"}),(0,s.jsxs)("div",{className:"hidden lg:flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-gray-600 truncate",children:[e.description?.substring(0,50),"..."]}),(0,s.jsx)(l.ChevronDown,{className:(0,n.cn)("w-4 h-4 text-gray-400 transition-transform flex-shrink-0",t&&"rotate-180")})]})]}),t&&(0,s.jsxs)("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 bg-gray-50 space-y-4",children:[e.description&&(0,s.jsx)("p",{className:"text-gray-700",children:e.description}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.ave_height&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Avg Height:"})," ",e.ave_height," cm"]}),e.ave_weight&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Avg Weight:"})," ",e.ave_weight," kg"]}),e.speed&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Speed:"})," ",e.speed," ft"]}),e.languages?.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Languages:"})," ",e.languages.join(", ")]})]}),e.species_traits?.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Species Traits"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.species_traits.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:e},e))})]}),e.ancestry_traits?.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Ancestry Traits"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.ancestry_traits.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-sm",children:e},e))})]}),e.flaws?.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Flaws"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.flaws.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded text-sm",children:e},e))})]}),e.skills?.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Skills"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skills.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded text-sm",children:e},e))})]})]})]})}function C(){let{data:e,isLoading:t,error:l}=(0,u.useEquipment)(),[r,i]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[d,c]=(0,a.useState)({col:"name",dir:1}),m=(0,a.useMemo)(()=>{if(!e)return[];let s=new Set;return e.forEach(e=>e.type&&s.add(e.type)),Array.from(s).sort()},[e]),x=(0,a.useMemo)(()=>e?e.filter(e=>(!r||!!e.name.toLowerCase().includes(r.toLowerCase())||!!e.description?.toLowerCase().includes(r.toLowerCase()))&&(!n||e.type===n)).sort((e,s)=>"name"===d.col?d.dir*e.name.localeCompare(s.name):"gold_cost"===d.col?d.dir*((e.gold_cost||0)-(s.gold_cost||0)):0):[],[e,r,n,d]);return l?(0,s.jsx)(M,{message:"Failed to load equipment"}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(L,{value:r,onChange:i,placeholder:"Search equipment..."})}),(0,s.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:t?"Loading...":`${x.length} items found`}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 border border-gray-200 rounded-lg",children:t?(0,s.jsx)(R,{}):0===x.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No equipment found."}):x.map(e=>(0,s.jsxs)("div",{className:"px-4 py-3 hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.type," ",e.subtype&&`• ${e.subtype}`]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("div",{className:"font-medium text-amber-600",children:[e.gold_cost," gp"]})})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:e.description})]},e.id))})]})}function _(){let{data:e,isLoading:t,error:l}=(0,u.useItemProperties)(),[r,i]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),d=(0,a.useMemo)(()=>{if(!e)return[];let s=new Set;return e.forEach(e=>e.type&&s.add(e.type)),Array.from(s).sort()},[e]),c=(0,a.useMemo)(()=>e?e.filter(e=>(!r||!!e.name.toLowerCase().includes(r.toLowerCase())||!!e.description?.toLowerCase().includes(r.toLowerCase()))&&(!n||e.type===n)).sort((e,s)=>e.name.localeCompare(s.name)):[],[e,r,n]);return l?(0,s.jsx)(M,{message:"Failed to load properties"}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(L,{value:r,onChange:i,placeholder:"Search properties..."})}),(0,s.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:t?"Loading...":`${c.length} properties found`}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 border border-gray-200 rounded-lg",children:t?(0,s.jsx)(R,{}):0===c.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No properties found."}):c.map(e=>(0,s.jsxs)("div",{className:"px-4 py-3 hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.type})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),void 0!==e.tp_cost&&(0,s.jsxs)("div",{className:"text-sm text-amber-600 mt-1",children:["TP Cost: ",e.tp_cost]})]},e.id))})]})}function k(){let{data:e,isLoading:t,error:l}=(0,u.useParts)(),[r,i]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[m,x]=(0,a.useState)({col:"name",dir:1}),g=(0,a.useMemo)(()=>{if(!e)return{categories:[],types:[]};let s=new Set,a=new Set;return e.forEach(e=>{e.category&&s.add(e.category),e.type&&a.add(e.type)}),{categories:Array.from(s).sort(),types:Array.from(a).sort()}},[e]),p=(0,a.useMemo)(()=>e?e.filter(e=>(!r||!!e.name.toLowerCase().includes(r.toLowerCase())||!!e.description?.toLowerCase().includes(r.toLowerCase()))&&(!n||e.category===n)&&(!d||e.type===d)).sort((e,s)=>"name"===m.col?m.dir*e.name.localeCompare(s.name):"category"===m.col?m.dir*(e.category||"").localeCompare(s.category||""):"type"===m.col?m.dir*(e.type||"").localeCompare(s.type||""):0):[],[e,r,n,d,m]),h=(0,a.useCallback)(e=>{x(s=>({col:e,dir:s.col===e&&1===s.dir?-1:1}))},[]);return l?(0,s.jsx)(M,{message:"Failed to load parts"}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(L,{value:r,onChange:i,placeholder:"Search parts..."})}),(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),g.categories.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),g.types.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:t?"Loading...":`${p.length} parts found`}),(0,s.jsxs)("div",{className:"hidden lg:grid grid-cols-4 gap-4 px-4 py-2 bg-gray-100 rounded-t-lg font-medium text-sm text-gray-700",children:[(0,s.jsx)(q,{label:"NAME",col:"name",sortState:m,onSort:h}),(0,s.jsx)(q,{label:"CATEGORY",col:"category",sortState:m,onSort:h}),(0,s.jsx)(q,{label:"TYPE",col:"type",sortState:m,onSort:h}),(0,s.jsx)("div",{children:"COST"})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 border border-gray-200 rounded-b-lg lg:rounded-t-none rounded-lg",children:t?(0,s.jsx)(R,{}):0===p.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No parts found."}):p.map(e=>(0,s.jsx)(A,{part:e},e.id))})]})}function A({part:e}){let[t,r]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsxs)("button",{onClick:()=>r(!t),className:"w-full grid grid-cols-2 lg:grid-cols-4 gap-2 lg:gap-4 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-gray-600",children:e.category||"-"}),(0,s.jsx)("div",{className:"text-gray-600 hidden lg:block",children:e.type||"-"}),(0,s.jsxs)("div",{className:"hidden lg:flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:[e.base_en?`EN: ${e.base_en}`:"",e.base_tp?` TP: ${e.base_tp}`:""]}),(0,s.jsx)(l.ChevronDown,{className:(0,n.cn)("w-4 h-4 text-gray-400 transition-transform",t&&"rotate-180")})]})]}),t&&(0,s.jsxs)("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 bg-gray-50",children:[e.description&&(0,s.jsx)("p",{className:"text-gray-700 mb-3",children:e.description}),e.mechanic&&(0,s.jsxs)("div",{className:"text-sm mb-2",children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Mechanic:"})," ",(0,s.jsx)("span",{className:"text-gray-600",children:e.mechanic})]}),(e.op_1_desc||e.op_2_desc||e.op_3_desc)&&(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-gray-700",children:"Options:"}),e.op_1_desc&&(0,s.jsxs)("div",{className:"pl-4 text-gray-600",children:["1. ",e.op_1_desc,e.op_1_en&&` (EN: ${e.op_1_en})`,e.op_1_tp&&` (TP: ${e.op_1_tp})`]}),e.op_2_desc&&(0,s.jsxs)("div",{className:"pl-4 text-gray-600",children:["2. ",e.op_2_desc,e.op_2_en&&` (EN: ${e.op_2_en})`,e.op_2_tp&&` (TP: ${e.op_2_tp})`]}),e.op_3_desc&&(0,s.jsxs)("div",{className:"pl-4 text-gray-600",children:["3. ",e.op_3_desc,e.op_3_en&&` (EN: ${e.op_3_en})`,e.op_3_tp&&` (TP: ${e.op_3_tp})`]})]})]})]})}function L({value:e,onChange:a,placeholder:l}){return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(t.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>a(e.target.value),placeholder:l,className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e&&(0,s.jsx)("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)(i.X,{className:"w-5 h-5"})})]})}function q({label:e,col:a,sortState:t,onSort:i}){let n=t.col===a;return(0,s.jsxs)("button",{onClick:()=>i(a),className:"flex items-center gap-1 text-left hover:text-gray-900",children:[e,n&&(1===t.dir?(0,s.jsx)(r.ChevronUp,{className:"w-3 h-3"}):(0,s.jsx)(l.ChevronDown,{className:"w-3 h-3"}))]})}function R(){return(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})}function M({message:e}){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 mb-4 text-red-500",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})}),(0,s.jsx)("p",{className:"text-red-500 font-medium",children:e}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Please try again later"})]})}e.s(["default",()=>b],54730)}]);