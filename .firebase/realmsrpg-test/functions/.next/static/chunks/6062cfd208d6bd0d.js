(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55900,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>t],55900)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},51206,e=>{"use strict";var t=e.i(66923);e.s(["useRTDBFeats",()=>t.useFeats])},94278,e=>{"use strict";var t=e.i(66923);e.s(["useRTDBSkills",()=>t.useSkills])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},40437,6416,e=>{"use strict";let t={BASE_ABILITY_POINTS:7,ABILITY_POINTS_PER_3_LEVELS:1,BASE_SKILL_POINTS:2,SKILL_POINTS_PER_LEVEL:3,BASE_PROFICIENCY:2,PROFICIENCY_PER_5_LEVELS:1,HIT_ENERGY_PER_LEVEL:12},a={BASE_HIT_ENERGY:18,BASE_TRAINING_POINTS:22,TP_PER_LEVEL_MULTIPLIER:2},r={BASE_HIT_ENERGY:26,BASE_TRAINING_POINTS:9,TP_PER_LEVEL:1,BASE_FEAT_POINTS:4,FEAT_POINTS_PER_LEVEL:1,BASE_CURRENCY:200,CURRENCY_GROWTH:1.45},s={MIN:-2,MAX_STARTING:3,MAX_ABSOLUTE:6,COST_INCREASE_THRESHOLD:4};function l(e,a=!1){let r=parseFloat(String(e))||1;if(a&&r<1)return Math.ceil(t.BASE_ABILITY_POINTS*r);if(r<1)return 0;if(r<3)return t.BASE_ABILITY_POINTS;let s=Math.floor((r-1)/3)*t.ABILITY_POINTS_PER_3_LEVELS;return t.BASE_ABILITY_POINTS+s}function i(e,a=!1){let r=parseFloat(String(e))||1;return a&&r<1?Math.ceil(5*r):t.BASE_SKILL_POINTS+t.SKILL_POINTS_PER_LEVEL*Math.floor(r)}function n(e,s="PLAYER",l=!1){let i=parseFloat(String(e))||1,o="CREATURE"===s?r:a;return l&&i<1?Math.ceil(o.BASE_HIT_ENERGY*i):o.BASE_HIT_ENERGY+t.HIT_ENERGY_PER_LEVEL*(i-1)}function o(e,a=!1){let r=parseFloat(String(e))||1;if(a&&r<1)return Math.ceil(t.BASE_PROFICIENCY*r);if(r<1)return 0;if(r<5)return t.BASE_PROFICIENCY;let s=Math.floor(r/5)*t.PROFICIENCY_PER_5_LEVELS;return t.BASE_PROFICIENCY+s}function d(e,t=0){let r=t||0,s=a.BASE_TRAINING_POINTS,l=a.TP_PER_LEVEL_MULTIPLIER+r;return s+r+l*(e-1)}function c(e,t=0){let a=parseFloat(String(e))||1,s=t||0;if(a<1)return Math.ceil(22*a)+s;let l=r.BASE_TRAINING_POINTS,i=r.TP_PER_LEVEL+s;return a<=1?l+s:l+s+(a-1)*i}function u(e){let t=parseFloat(String(e))||1;return Math.round(r.BASE_CURRENCY*Math.pow(r.CURRENCY_GROWTH,t-1))}function p(e){return Math.max(0,Math.floor(e))}function h(e){return e>=s.COST_INCREASE_THRESHOLD?2:1}function m(e,t,a=!0){return!(e>=(a?s.MAX_STARTING:s.MAX_ABSOLUTE))&&t>=h(e)}function x(e){return e>s.MIN}e.s(["ABILITY_LIMITS",0,s,"CREATURE_CONSTANTS",0,r,"PLAYER_CONSTANTS",0,a,"SHARED_CONSTANTS",0,t],6416),e.s(["calculateAbilityPoints",()=>l,"calculateCreatureCurrency",()=>u,"calculateCreatureTrainingPoints",()=>c,"calculateHealthEnergyPool",()=>n,"calculateMaxCharacterFeats",()=>p,"calculateProficiency",()=>o,"calculateSkillPoints",()=>i,"calculateTrainingPoints",()=>d,"canDecreaseAbility",()=>x,"canIncreaseAbility",()=>m,"getAbilityIncreaseCost",()=>h],40437)},90597,e=>{"use strict";let t=(0,e.i(75254).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>t],90597)},36121,e=>{"use strict";let t=(0,e.i(75254).default)("swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);e.s(["Swords",()=>t],36121)},33060,e=>{"use strict";let t=(0,e.i(75254).default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);e.s(["Wand2",()=>t],33060)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},91065,58620,29460,78689,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(64659),s=e.i(55900),l=e.i(43531),i=e.i(75254);let n=(0,i.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var o=e.i(27612);let d=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),c=(0,i.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var u=e.i(63209);let p={default:"bg-muted text-muted-foreground",primary:"bg-primary/20 text-primary",success:"bg-green-500/20 text-green-400",warning:"bg-yellow-500/20 text-yellow-400",danger:"bg-red-500/20 text-red-400",info:"bg-blue-500/20 text-blue-400"};function h({item:e,mode:i="view",actions:h,showDetails:m=!1,compact:x=!1,className:g=""}){let[f,y]=(0,a.useState)(m),b=e.details&&e.details.length>0||e.description,v="select"===i,N="manage"===i,j=()=>{v&&!e.isDisabled?e.isSelected?h?.onDeselect?.(e):h?.onSelect?.(e):b&&y(!f)};return(0,t.jsxs)("div",{className:`
        rounded-lg border transition-all duration-200
        ${e.isSelected?"border-primary bg-primary/10 ring-1 ring-primary":"border-border bg-card hover:border-primary/50"}
        ${e.isDisabled?"opacity-50 cursor-not-allowed":v||b?"cursor-pointer":""}
        ${x?"p-2":"p-3"}
        ${g}
      `,onClick:j,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),j())},tabIndex:v&&!e.isDisabled?0:void 0,role:v?"button":void 0,"aria-pressed":v?e.isSelected:void 0,"aria-disabled":e.isDisabled,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[v&&(0,t.jsx)("div",{className:`
                mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 transition-colors
                ${e.isSelected?"bg-primary border-primary":"border-muted-foreground/40"}
                ${e.isDisabled?"opacity-50":""}
              `,children:e.isSelected&&(0,t.jsx)(l.Check,{className:"w-3 h-3 text-primary-foreground"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h3",{className:`font-medium text-foreground truncate ${x?"text-sm":""}`,children:e.name}),e.subtitle&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.subtitle})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!x&&e.stats&&e.stats.length>0&&(0,t.jsx)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:e.stats.slice(0,3).map((e,a)=>(0,t.jsxs)("span",{className:"whitespace-nowrap",children:[(0,t.jsxs)("span",{className:"text-xs opacity-70",children:[e.label,":"]})," ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:e.value})]},a))}),void 0!==e.cost&&(0,t.jsxs)("span",{className:"text-sm font-medium text-primary whitespace-nowrap",children:[e.cost," ",e.costLabel]}),N&&(0,t.jsxs)("div",{className:"flex items-center gap-1",onClick:e=>e.stopPropagation(),children:[h?.onView&&(0,t.jsx)("button",{onClick:()=>h.onView?.(e),className:"p-1.5 rounded hover:bg-muted transition-colors",title:"View",children:(0,t.jsx)(c,{className:"w-4 h-4 text-muted-foreground"})}),h?.onEdit&&(0,t.jsx)("button",{onClick:()=>h.onEdit?.(e),className:"p-1.5 rounded hover:bg-muted transition-colors",title:"Edit",children:(0,t.jsx)(n,{className:"w-4 h-4 text-muted-foreground"})}),h?.onDuplicate&&(0,t.jsx)("button",{onClick:()=>h.onDuplicate?.(e),className:"p-1.5 rounded hover:bg-muted transition-colors",title:"Duplicate",children:(0,t.jsx)(d,{className:"w-4 h-4 text-muted-foreground"})}),h?.onDelete&&(0,t.jsx)("button",{onClick:()=>h.onDelete?.(e),className:"p-1.5 rounded hover:bg-destructive/20 transition-colors",title:"Delete",children:(0,t.jsx)(o.Trash2,{className:"w-4 h-4 text-destructive"})})]}),b&&!N&&(0,t.jsx)("button",{className:"p-1 rounded hover:bg-muted transition-colors",onClick:e=>{e.stopPropagation(),y(!f)},children:f?(0,t.jsx)(s.ChevronUp,{className:"w-4 h-4 text-muted-foreground"}):(0,t.jsx)(r.ChevronDown,{className:"w-4 h-4 text-muted-foreground"})})]})]}),e.badges&&e.badges.length>0&&(0,t.jsx)("div",{className:`flex flex-wrap gap-1 ${x?"mt-1":"mt-2"}`,children:e.badges.map((e,a)=>(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${p[e.variant]}`,children:e.label},a))}),e.tags&&e.tags.length>0&&!x&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((e,a)=>(0,t.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:e},a))}),e.isDisabled&&e.disabledReason&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-destructive",children:[(0,t.jsx)(u.AlertCircle,{className:"w-3 h-3 flex-shrink-0"}),(0,t.jsx)("span",{children:e.disabledReason})]}),f&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-border space-y-2",children:[e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),e.details&&e.details.map((e,a)=>(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("span",{className:"font-medium text-foreground",children:[e.label,": "]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:Array.isArray(e.value)?e.value.join(", "):e.value})]},a)),e.requirements&&e.requirements.length>0&&(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Requirements: "}),(0,t.jsx)("span",{className:"text-muted-foreground",children:e.requirements.map((a,r)=>(0,t.jsxs)("span",{className:a.met?"text-green-400":"text-red-400",children:[a.name," ",a.value,r<e.requirements.length-1?", ":""]},r))})]})]})]})}var m=e.i(55436);let x=(0,i.default)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),g=(0,i.default)("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),f=(0,i.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),y=(0,i.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),b=(0,i.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var v=e.i(37727);function N({items:e,mode:r="view",actions:s,layout:l="list",columns:i=1,compact:n=!1,filterOptions:o=[],sortOptions:d=[],defaultSort:c={field:"name",direction:"asc"},searchable:u=!0,searchPlaceholder:p="Search items...",searchFields:N=["name","description","type","category"],selectedIds:j,onSelectionChange:S,maxSelections:E,showHeader:k=!0,showCount:w=!0,emptyMessage:C="No items found",loading:_=!1,className:I=""}){let[A,T]=(0,a.useState)(new Set),[L,M]=(0,a.useState)({search:""}),[R,P]=(0,a.useState)(c),[O,D]=(0,a.useState)(l),[B,$]=(0,a.useState)(!1),Y=j??A,H=(0,a.useCallback)(e=>{let t=new Set(Y);if(1===E)t.clear(),t.add(e.id);else{if(E&&t.size>=E)return;t.add(e.id)}S?S(t):T(t),s?.onSelect?.(e)},[Y,E,S,s]),q=(0,a.useCallback)(e=>{let t=new Set(Y);t.delete(e.id),S?S(t):T(t),s?.onDeselect?.(e)},[Y,S,s]),V=(0,a.useMemo)(()=>e.filter(e=>{if(L.search){let t=L.search.toLowerCase();if(!N.some(a=>{let r=e[a];return"string"==typeof r?r.toLowerCase().includes(t):!!Array.isArray(r)&&r.some(e=>String(e).toLowerCase().includes(t))}))return!1}for(let t of o){let a=L[t.id];if(void 0===a||""===a||Array.isArray(a)&&0===a.length)continue;let r=e[t.id];if("select"===t.type||"text"===t.type){if("string"==typeof a&&""!==a&&String(r).toLowerCase()!==a.toLowerCase())return!1}else if("multiselect"===t.type){if(Array.isArray(a)&&a.length>0){let e=String(r).toLowerCase();if(!a.some(t=>String(t).toLowerCase()===e))return!1}}else if("checkbox"===t.type&&!0===a&&!r)return!1}return!0}),[e,L,o,N]),F=(0,a.useMemo)(()=>[...V].sort((e,t)=>{let a=e[R.field],r=t[R.field],s=0;return s="string"==typeof a&&"string"==typeof r?a.localeCompare(r):"number"==typeof a&&"number"==typeof r?a-r:String(a??"").localeCompare(String(r??"")),"desc"===R.direction?-s:s}),[V,R]),z=(0,a.useMemo)(()=>F.map(e=>({...e,isSelected:Y.has(e.id)})),[F,Y]),U=()=>{M({search:""})},G=""!==L.search||o.some(e=>{let t=L[e.id];return void 0!==t&&""!==t&&(!Array.isArray(t)||t.length>0)});return(0,t.jsxs)("div",{className:`space-y-4 ${I}`,children:[k&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[u&&(0,t.jsxs)("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[(0,t.jsx)(m.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)("input",{type:"text",value:L.search,onChange:e=>M(t=>({...t,search:e.target.value})),placeholder:p,className:"w-full pl-9 pr-4 py-2 rounded-lg border border-border bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),L.search&&(0,t.jsx)("button",{onClick:()=>M(e=>({...e,search:""})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:(0,t.jsx)(v.X,{className:"w-4 h-4"})})]}),o.length>0&&(0,t.jsxs)("button",{onClick:()=>$(!B),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${B||G?"border-primary bg-primary/10 text-primary":"border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:[(0,t.jsx)(f,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Filters"}),G&&(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-primary"})]}),d.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("select",{value:R.field,onChange:e=>P(t=>({...t,field:e.target.value})),className:"px-3 py-2 rounded-lg border border-border bg-background text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:d.map(e=>(0,t.jsx)("option",{value:e.field,children:e.label},e.id))}),(0,t.jsx)("button",{onClick:()=>P(e=>({...e,direction:"asc"===e.direction?"desc":"asc"})),className:"p-2 rounded-lg border border-border text-muted-foreground hover:text-foreground hover:border-primary/50 transition-colors",title:"asc"===R.direction?"Sort Ascending":"Sort Descending",children:"asc"===R.direction?(0,t.jsx)(x,{className:"w-4 h-4"}):(0,t.jsx)(g,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center border border-border rounded-lg overflow-hidden",children:[(0,t.jsx)("button",{onClick:()=>D("list"),className:`p-2 transition-colors ${"list"===O?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,title:"List view",children:(0,t.jsx)(b,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>D("grid"),className:`p-2 transition-colors ${"grid"===O?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,title:"Grid view",children:(0,t.jsx)(y,{className:"w-4 h-4"})})]}),w&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground ml-auto",children:[z.length," item",1!==z.length?"s":"","select"===r&&Y.size>0&&(0,t.jsxs)(t.Fragment,{children:[" (",Y.size," selected",E?` / ${E}`:"",")"]})]})]}),B&&o.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-end gap-4 p-4 rounded-lg border border-border bg-muted/30",children:[o.map(e=>(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-muted-foreground",children:e.label}),"select"===e.type&&e.options&&(0,t.jsxs)("select",{value:L[e.id]||"",onChange:t=>M(a=>({...a,[e.id]:t.target.value})),className:"px-3 py-1.5 rounded border border-border bg-background text-sm min-w-[140px]",children:[(0,t.jsx)("option",{value:"",children:"All"}),e.options.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),"checkbox"===e.type&&(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!L[e.id],onChange:t=>M(a=>({...a,[e.id]:t.target.checked})),className:"rounded border-border"}),(0,t.jsx)("span",{className:"text-sm",children:e.placeholder||"Yes"})]})]},e.id)),G&&(0,t.jsxs)("button",{onClick:U,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-destructive hover:text-destructive/80 transition-colors",children:[(0,t.jsx)(v.X,{className:"w-3 h-3"}),"Clear"]})]})]}),_&&(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),!_&&0===z.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:C}),G&&(0,t.jsx)("button",{onClick:U,className:"mt-2 text-sm text-primary hover:underline",children:"Clear filters"})]}),!_&&z.length>0&&(0,t.jsx)("div",{className:"grid"===O?`grid ${({1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"})[i]} gap-3`:"space-y-2",children:z.map(e=>(0,t.jsx)(h,{item:e,mode:r,compact:n,actions:{...s,onSelect:H,onDeselect:q}},e.id))})]})}function j({isOpen:e,onClose:r,onConfirm:s,items:i,title:n,description:o,maxSelections:d,initialSelectedIds:c=new Set,filterOptions:u=[],sortOptions:p=[],searchPlaceholder:h,validateSelection:m,loading:x=!1}){let[g,f]=(0,a.useState)(c),[y,b]=(0,a.useState)();(0,a.useEffect)(()=>{e&&(f(new Set(c)),b(void 0))},[e,c]);let j=(0,a.useCallback)(()=>i.filter(e=>g.has(e.id)),[i,g]);if((0,a.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&r()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,r]),(0,a.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e)return null;let S=g.size;return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),(0,t.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] m-4 flex flex-col bg-card rounded-xl shadow-xl border border-border overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 p-4 border-b border-border",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{id:"modal-title",className:"text-xl font-semibold text-foreground",children:n}),o&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:o})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:(0,t.jsx)(v.X,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-4",children:(0,t.jsx)(N,{items:i,mode:"select",selectedIds:g,onSelectionChange:e=>{f(e),b(void 0)},maxSelections:d,filterOptions:u,sortOptions:p,searchPlaceholder:h,loading:x,emptyMessage:"No items available"})}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4 border-t border-border bg-muted/30",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[S," selected",d&&` / ${d} max`]}),y&&(0,t.jsx)("div",{className:"text-sm text-destructive",children:y}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:r,className:"px-4 py-2 rounded-lg border border-border text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{onClick:()=>{let e=j();if(m){let t=m(e);if(!t.valid)return void b(t.message)}s(e),r()},disabled:0===S,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(l.Check,{className:"w-4 h-4"}),"Confirm Selection"]})]})]})]})]})}function S(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}function E(e,t){let a=[],r=[],s=[];return void 0!==e.cost&&a.push({label:"Cost",value:`${e.cost} PP`}),e.action&&a.push({label:"Action",value:S(e.action)}),e.range&&a.push({label:"Range",value:String(e.range)}),e.school&&s.push({label:S(e.school),variant:"info"}),e.area&&r.push({label:"Area",value:e.area}),e.duration&&r.push({label:"Duration",value:e.duration}),e.targets&&r.push({label:"Targets",value:e.targets}),e.damage&&r.push({label:"Damage",value:e.damage}),e.healing&&r.push({label:"Healing",value:e.healing}),e.effects?.length&&r.push({label:"Effects",value:e.effects}),{id:e.id||e.name,name:e.name,description:e.description,category:"power",type:e.school,cost:e.cost,costLabel:"PP",stats:a,details:r,badges:s,tags:e.tags,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function k(e,t){let a=[],r=[],s=[];return void 0!==e.cost&&a.push({label:"Cost",value:`${e.cost} TP`}),e.action&&a.push({label:"Action",value:S(e.action)}),e.range&&a.push({label:"Range",value:String(e.range)}),e.type&&s.push({label:S(e.type),variant:"primary"}),e.weaponType&&s.push({label:e.weaponType,variant:"default"}),e.damage&&r.push({label:"Damage",value:e.damage}),e.effects?.length&&r.push({label:"Effects",value:e.effects}),{id:e.id||e.name,name:e.name,description:e.description,category:"technique",type:e.type,cost:e.cost,costLabel:"TP",stats:a,details:r,badges:s,tags:e.tags,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function w(e,t){let a=[],r=[],s=[];return e.damage&&a.push({label:"Damage",value:e.damage}),e.damageType&&s.push({label:S(e.damageType),variant:"warning"}),e.type&&s.push({label:S(e.type),variant:"primary"}),e.range&&a.push({label:"Range",value:String(e.range)}),e.hands&&a.push({label:"Hands",value:e.hands}),e.properties?.length&&r.push({label:"Properties",value:e.properties}),e.weight&&r.push({label:"Weight",value:`${e.weight} lb`}),{id:e.id||e.name,name:e.name,description:e.description,category:"weapon",type:e.type,cost:e.cost,costLabel:"gp",stats:a,details:r,badges:s,tags:e.properties,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function C(e,t){var a;let r=[],s=[],l=[];return void 0!==e.defense&&r.push({label:"Defense",value:(a=e.defense)>=0?`+${a}`:`${a}`}),e.type&&l.push({label:S(e.type),variant:"primary"}),e.properties?.length&&s.push({label:"Properties",value:e.properties}),e.weight&&s.push({label:"Weight",value:`${e.weight} lb`}),e.strengthReq&&s.push({label:"Str Req",value:e.strengthReq}),{id:e.id||e.name,name:e.name,description:e.description,category:"armor",type:e.type,cost:e.cost,costLabel:"gp",stats:r,details:s,badges:l,tags:e.properties,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function _(e,t){var a;let r=[],s=[],l=[];return void 0!==e.cost&&r.push({label:"Cost",value:(a=e.cost)>=1?`${a} gp`:a>=.1?`${Math.round(10*a)} sp`:`${Math.round(100*a)} cp`}),e.type&&l.push({label:S(e.type),variant:"info"}),e.weight&&s.push({label:"Weight",value:`${e.weight} lb`}),{id:e.id||e.name,name:e.name,description:e.description,category:"equipment",type:e.type||e.category,cost:e.cost,costLabel:"gp",stats:r,details:s,badges:l,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}function I(e,t){let a=[],r=[],s=[];if(void 0!==e.level&&a.push({label:"Level",value:e.level}),void 0!==e.hp&&a.push({label:"HP",value:e.hp}),void 0!==e.defense&&a.push({label:"Def",value:e.defense}),e.type&&r.push({label:S(e.type),variant:"primary"}),e.size&&r.push({label:S(e.size),variant:"info"}),e.abilities){let t=Object.entries(e.abilities).map(([e,t])=>`${e.slice(0,3).toUpperCase()} ${t}`).join(", ");s.push({label:"Abilities",value:t})}return e.traits?.length&&s.push({label:"Traits",value:e.traits}),{id:e.id||e.name,name:e.name,description:e.description,category:"creature",type:e.type,stats:a,badges:r,details:s,tags:e.traits,isSelected:t?.selectedIds?.has(e.id||e.name),sourceData:{...e}}}e.s(["ItemList",()=>N],58620),e.s(["ItemSelectionModal",()=>j],29460),e.s([],91065),e.s(["transformArmor",()=>C,"transformCreature",()=>I,"transformEquipment",()=>_,"transformPower",()=>E,"transformTechnique",()=>k,"transformWeapon",()=>w],78689)}]);