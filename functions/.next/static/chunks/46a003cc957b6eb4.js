(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36121,e=>{"use strict";let t=(0,e.i(75254).default)("swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);e.s(["Swords",()=>t],36121)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},7559,e=>{"use strict";let t=(0,e.i(75254).default)("sword",[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]]);e.s(["Sword",()=>t],7559)},20278,75505,80853,17494,22853,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>a],20278);let s=(0,t.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);e.s(["FolderOpen",()=>s],75505);var r=e.i(43476),l=e.i(71645),n=e.i(37727),i=e.i(55436);let o=(0,t.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var d=e.i(39312),c=e.i(7559),p=e.i(98919),m=e.i(31278);e.i(79121);var u=e.i(49838);let x={power:{icon:(0,r.jsx)(d.Zap,{className:"w-5 h-5"}),color:"text-blue-600",emptyText:"No saved powers found. Create some powers first!"},technique:{icon:(0,r.jsx)(c.Sword,{className:"w-5 h-5"}),color:"text-red-600",emptyText:"No saved techniques found. Create some techniques first!"},item:{icon:(0,r.jsx)(p.Shield,{className:"w-5 h-5"}),color:"text-amber-600",emptyText:"No saved items found. Create some items first!"},creature:{icon:(0,r.jsx)(o,{className:"w-5 h-5"}),color:"text-green-600",emptyText:"No saved creatures found. Create some creatures first!"}};function _({isOpen:e,onClose:t,onSelect:a,items:s,isLoading:o,error:d,itemType:c,title:p}){let[_,h]=(0,l.useState)(""),g=x[c],y=p||`Load ${c.charAt(0).toUpperCase()+c.slice(1)}`,N=(0,l.useMemo)(()=>{if(!s)return[];if(!_.trim())return s;let e=_.toLowerCase();return s.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[s,_]);return e?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,r.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg mx-4 max-h-[80vh] flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:g.color,children:g.icon}),(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:y})]}),(0,r.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,r.jsx)(n.X,{className:"w-5 h-5"})})]}),(0,r.jsx)("div",{className:"px-6 py-3 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:_,onChange:e=>h(e.target.value),placeholder:`Search ${c}s...`,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:o?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(m.Loader2,{className:"w-8 h-8 text-primary-600 animate-spin"})}):d?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsxs)("p",{className:"text-red-600",children:["Error loading library: ",d.message]})}):0===N.length?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:s?.length===0?g.emptyText:"No matching items found."})}):(0,r.jsx)("div",{className:"space-y-2",children:N.map(e=>(0,r.jsxs)("button",{onClick:()=>{a(e),t(),h("")},className:(0,u.cn)("w-full text-left p-4 rounded-lg border border-gray-200","hover:border-primary-300 hover:bg-primary-50 transition-colors","focus:outline-none focus:ring-2 focus:ring-primary-500"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:(0,u.cn)("opacity-60",g.color),children:g.icon}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:e.name})]}),e.description&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600 line-clamp-2",children:e.description})]},e.id))})}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:[s?.length||0," ",c,"(s) in your library"]})})]})]}):null}e.s(["LoadFromLibraryModal",()=>_],80853);let h={primary:"bg-primary-600 hover:bg-primary-700 disabled:hover:bg-primary-600",power:"bg-primary-600 hover:bg-primary-700 disabled:hover:bg-primary-600",technique:"bg-red-600 hover:bg-red-700 disabled:hover:bg-red-600",item:"bg-amber-600 hover:bg-amber-700 disabled:hover:bg-amber-600"};function g({value:e,onChange:t,min:a=0,max:s=99,step:l=1,label:n,size:i="md",variant:o="primary",disabled:d=!1,className:c}){let p={sm:{button:"w-6 h-6 text-sm",display:"w-6 text-sm",label:"text-xs"},md:{button:"w-7 h-7 text-base",display:"w-8 text-base",label:"text-sm"},lg:{button:"w-9 h-9 text-lg",display:"w-10 text-lg",label:"text-base"}}[i];return(0,r.jsxs)("div",{className:(0,u.cn)("flex items-center gap-2",c),children:[n&&(0,r.jsx)("span",{className:(0,u.cn)("text-gray-600 font-medium",p.label),children:n}),(0,r.jsx)("button",{type:"button",onClick:()=>{!d&&e>a&&t(Math.max(a,e-l))},disabled:d||e<=a,className:(0,u.cn)("rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center font-bold transition-colors","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-200",p.button),"aria-label":"Decrease",children:"−"}),(0,r.jsx)("span",{className:(0,u.cn)("text-center font-semibold",p.display),children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>{!d&&e<s&&t(Math.min(s,e+l))},disabled:d||e>=s,className:(0,u.cn)("rounded text-white flex items-center justify-center font-bold transition-colors","disabled:opacity-50 disabled:cursor-not-allowed",h[o],p.button),"aria-label":"Increase",children:"+"})]})}e.s(["NumberStepper",()=>g],17494),e.i(81547),e.i(92006),e.i(15324),e.i(3504),e.s([],22853)},3504,e=>{"use strict";var t=e.i(81547);let a=[{name:"Common",low:25,ipLow:0,ipHigh:4},{name:"Uncommon",low:100,ipLow:4.01,ipHigh:6},{name:"Rare",low:500,ipLow:6.01,ipHigh:8},{name:"Epic",low:2500,ipLow:8.01,ipHigh:11},{name:"Legendary",low:1e4,ipLow:11.01,ipHigh:14},{name:"Mythic",low:5e4,ipLow:14.01,ipHigh:16},{name:"Ascended",low:1e5,ipLow:16.01,ipHigh:1/0}];function s(e){return!!e&&!!("id"in e&&void 0!==e.id&&t.GENERAL_PROPERTY_IDS.has(e.id)||"name"in e&&e.name&&t.GENERAL_PROPERTY_NAMES.has(e.name))}function r(e,t){let s=Math.max(0,t),r=Math.max(0,e),l="Common",n=0;for(let e of a)if(s>=e.ipLow&&s<=e.ipHigh){l=e.name,n=e.low*(1+.125*r);break}let i=a.find(e=>e.name===l);return i&&(n=Math.max(n,i.low)),{currencyCost:Math.floor(n),rarity:l}}function l(e,a){let s=0,r=0,l=0;return(e||[]).forEach(e=>{let n=(0,t.findByIdOrName)(a,e);if(!n)return;let i=e.op_1_lvl||0,o=n.base_ip||0,d=n.op_1_ip||0,c=n.base_tp||0,p=n.op_1_tp||0,m=n.base_c||0,u=n.op_1_c||0;s+=o+d*i,r+=c+p*i,l+=m+u*i}),{totalIP:s,totalTP:r,totalCurrency:l}}function n(e,a){var s;let n,i,o=e.properties||[],d=l(o,a),{currencyCost:c,rarity:p}=r(d.totalCurrency,d.totalIP),m=Array.isArray(s=e.damage)?s.filter(e=>e&&e.amount&&e.size&&e.type&&"none"!==e.type).map(e=>`${e.amount}d${e.size} ${e.type}`).join(", "):"",u=function(e){let a=(e||[]).find(e=>e.id===t.PROPERTY_IDS.RANGE||"Range"===e.name);if(!a)return"Melee";let s=a.op_1_lvl||0;return`${8+8*s} Spaces`}(o),x=(n=(o||[]).find(e=>e.id===t.PROPERTY_IDS.DAMAGE_REDUCTION||"Damage Reduction"===e.name))?1+(n.op_1_lvl||0):0,_=(i=[],(o||[]).forEach(e=>{let s=(0,t.findByIdOrName)(a,e);if(!s)return;let r=e.op_1_lvl||0,l=s.base_tp||0,n=s.op_1_tp||0,o=r>0?n*r:0,d=l+o;d>0&&i.push({id:s.id||0,name:s.name||"",level:r,baseTP:l,optionTP:o,totalTP:d,description:s.description||""})}),i);return{name:e.name||"",armamentType:e.armamentType||"Weapon",description:e.description||"",rarity:p,currencyCost:c,goldCost:c,totalIP:d.totalIP,totalTP:d.totalTP,totalCurrency:d.totalCurrency,range:u,damage:m,damageReduction:x,proficiencies:_}}e.s(["calculateCurrencyCostAndRarity",()=>r,"calculateItemCosts",()=>l,"deriveItemDisplay",()=>n,"isGeneralProperty",()=>s])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55900,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>t],55900)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},98919,e=>{"use strict";let t=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],98919)},84004,44604,e=>{"use strict";e.i(45872);var t=e.i(43476),a=e.i(22016);function s(){return(0,t.jsx)("footer",{className:"w-full bg-gray-400 border-t border-[#707070] h-10 flex items-center justify-center mt-auto",children:(0,t.jsxs)("div",{className:"w-full max-w-[1440px] px-4 sm:px-6 lg:px-24 flex items-center justify-between",children:[(0,t.jsx)(a.default,{href:"/terms",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Terms of Service"}),(0,t.jsx)(a.default,{href:"/privacy",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Privacy Policy"}),(0,t.jsx)("a",{href:"mailto:RealmsRoleplayGame@gmail.com",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Contact"}),(0,t.jsx)("a",{href:"https://discord.gg/Dbd5X9FQFJ",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-lg text-gray-800 hover:text-gray-900 transition-colors whitespace-nowrap",children:"Discord"})]})})}e.s(["Footer",()=>s],44604),e.i(23495),e.s([],84004)},92006,81547,15324,e=>{"use strict";let t={TRUE_DAMAGE:1,ADDITIONAL_DAMAGE:6,SPLIT_DAMAGE_DICE:5,REACTION:2,LONG_ACTION:3,QUICK_OR_FREE_ACTION:4,POWER_REACTION:82,POWER_LONG_ACTION:81,POWER_QUICK_OR_FREE_ACTION:83,ADD_WEAPON_ATTACK:7,RECKLESS:8,PASS_THROUGH:9,SPIN:10,STUN:11,WIND_UP:12,KNOCKBACK:13,SLOW:14,DAZE:15,WIDE_SWING:16,ENEMY_STRENGTH_REDUCTION:17,REACH:18,EXPOSE:19,ENEMY_ATTACK_REDUCTION:20,BLEED:21,LINE_OF_EFFECT:88,CONE_OF_EFFECT:89,CYLINDER_OF_EFFECT:231,SPHERE_OF_EFFECT:232,TRAIL_OF_EFFECT:233,PIERCE_TARGETS_ON_PATH:234,ADD_MULTIPLE_TARGETS:235,EXPANDING_AREA_OF_EFFECT:236,TARGET_ONE_IN_AREA:237,EXCLUDE_AREA:238,POWER_RANGE:292,DURATION_ROUND:289,DURATION_MINUTE:290,DURATION_HOUR:291,DURATION_DAYS:293,DURATION_PERMANENT:294},a={DAMAGE_REDUCTION:1,ARMOR_STRENGTH_REQUIREMENT:2,ARMOR_AGILITY_REQUIREMENT:3,ARMOR_VITALITY_REQUIREMENT:4,AGILITY_REDUCTION:5,WEAPON_STRENGTH_REQUIREMENT:6,WEAPON_AGILITY_REQUIREMENT:7,WEAPON_VITALITY_REQUIREMENT:8,WEAPON_ACUITY_REQUIREMENT:9,WEAPON_INTELLIGENCE_REQUIREMENT:10,WEAPON_CHARISMA_REQUIREMENT:11,SPLIT_DAMAGE_DICE:12,RANGE:13,TWO_HANDED:14,SHIELD_BASE:15,ARMOR_BASE:16,WEAPON_DAMAGE:17,DAMAGE_TYPE_RESISTANCE:18,BLUDGEONING_VULNERABILITY:19,PIERCING_VULNERABILITY:20,SLASHING_VULNERABILITY:21,CRITICAL_RANGE_PLUS_1:22,CRITICAL_RANGE:23,CRITICAL_MULTIPLIER:24,THROWN:25,FINESSE:26,DAMAGED:27,GRAZE:28,LOADING:29,KNOCKBACK:30,WOUNDING:31,SLOW:32,TOPPLE:33,EXPOSE:34,CHARGING:35,HIDDEN:36,AMMUNITION:37,BLEED:38,SHIELD_AMOUNT:39,SHIELD_DAMAGE:40,REACH:41,MOUNTED:42,VERSATILE:43,CLEAVE:44,INTERCHANGEABLE:45,BLOCK:46,QUICK:47,PULL:48},s=new Set([a.SHIELD_BASE,a.ARMOR_BASE,a.RANGE,a.TWO_HANDED,a.SPLIT_DAMAGE_DICE,a.DAMAGE_REDUCTION,a.WEAPON_DAMAGE,a.AGILITY_REDUCTION,a.WEAPON_STRENGTH_REQUIREMENT,a.WEAPON_AGILITY_REQUIREMENT,a.WEAPON_VITALITY_REQUIREMENT,a.WEAPON_ACUITY_REQUIREMENT,a.WEAPON_INTELLIGENCE_REQUIREMENT,a.WEAPON_CHARISMA_REQUIREMENT,a.ARMOR_STRENGTH_REQUIREMENT,a.ARMOR_AGILITY_REQUIREMENT,a.ARMOR_VITALITY_REQUIREMENT]),r=new Set(["Shield Base","Armor Base","Range","Two-Handed","Split Damage Dice","Damage Reduction","Weapon Damage","Agility Reduction","Weapon Strength Requirement","Weapon Agility Requirement","Weapon Vitality Requirement","Weapon Acuity Requirement","Weapon Intelligence Requirement","Weapon Charisma Requirement","Armor Strength Requirement","Armor Agility Requirement","Armor Vitality Requirement"]);function l(e,t){if(Array.isArray(e)&&t){if(void 0!==t.id&&null!==t.id){let a=e.find(e=>("string"==typeof e.id?parseInt(e.id,10):e.id)===("string"==typeof t.id?parseInt(t.id,10):t.id));if(a)return a}if(t.name)return e.find(e=>e.name===t.name)}}function n(e,t){let a=void 0!==e.part;return 1===t?a?e.op_1_lvl??e.opt1Level??0:e.op_1_lvl??0:2===t?a?e.op_2_lvl??e.opt2Level??0:e.op_2_lvl??0:a?e.op_3_lvl??e.opt3Level??0:e.op_3_lvl??0}function i(e=[],t=[]){let a=0,s=0,r=1,o=1,d=1,c=!1,p=0,m=[];e.forEach(e=>{let i;if(!(i=void 0!==e.part?e.part:l(t,e)))return;let u=n(e,1),x=n(e,2),_=n(e,3),h=e.applyDuration||!1,g=(i.base_en||0)+(i.op_1_en||0)*u+(i.op_2_en||0)*x+(i.op_3_en||0)*_,y=i.duration,N=i.percentage;y?(d*=g,c=!0):N?(r*=g,h&&(o*=g)):(a+=g,h&&(s+=g));let b=Math.floor((i.base_tp||0)+(i.op_1_tp||0)*u+(i.op_2_tp||0)*x+(i.op_3_tp||0)*_);if(b>0){let e=`${b} TP: ${i.name}`;u>0&&(e+=` (Opt1 ${u})`),x>0&&(e+=` (Opt2 ${x})`),_>0&&(e+=` (Opt3 ${_})`),m.push(e)}p+=b}),c||(d=0);let u=a*r+(d+1)*s*o-s*o;return{totalEnergy:Math.ceil(u),totalTP:p,tpSources:m,energyRaw:u}}function o(e,t){let a="Basic";return"quick"===e?a="Quick":"free"===e?a="Free":"long3"===e?a="Long (3)":"long4"===e&&(a="Long (4)"),t?`${a} Reaction`:`${a} Action`}function d(e=[],a=[]){let s=e.find(e=>Number(e.part?.id??e.id)===t.POWER_RANGE||"Power Range"===(e.part?.name||e.name));if(!s)return"1 space";let r=3+3*n(s,1);return`${r} ${r>1?"spaces":"space"}`}function c(e=[],a=[]){let s=[t.SPHERE_OF_EFFECT,t.CYLINDER_OF_EFFECT,t.CONE_OF_EFFECT,t.LINE_OF_EFFECT,t.TRAIL_OF_EFFECT],r=["Sphere","Cylinder","Cone","Line","Trail"];for(let t=0;t<s.length;t++)if(e.find(e=>Number(e.part?.id??e.id)===s[t]||(e.part?.name||e.name)===`${r[t]} of Effect`))return r[t];return"1 target"}function p(e=[],a=[]){let s=(t,a)=>e.find(e=>Number(e.part?.id??e.id)===t||(e.part?.name||e.name)===a),r=e=>e?n(e,1):0;if(s(t.DURATION_PERMANENT,"Duration (Permanent)"))return"Permanent";let l=s(t.DURATION_ROUND,"Duration (Round)");if(l){let e=2+r(l);return`${e} ${e>1?"rounds":"round"}`}let i=s(t.DURATION_MINUTE,"Duration (Minute)");if(i){let e=[1,10,30][r(i)]||1;return`${e} minute${e>1?"s":""}`}let o=s(t.DURATION_HOUR,"Duration (Hour)");if(o){let e=[1,6,12][r(o)]||1;return`${e} hour${e>1?"s":""}`}let d=s(t.DURATION_DAYS,"Duration (Days)");if(d){let e=[1,10,20,30][r(d)]||1;return`${e} day${e>1?"s":""}`}return"1 round"}function m(e,a){let s=Array.isArray(e.parts)?e.parts.map(e=>({id:e.id,name:e.name,op_1_lvl:e.op_1_lvl||0,op_2_lvl:e.op_2_lvl||0,op_3_lvl:e.op_3_lvl||0,applyDuration:e.applyDuration||!1})):[],r=i(s,a),o=function(e=[],a=[]){let s="Basic",r=!1;return e.forEach(e=>{let i;if(e.part?.id!==void 0)i=Number(e.part.id);else if(void 0!==e.id)i=e.id;else if(e.part?.name||e.name){let t=l(a,{name:e.part?.name||e.name});i=t?Number(t.id):void 0}let o=n(e,1);i===t.POWER_REACTION?r=!0:i===t.POWER_QUICK_OR_FREE_ACTION?0===o?s="Quick":1===o&&(s="Free"):i===t.POWER_LONG_ACTION&&(0===o?s="Long (3)":1===o&&(s="Long (4)"))}),r?`${s} Reaction`:`${s} Action`}(s,a),m=d(s,a),u=c(s,a),x=p(s,a),_=s.map(e=>{let t,s,r,n,i,o=l(a,e);return o?(t=e.op_1_lvl||0,s=e.op_2_lvl||0,r=e.op_3_lvl||0,n=Math.floor((o.base_tp||0)+(o.op_1_tp||0)*t+(o.op_2_tp||0)*s+(o.op_3_tp||0)*r),i=o.name,t>0&&(i+=` (Opt1 ${t})`),s>0&&(i+=` (Opt2 ${s})`),r>0&&(i+=` (Opt3 ${r})`),n>0&&(i+=` | TP: ${n}`),{text:i,description:o.description||"",finalTP:n,hasTP:n>0}):null}).filter(e=>null!==e);return{name:e.name||"",description:e.description||"",actionType:o,range:m,area:u,duration:x,energy:r.totalEnergy,tp:r.totalTP,tpSources:r.tpSources,partChips:_}}function u(e){if(!Array.isArray(e))return"";let t=e.find(e=>e&&e.amount&&e.size&&e.type&&"none"!==e.type);return t?`${t.amount}d${t.size} ${t.type}`:""}function x(e){return e&&e.amount&&e.size&&"0"!==e.amount&&"0"!==e.size?`+${e.amount}d${e.size}`:""}function _(e,t){let a="Basic";return"quick"===e?a="Quick":"free"===e?a="Free":"long3"===e?a="Long (3)":"long4"===e&&(a="Long (4)"),t?`${a} Reaction`:`${a} Action`}function h(e=[],a=[]){let s=0,r=1,n=0,i=[];e.forEach(e=>{let o=l(a,{id:e.id??e.part?.id,name:e.name??e.part?.name});if(!o)return;let d=e.op_1_lvl||0,c=e.op_2_lvl||0,p=e.op_3_lvl||0,m=(o.base_en||0)+(o.op_1_en||0)*d+(o.op_2_en||0)*c+(o.op_3_en||0)*p;o.percentage?r*=m:s+=m;let u=(o.op_1_tp||0)*d;(("string"==typeof o.id?parseInt(o.id,10):o.id)===t.ADDITIONAL_DAMAGE||"Additional Damage"===o.name)&&(u=Math.floor(u));let x=Math.floor((o.base_tp||0)+u+(o.op_2_tp||0)*c+(o.op_3_tp||0)*p);if(x>0){let e=`${x} TP: ${o.name}`;d>0&&(e+=` (Opt1 ${d})`),c>0&&(e+=` (Opt2 ${c})`),p>0&&(e+=` (Opt3 ${p})`),i.push(e)}n+=x});let o=s*r;return{totalEnergy:Math.ceil(o),totalTP:n,tpSources:i,energyRaw:o}}function g(e,a){let s=Array.isArray(e.parts)?e.parts.map(e=>({id:e.id,name:e.name,op_1_lvl:e.op_1_lvl||0,op_2_lvl:e.op_2_lvl||0,op_3_lvl:e.op_3_lvl||0})):[],r=h(s,a),n=function(e=[],a=[]){let s="Basic",r=!1;return e.forEach(e=>{let n=e.id;if(void 0===n&&e.name){let t=l(a,{name:e.name});n=t?.id!==void 0?Number(t.id):void 0}let i=e.op_1_lvl||0;n===t.REACTION?r=!0:n===t.QUICK_OR_FREE_ACTION?0===i?s="Quick":1===i&&(s="Free"):n===t.LONG_ACTION?0===i?s="Long (3)":1===i&&(s="Long (4)"):"Reaction"===e.name?r=!0:"Quick or Free Action"===e.name?0===i?s="Quick":1===i&&(s="Free"):"Long Action"===e.name&&(0===i?s="Long (3)":1===i&&(s="Long (4)"))}),r?`${s} Reaction`:`${s} Action`}(s,a),i=x(e.damage),o=e.weapon&&(e.weapon.name||e.weapon.id)?e.weapon.name||`Weapon #${e.weapon.id}`:"Unarmed",d=s.map(e=>{let s,r,n,i,o,d,c=l(a,e);return c?(s=e.op_1_lvl||0,r=e.op_2_lvl||0,n=e.op_3_lvl||0,i=(c.op_1_tp||0)*s,(("string"==typeof c.id?parseInt(c.id,10):c.id)===t.ADDITIONAL_DAMAGE||"Additional Damage"===c.name)&&(i=Math.floor(i)),o=Math.floor((c.base_tp||0)+i+(c.op_2_tp||0)*r+(c.op_3_tp||0)*n),d=c.name||"",s>0&&(d+=` (Opt1 ${s})`),r>0&&(d+=` (Opt2 ${r})`),n>0&&(d+=` (Opt3 ${n})`),o>0&&(d+=` | TP: ${o}`),{text:d,description:c.description||"",finalTP:o,hasTP:o>0}):null}).filter(e=>null!==e);return{name:e.name||"",description:e.description||"",weaponName:o,actionType:n,damageStr:i,energy:r.totalEnergy,tp:r.totalTP,tpSources:r.tpSources,partChips:d}}e.s(["GENERAL_PROPERTY_IDS",0,s,"GENERAL_PROPERTY_NAMES",0,r,"PART_IDS",0,t,"PROPERTY_IDS",0,a,"findByIdOrName",()=>l],81547),e.s(["calculatePowerCosts",()=>i,"computeActionTypeFromSelection",()=>o,"deriveArea",()=>c,"deriveDuration",()=>p,"derivePowerDisplay",()=>m,"deriveRange",()=>d,"formatPowerDamage",()=>u],92006),e.s(["calculateTechniqueCosts",()=>h,"computeActionTypeFromSelection",()=>_,"deriveTechniqueDisplay",()=>g,"formatTechniqueDamage",()=>x],15324)},81250,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(37727),r=e.i(7233),l=e.i(64659),n=e.i(55900),i=e.i(36121),o=e.i(39312),d=e.i(20278),c=e.i(52571),p=e.i(75505);e.i(79121);var m=e.i(49838);e.i(84004);var u=e.i(23495);e.i(64485);var x=e.i(66923),_=e.i(46775);e.i(28856);var h=e.i(82943),g=e.i(6245);e.i(61978);var y=e.i(52831),N=e.i(80853),b=e.i(17494);e.i(22853);var v=e.i(15324);let f=[{value:"basic",label:"Basic Action"},{value:"quick",label:"Quick Action"},{value:"free",label:"Free Action"},{value:"long3",label:"Long Action (3 AP)"},{value:"long4",label:"Long Action (4 AP)"}],E=["none","physical","slashing","piercing","bludgeoning"],A=[4,6,8,10,12],j=[{id:0,name:"Unarmed"},{id:1,name:"Any Melee"},{id:2,name:"Any Ranged"},{id:3,name:"Sword"},{id:4,name:"Axe"},{id:5,name:"Spear"},{id:6,name:"Bow"},{id:7,name:"Crossbow"}];function T({selectedPart:e,index:r,onRemove:i,onUpdate:o,allParts:d}){let[c,p]=(0,a.useState)(!0),{part:m}=e,u=(0,a.useMemo)(()=>["any",...Array.from(new Set(d.map(e=>e.category))).sort()],[d]),x=(0,a.useMemo)(()=>{let t=e.selectedCategory;return t&&"any"!==t?d.filter(e=>e.category===t).sort((e,t)=>e.name.localeCompare(t.name)):d.sort((e,t)=>e.name.localeCompare(t.name))},[d,e.selectedCategory]),_=e=>{let t=m[`op_${e}_desc`],a=m[`op_${e}_en`],s=m[`op_${e}_tp`];return t&&""!==t.trim()||void 0!==a&&0!==a||void 0!==s&&0!==s},h=(m.base_stam||0)+(m.op_1_en||0)*e.op_1_lvl+(m.op_2_en||0)*e.op_2_lvl+(m.op_3_en||0)*e.op_3_lvl,g=(m.base_tp||0)+(m.op_1_tp||0)*e.op_1_lvl+(m.op_2_tp||0)*e.op_2_lvl+(m.op_3_tp||0)*e.op_3_lvl;return(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>p(!c),className:"text-gray-500 hover:text-gray-700",children:c?(0,t.jsx)(n.ChevronUp,{className:"w-5 h-5"}):(0,t.jsx)(l.ChevronDown,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:m.name}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Stam: ",h.toFixed(1)," | TP: ",Math.floor(g)]})]}),(0,t.jsx)("button",{type:"button",onClick:i,className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)(s.X,{className:"w-5 h-5"})})]}),c&&(0,t.jsxs)("div",{className:"px-4 py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,t.jsx)("select",{value:e.selectedCategory,onChange:e=>o({selectedCategory:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:u.map(e=>(0,t.jsx)("option",{value:e,children:"any"===e?"All Categories":e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Part"}),(0,t.jsx)("select",{value:x.findIndex(e=>e.id===m.id),onChange:e=>{let t=x[parseInt(e.target.value)];t&&o({part:t,op_1_lvl:0,op_2_lvl:0,op_3_lvl:0})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:x.map((e,a)=>(0,t.jsx)("option",{value:a,children:e.name},e.id))})]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.description}),(0,t.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-600",children:["Base Stamina: ",(0,t.jsx)("strong",{children:m.base_stam})]}),(0,t.jsxs)("span",{className:"text-gray-600",children:["Base TP: ",(0,t.jsx)("strong",{children:m.base_tp})]})]}),(_(1)||_(2)||_(3))&&(0,t.jsxs)("div",{className:"space-y-3 pt-2 border-t border-gray-100",children:[_(1)&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Option 1:"," ",(0,t.jsxs)("span",{className:"text-gray-500",children:["Stam ",(m.op_1_en||0)>=0?"+":"",m.op_1_en||0,", TP"," ",(m.op_1_tp||0)>=0?"+":"",m.op_1_tp||0]})]}),(0,t.jsx)(b.NumberStepper,{value:e.op_1_lvl,onChange:e=>o({op_1_lvl:e}),label:"Level:",variant:"technique"})]}),m.op_1_desc&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.op_1_desc})]}),_(2)&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Option 2:"," ",(0,t.jsxs)("span",{className:"text-gray-500",children:["Stam ",(m.op_2_en||0)>=0?"+":"",m.op_2_en||0,", TP"," ",(m.op_2_tp||0)>=0?"+":"",m.op_2_tp||0]})]}),(0,t.jsx)(b.NumberStepper,{value:e.op_2_lvl,onChange:e=>o({op_2_lvl:e}),label:"Level:",variant:"technique"})]}),m.op_2_desc&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.op_2_desc})]}),_(3)&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Option 3:"," ",(0,t.jsxs)("span",{className:"text-gray-500",children:["Stam ",(m.op_3_en||0)>=0?"+":"",m.op_3_en||0,", TP"," ",(m.op_3_tp||0)>=0?"+":"",m.op_3_tp||0]})]}),(0,t.jsx)(b.NumberStepper,{value:e.op_3_lvl,onChange:e=>o({op_3_lvl:e}),label:"Level:",variant:"technique"})]}),m.op_3_desc&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.op_3_desc})]})]})]})]})}function R(){let{user:e}=(0,h.useAuthStore)(),[s,l]=(0,a.useState)(""),[n,u]=(0,a.useState)(""),[R,I]=(0,a.useState)([]),[C,w]=(0,a.useState)("basic"),[O,L]=(0,a.useState)(!1),[D,S]=(0,a.useState)({amount:0,size:6,type:"none"}),[P,M]=(0,a.useState)(j[0]),[U,k]=(0,a.useState)(!1),[G,F]=(0,a.useState)(null),[$,q]=(0,a.useState)(!1),{data:H=[],isLoading:W,error:Q}=(0,x.useTechniqueParts)(),{data:B,isLoading:Y,error:z}=(0,_.useUserTechniques)(),K=(0,a.useMemo)(()=>R.map(e=>({id:Number(e.part.id),name:e.part.name,part:e.part,op_1_lvl:e.op_1_lvl,op_2_lvl:e.op_2_lvl,op_3_lvl:e.op_3_lvl})),[R]),V=(0,a.useMemo)(()=>(0,v.calculateTechniqueCosts)(K,H),[K,H]),X=(0,a.useMemo)(()=>(0,v.computeActionTypeFromSelection)(C,O),[C,O]),Z=(0,a.useMemo)(()=>(0,v.formatTechniqueDamage)("none"!==D.type&&D.amount>0?D:void 0),[D]),J=(0,a.useCallback)(()=>{0!==H.length&&I(e=>[...e,{part:H[0],op_1_lvl:0,op_2_lvl:0,op_3_lvl:0,selectedCategory:"any"}])},[H]),ee=(0,a.useCallback)(e=>{I(t=>t.filter((t,a)=>a!==e))},[]),et=(0,a.useCallback)((e,t)=>{I(a=>a.map((a,s)=>s===e?{...a,...t}:a))},[]),ea=async()=>{if(!s.trim())return void F({type:"error",text:"Please enter a technique name"});if(!e)return void F({type:"error",text:"You must be logged in to save"});k(!0),F(null);try{let e=(0,y.httpsCallable)(g.functions,"saveTechniqueToLibrary"),t=R.map(e=>({id:Number(e.part.id),name:e.part.name,op_1_lvl:e.op_1_lvl,op_2_lvl:e.op_2_lvl,op_3_lvl:e.op_3_lvl})),a="none"!==D.type&&D.amount>0?{amount:D.amount,size:D.size,type:D.type}:null;await e({techniqueName:s.trim(),techniqueDescription:n.trim(),parts:t,damage:a,weapon:P.id>0?P:null}),F({type:"success",text:"Technique saved successfully!"}),setTimeout(()=>{l(""),u(""),I([]),S({amount:0,size:6,type:"none"}),M(j[0]),F(null)},2e3)}catch(e){console.error("Error saving technique:",e),F({type:"error",text:`Failed to save: ${e.message}`})}finally{k(!1)}},es=(0,a.useCallback)(e=>{l(e.name||""),u(e.description||"");let t=e.parts||e.techniqueParts||[],a=[];for(let e of t){let t=H.find(t=>t.id===String(e.id)||t.name===e.name);t&&a.push({part:t,op_1_lvl:e.op_1_lvl||0,op_2_lvl:e.op_2_lvl||0,op_3_lvl:e.op_3_lvl||0,selectedCategory:t.category||"any"})}if(I(a),e.weapon){let t=j.find(t=>t.id===e.weapon.id||t.name===e.weapon.name);t&&M(t)}if(e.damage){let t=e.damage;S({amount:t.amount||t.dice||0,size:t.size||t.sides||6,type:t.type||"none"})}else S({amount:0,size:6,type:"none"});F({type:"success",text:"Technique loaded successfully!"}),setTimeout(()=>F(null),2e3)},[H]);return W?(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),(0,t.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):Q?(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:(0,t.jsxs)("p",{className:"text-red-700",children:["Failed to load technique parts: ",Q.message]})})}):(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[(0,t.jsx)(i.Swords,{className:"w-8 h-8 text-red-600"}),"Technique Creator"]}),(0,t.jsx)("p",{className:"text-gray-600",children:"Design custom martial techniques by combining technique parts. Each part contributes to the total stamina cost and training point requirements."})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>q(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[(0,t.jsx)(p.FolderOpen,{className:"w-5 h-5"}),"Load from Library"]})]}),(0,t.jsx)(N.LoadFromLibraryModal,{isOpen:$,onClose:()=>q(!1),onSelect:es,items:B,isLoading:Y,error:z,itemType:"technique",title:"Load Technique from Library"}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technique Name *"}),(0,t.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Enter technique name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:n,onChange:e=>u(e.target.value),placeholder:"Describe what your technique does...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Combat Configuration"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weapon Type"}),(0,t.jsx)("select",{value:P.id,onChange:e=>{let t=j.find(t=>t.id===parseInt(e.target.value));t&&M(t)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:j.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),(0,t.jsx)("select",{value:C,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:f.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:O,onChange:e=>L(e.target.checked),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Can be used as a Reaction"})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:["Technique Parts (",R.length,")"]}),(0,t.jsxs)("button",{type:"button",onClick:J,className:"flex items-center gap-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[(0,t.jsx)(r.Plus,{className:"w-4 h-4"}),"Add Part"]})]}),0===R.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(c.Info,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:'No parts added yet. Click "Add Part" to begin building your technique.'})]}):(0,t.jsx)("div",{className:"space-y-4",children:R.map((e,a)=>(0,t.jsx)(T,{selectedPart:e,index:a,onRemove:()=>ee(a),onUpdate:e=>et(a,e),allParts:H},a))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Additional Damage (Optional)"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)(b.NumberStepper,{value:D.amount,onChange:e=>S(t=>({...t,amount:e})),label:"Dice:",min:0,max:20,variant:"technique"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"font-bold text-lg",children:"d"}),(0,t.jsx)("select",{value:D.size,onChange:e=>S(t=>({...t,size:parseInt(e.target.value)})),className:"px-3 py-2 border border-gray-300 rounded-lg",children:A.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsx)("select",{value:D.type,onChange:e=>S(t=>({...t,type:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg",children:E.map(e=>(0,t.jsx)("option",{value:e,children:"none"===e?"No additional damage":e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),"none"!==D.type&&D.amount>0&&(0,t.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Additional Damage: ",(0,t.jsxs)("strong",{children:[D.amount,"d",D.size," ",D.type]})]})]})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-24",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Technique Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[(0,t.jsx)(o.Zap,{className:"w-6 h-6 mx-auto text-red-600 mb-1"}),(0,t.jsx)("div",{className:"text-3xl font-bold text-red-600",children:V.totalEnergy}),(0,t.jsx)("div",{className:"text-xs text-red-600",children:"Stamina Cost"})]}),(0,t.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,t.jsx)(d.Target,{className:"w-6 h-6 mx-auto text-purple-600 mb-1"}),(0,t.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:V.totalTP}),(0,t.jsx)("div",{className:"text-xs text-purple-600",children:"Training Points"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Action:"}),(0,t.jsx)("span",{className:"font-medium",children:X})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Weapon:"}),(0,t.jsx)("span",{className:"font-medium",children:P.name})]}),Z&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Damage:"}),(0,t.jsx)("span",{className:"font-medium",children:Z})]})]}),V.tpSources.length>0&&(0,t.jsxs)("div",{className:"border-t border-gray-100 pt-4 mb-6",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"TP Breakdown"}),(0,t.jsx)("ul",{className:"text-xs text-gray-600 space-y-1",children:V.tpSources.map((e,a)=>(0,t.jsxs)("li",{children:["• ",e]},a))})]}),G&&(0,t.jsx)("div",{className:(0,m.cn)("mb-4 p-3 rounded-lg text-sm","success"===G.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:G.text}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("button",{type:"button",onClick:ea,disabled:U||!s.trim(),className:(0,m.cn)("w-full py-3 rounded-xl font-bold transition-colors",U||!s.trim()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:U?"Saving...":"Save to Library"}),(0,t.jsx)("button",{type:"button",onClick:()=>{l(""),u(""),I([]),w("basic"),L(!1),S({amount:0,size:6,type:"none"}),M(j[0]),F(null)},className:"w-full py-2 rounded-xl font-medium text-gray-600 hover:bg-gray-100 transition-colors",children:"Reset"})]})]})})]})]})}function I(){return(0,t.jsx)(u.ProtectedRoute,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:(0,t.jsx)(R,{})})})}e.s(["default",()=>I],81250)}]);